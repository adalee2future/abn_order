webpackJsonp([10],Array(222).concat([function(e,t,n){e.exports=function(){n(36).injection.injectEventPluginsByName({TapEventPlugin:n(223)})}},function(e,t,n){"use strict";function o(e,t){var n=u.extractSingleTouch(t);return n?n[e.page]:e.page in t?t[e.page]:t[e.client]+c[e.envScroll]}function i(e,t){var n=o(w.x,t),i=o(w.y,t);return Math.pow(Math.pow(n-e.x,2)+Math.pow(i-e.y,2),.5)}var r=n(35),a=n(38),s=n(78),l=n(92),u=n(224),c=n(43),d=n(225),p=r.topLevelTypes,f=a.isStartish,h=a.isEndish,m=function(e){var t=[p.topTouchCancel,p.topTouchEnd,p.topTouchStart,p.topTouchMove];return t.indexOf(e)>=0},v=10,y=750,g={x:null,y:null},b=null,w={x:{page:"pageX",client:"clientX",envScroll:"currentPageScrollLeft"},y:{page:"pageY",client:"clientY",envScroll:"currentPageScrollTop"}},C=[p.topTouchStart,p.topTouchCancel,p.topTouchEnd,p.topTouchMove],E=[p.topMouseDown,p.topMouseMove,p.topMouseUp].concat(C),T={touchTap:{phasedRegistrationNames:{bubbled:d({onTouchTap:null}),captured:d({onTouchTapCapture:null})},dependencies:E}},P=function(){return Date.now?Date.now:function(){return+new Date}}(),k={tapMoveThreshold:v,ignoreMouseThreshold:y,eventTypes:T,extractEvents:function(e,t,n,r,a){if(m(e))b=P();else if(b&&P()-b<y)return null;if(!f(e)&&!h(e))return null;var u=null,c=i(g,r);return h(e)&&c<v&&(u=l.getPooled(T.touchTap,n,r,a)),f(e)?(g.x=o(w.x,r),g.y=o(w.y,r)):h(e)&&(g.x=0,g.y=0),s.accumulateTwoPhaseDispatches(u),u}};e.exports=k},function(e,t){var n={extractSingleTouch:function(e){var t=e.touches,n=e.changedTouches,o=t&&t.length>0,i=n&&n.length>0;return!o&&i?n[0]:o?t[0]:e}};e.exports=n},function(e,t){"use strict";var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=n},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["agentId","corpId","timeStamp","nonceStr","signature","onReady"]),i=o.agentId,r=o.corpId,a=o.timeStamp,s=o.nonceStr,l=o.signature,u=o.onReady;return i&&r&&a&&s&&l?(U&&D||(U=r,D=i),A.default.config({agentId:i,corpId:r,timeStamp:a,nonceStr:s,signature:l,jsApiList:["device.notification.confirm","device.notification.alert","device.notification.prompt","device.notification.toast","device.notification.showPreloader","device.notification.hidePreloader","device.notification.actionSheet","biz.util.previewImage","biz.util.uploadImage","biz.util.share","biz.util.ut","biz.util.openLink","biz.util.open","biz.contact.choose","biz.customContact.multipleChoose","biz.customContact.choose","biz.chat.chooseConversation","biz.navigation.close","biz.navigation.setMenu","biz.navigation.setIcon","biz.navigation.setRight","biz.navigation.setLeft","biz.navigation.setTitle","biz.ding.post","runtime.permission.requestAuthCode","biz.chat.chooseConversationByCorpId","biz.chat.pickConversation","ui.webViewBounce"]}),A.default.ready(function(){j(u)&&(x(),u())}),void A.default.error(function(e){console.log(e)})):(console.dir(o),void console.log("签名需要的信息不完整"))}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["message","title","buttonName","onSuccess","onFail"]),i=o.message,r=o.title,a=o.buttonName,s=o.onSuccess,l=o.onFail;A.default.device.notification.alert({message:i||"提示信息",title:r||"提示",buttonName:a||"确定",onSuccess:s||function(){},onFail:l||function(){}})}function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["message","title","buttons"]),i=o.message,r=o.title,a=o.buttons,s={};a&&1!==a.length?!function(){var e=[];a.forEach(function(t){e.push(t.name)}),s={message:i||"",title:r||"",buttonLabels:e,onSuccess:function(e){var t=a[e.buttonIndex].onClick;j(t)&&t()}}}():s={message:i||"",title:r||"",buttonLabels:["确定"]},A.default.device.notification.confirm(s)}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["text","icon","delay","duration"]),i=o.icon,r=o.text,a=o.delay,s=o.duration;A.default.device.notification.toast({icon:i||"",text:r||"toast",duration:s||1,delay:N(a)?0:a,onSuccess:function(){},onFail:function(){}})}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["text","showIcon"]),i=o.text,r=o.showIcon;r="undefined"==typeof r||r,A.default.device.notification.showPreloader({text:i||"正在加载..",showIcon:r,onSuccess:function(){},onFail:function(){}})}function u(){A.default.device.notification.hidePreloader({onSuccess:function(){},onFail:function(){}})}function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["message","title","buttons"]),i=o.message,r=o.title,a=o.buttons;if(N(a)||0===a.length)return void console.log("buttons is required");var s=[];a.forEach(function(e){s.push(e.name)}),A.default.device.notification.prompt({message:i||"",title:r||"提示",buttonLabels:s||[],onSuccess:function(e){var t=e.buttonIndex,n=e.value,o=a[t],i=o.onClick;j(i)&&o.onClick(n)}})}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["title","buttons","cancelButton"]),i=o.title,r=o.buttons,a=o.cancelButton;if(0===r.length)return void console.log("buttons is required");var s=[];r.forEach(function(e){s.push(e.name)}),A.default.device.notification.actionSheet({title:i||"选择列表",otherButtons:s||[],cancelButton:a||"取消",onSuccess:function(e){var t=e.buttonIndex,n=r[t];n&&j(n.onClick)&&n.onClick()},onFail:function(){}})}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["urls","current"]),i=o.urls,r=o.current;A.default.biz.util.previewImage({urls:i||[],current:r||(i&&i[0]?i[0]:"")})}function f(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["multiple","max","onSuccess"]),i=o.multiple,r=o.max,a=o.onSuccess;A.default.biz.util.uploadImage({multiple:!N(i)&&i,max:N(r)?10:r,onSuccess:a||function(){}})}function h(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["users","multiple","max","onSuccess","corpId","startWithDepartmentId"]),i=o.corpId,r=o.multiple,a=o.max,s=o.users,l=o.startWithDepartmentId,u=o.onSuccess;A.default.biz.contact.choose({startWithDepartmentId:N(l)?0:l,multiple:!!N(r)||r,corpId:i||U,max:N(a)?150:a,users:N(s)?[]:s,onSuccess:function(e){j(u)&&u(e)},onFail:function(e){console.dir(e)}})}function m(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["corpId","title","users","isShowCompanyName","selectedUsers","disabledUsers","multiple","onSuccess"]),i=o.corpId,r=o.title,a=o.users,s=o.isShowCompanyName,l=o.selectedUsers,u=o.disabledUsers,c=o.multiple,d=o.onSuccess;if(N(i))return void console.log("corpId is required");var p={title:r||"选择人员",users:a||[],corpId:i,isShowCompanyName:!N(s)&&s,selectedUsers:l||[],disabledUsers:u||[],onSuccess:function(e){j(d)&&d(e)},onFail:function(e){console.dir(e)}};c?A.default.biz.customContact.multipleChoose(p):A.default.biz.customContact.choose(p)}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["title","url","content","image"]),i=o.title,r=o.url,a=o.content,s=o.image;A.default.biz.util.share({title:i||"分享",url:r||window.location.href,content:a||"石墨文档",image:s||"",type:0})}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["users","corpId","type","alertType","alertDate","attachment","text"]),i=o.users,r=o.corpId,a=o.alertType,s=o.alertDate,l=o.attachment,u=o.text,c=o.type;c=c||1;var d={users:i||[],corpId:r||U,type:c,alertType:a||2,text:u||""};if(1===c?d.attachment=l||{images:[""]}:2===c&&(d.attachment=l||{title:"",url:"",image:"",text:""}),!s){var p=new Date,f=p.getMonth()+1;f=f<10?"0"+f:""+f;var h=p.getDate();h=h<10?"0"+h:""+h;var m=p.getHours();m=m<10?"0"+m:""+m;var v=p.getMinutes();v=v<10?"0"+v:""+v,d.alertDate={format:"yyyy-MM-dd HH:mm",value:p.getFullYear()+"-"+f+"-"+h+" "+m+":"+v}}A.default.biz.ding.post(d)}function g(e){document.title=e,A.default.biz.navigation.setTitle({title:e,onSuccess:function(){},onFail:function(e){console.dir(e)}})}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["iconIndex","showIcon","onSuccess"]),i=o.iconIndex,r=o.showIcon,a=o.onSuccess;A.default.biz.navigation.setIcon({showIcon:!!N(r)||r,iconIndex:N(i)?1:i,onSuccess:a||function(){},onFail:function(e){console.dir(e)}})}function w(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["text","onSuccess","show","control"]),i=o.text,r=o.onSuccess,a=o.show,s=o.control;A.default.biz.navigation.setRight({text:i||"",show:N(a)?!!i:a,control:N(s)?j(r):s,onSuccess:r||function(){}})}function C(){A.default.biz.navigation.close()}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["buttons","backgroundColor"]),i=o.buttons,r=o.backgroundColor,a={};N(i)||0===i.length?a={backgroundColor:r||"#FFF",items:[],onSuccess:function(e){console.dir(e)},onFail:function(e){console.dir(e)}}:!function(){var e=[];i.forEach(function(t,n){var o={id:""+n,text:t.text||"item",iconId:t.iconId};e.push(o)}),a={backgroundColor:r||"#FFF",items:e,onSuccess:function(e){var t=i[+e.id];j(t.onClick)&&t.onClick()},onFail:function(e){console.dir(e)}}}(),A.default.biz.navigation.setMenu(a)}function T(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["key","type"]),i=o.key,r=o.type;return D&&U?void A.default.biz.util.ut({key:i||"",value:"'corpId': "+U+", 'agentId': "+D+", 'type': "+(r||"")}):void console.log("埋点失败，签名信息不完整")}function P(e){A.default.biz.util.openLink({url:e})}function k(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=I(t,["name","params"]);o.onFail=function(e){r(JSON.stringify(e))},A.default.biz.util.open(o)}function _(e){return U?void A.default.runtime.permission.requestAuthCode({corpId:U,onSuccess:function(t){j(e)&&e(t)}}):void console.log("corpid is required")}function O(e){return U?void A.default.biz.chat.chooseConversationByCorpId({corpId:U||"",onSuccess:e||function(){},onFail:function(e){console.dir(e)}}):void console.log("corpid is required")}function S(e){return U?void A.default.biz.chat.pickConversation({corpId:U||"",isConfirm:"false",onSuccess:e||function(){},onFail:function(e){console.dir(e)}}):void console.log("corpid is required")}function x(){A.default.ui.webViewBounce.disable()}function M(e){return"object"==typeof e}function N(e){return"undefined"==typeof e||null===e}function j(e){return"function"==typeof e}function I(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n={};if(0===e.length)return n;if(1===e.length&&M(e[0])){var o=function(){var o=e[0];return t.length&&!t.some(function(e){return o.hasOwnProperty(e)})?(n[t[0]]=o,{v:n}):{v:o}}();if("object"==typeof o)return o.v}return t.forEach(function(t,o){var i=e[o];N(i)||(n[t]=i)}),n}Object.defineProperty(t,"__esModule",{value:!0});var L=n(227),A=o(L),D="",U="";window.cow.signInfo&&(D=window.cow.signInfo.agentId,U=window.cow.signInfo.corpId),t.default={signature:i,alert:r,confirm:a,toast:s,showLoading:l,hideLoading:u,prompt:c,actionSheet:d,previewImage:p,uploadImage:f,customContactChoose:m,contactChoose:h,setTitle:g,setIcon:b,setRight:w,close:C,setMenu:E,ding:y,share:v,ut:T,openLink:P,open:k,requestAuthCode:_,chooseChatByCorpId:O,pickChat:S,disableBounce:x},e.exports=t.default},function(e,t,n){var o;(function(e,i){(function(){"use strict";var i={},r=navigator.userAgent,a=r.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===a&&(a=r.match(/DingTalk\/([a-zA-Z0-9.-]+)/));var s=a&&a[1];i.ios=/iPhone|iPad|iPod/i.test(r),i.android=/Android/i.test(r),i.version=s,i.cfg={},i.extend=function(e,t){if(t)for(var n in t)e[n]=t[n];return e},i.type=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},"object"==typeof e&&e&&"object"==typeof e.exports?e.exports=i:(n(228)||n(229).cmd)&&(o=function(){return i}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))),"undefined"==typeof this.dd&&(this.dd=i),this.__dd=i}).call(window),function(e){"use strict";var t=["backbutton","online","offline","pause","resume","swipeRefresh","appLinkResponse","internalPageLinkResponse","networkEvent","hostTaskEvent"];e.extend(e,{events:t})}(__dd),function(e){"use strict";var t="0.5.5",n={device:[{namespace:"device.notification.alert",name:"弹窗alert",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonName:"确定"}},{namespace:"device.notification.confirm",name:"弹窗confirm",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonLabels:["确定","取消"]}},{namespace:"device.notification.prompt",name:"弹窗prompt",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonLabels:["确定","取消"]}},{namespace:"device.notification.vibrate",name:"震动",ios:"2.4.0",android:"2.4.0",defaultParams:{duration:300}},{namespace:"device.accelerometer.watchShake",name:"启动摇一摇",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0},paramsCallback:function(t){e.ios&&(t.sensitivity=3.2)}},{namespace:"device.notification.toast",name:"Toast",ios:"2.4.0",android:"2.4.0",defaultParams:{text:"toast",duration:3,delay:0}},{namespace:"device.notification.showPreloader",name:"显示浮层",ios:"2.4.0",android:"2.4.0",defaultParams:{text:"加载中...",showIcon:!0}},{namespace:"device.notification.hidePreloader",name:"隐藏浮层",ios:"2.4.0",android:"2.4.0"},{namespace:"device.geolocation.get",name:"获取经纬度",ios:"2.4.0",android:"2.4.0"},{namespace:"device.notification.actionSheet",name:"ActionSheet控件",ios:"2.4.0",android:"2.4.0"},{namespace:"device.connection.getNetworkType",name:"获取当前网络类型",ios:"2.4.0",android:"2.4.0"},{namespace:"device.base.getUUID",name:"获取通用唯一识别码（卸载重新安装会改变）",ios:"2.4.0",android:"2.4.0"},{namespace:"device.base.getInterface",name:"获取热点接入信息",ios:"2.4.0",android:"2.4.0"},{namespace:"device.launcher.checkInstalledApps",name:"检测应用是否安装",ios:"2.4.0",android:"2.4.0"},{namespace:"device.launcher.launchApp",name:"启动第三方app",ios:"2.4.0",android:"2.4.0"},{namespace:"device.notification.modal",name:"弹浮层",ios:"2.4.0",android:"2.4.0"},{namespace:"device.geolocation.openGps",name:"打开设置，只有android有效",ios:"2.5.0",android:"2.5.0"},{namespace:"device.notification.extendModal",name:"弹层，支持多张图片",ios:"2.5.0",android:"2.5.0"},{namespace:"device.base.getSettings",name:"获取手机设置（目前只有ios支持）",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"device.audio.download",name:"下载音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.play",name:"播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.onPlayEnd",name:"监听播放音频停止的事件接口",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.resume",name:"暂停之后继续播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.pause",name:"暂停播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.stop",name:"停止播放音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.startRecord",name:"开始录制音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.stopRecord",name:"停止录制音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.onRecordEnd",name:"监听录音自动停止",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.audio.upload",name:"上传已录制的音频",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.base.getScanWifiList",name:"获取wifi列表",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"device.base.getWifiStatus",name:"获取wifi是否打开",ios:"2.11.0",android:"2.11.0",release:!1}],biz:[{namespace:"biz.util.open",name:"打开应用内页面",ios:"2.4.0",android:"2.4.0",defaultParams:{}},{namespace:"biz.util.openLink",name:"新开页面",ios:"2.4.0",android:"2.4.0",defaultParams:{credible:!0,showMenuBar:!0}},{namespace:"biz.util.share",name:"分享",ios:"2.4.0",android:"2.4.0",defaultParams:{title:"",buttonName:"确定"}},{namespace:"biz.util.ut",name:"上报埋点",ios:"2.4.0",android:"2.4.0",paramsCallback:function(t){var n=t.value,o=[];if(n&&"Object"==e.type(n))if(e.ios)n=JSON.stringify(n);else if(e.android){for(var i in n)o.push(i+"="+n[i]);n=o.join(",")}t.value=n}},{namespace:"biz.util.datepicker",name:"日期选择器",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.timepicker",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.user.get",name:"获取当前登录用户信息",ios:"2.4.0",android:"2.4.0",offline:!0},{namespace:"biz.navigation.setLeft",name:"设置导航左侧按钮",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,show:!0,control:!1,showIcon:!0,text:""}},{namespace:"biz.navigation.setRight",name:"设置导航右侧按钮",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,show:!0,control:!1,showIcon:!0,text:""}},{namespace:"biz.navigation.setTitle",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.back",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.uploadImage",name:"弹窗alert",ios:"2.4.0",android:"2.4.0",defaultParams:{multiple:!1}},{namespace:"biz.util.previewImage",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.qrcode",name:"弹窗alert",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.ding.post",name:"发钉",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.telephone.call",name:"打电话",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.chooseConversation",name:"选会话",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.contact.createGroup",name:"创建群",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.datetimepicker",name:"日期时间控件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.chosen",name:"下拉控件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.getConversationInfo",name:"查询会话信息",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.map.search",name:"地图搜索",ios:"2.4.0",android:"2.4.0",release:!1,defaultParams:{scope:500}},{namespace:"biz.map.locate",name:"地图定位",ios:"2.4.0",android:"2.4.0",release:!1},{namespace:"biz.map.view",name:"查看定位",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.scan",name:"扫码(支持二维码和条形码)",ios:"2.4.0",android:"2.4.0",defaultParams:{type:"qrCode"}},{namespace:"biz.contact.choose",name:"修改企业通讯录选人",ios:"2.4.0",android:"2.4.0",defaultParams:{multiple:!0,startWithDepartmentId:0,users:[]},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.contact.complexChoose",name:"企业通讯录同时选人，选部门",ios:"2.4.0",android:"2.4.0",defaultParams:{startWithDepartmentId:0,selectedUsers:[],selectedDepartments:[]},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.navigation.createEditor",name:"创建通用组件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.finishEditor",name:"销毁通用组件",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.chat.pickConversation",name:"选群组",ios:"2.4.2",android:"2.4.2"},{namespace:"biz.contact.complexChoose",name:"企业通讯录同时选人，选部门",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.navigation.setIcon",name:"设置导航icon",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0,showIcon:!0,iconIndex:1}},{namespace:"biz.navigation.close",name:"关闭webview",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.util.uploadImageFromCamera",name:"上传图片",ios:"2.4.0",android:"2.4.0"},{namespace:"biz.user.secretID",name:"获取用户登录唯一标识",ios:"2.5.2",android:"2.5.2"},{namespace:"biz.customContact.choose",name:"自定义选人组件",ios:"2.5.2",android:"2.5.2",defaultParams:{isShowCompanyName:!1,max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.customContact.multipleChoose",name:"自定义选人组件（多选）",ios:"2.4.0",android:"2.4.0",defaultParams:{isShowCompanyName:!1,max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.util.pageClick",name:"页面打点",ios:"2.5.2",android:"2.5.2"},{namespace:"biz.chat.chooseConversationByCorpId",name:"选择企业会话",ios:"2.6.0",android:"2.6.0",defaultParams:{max:50},paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.chat.toConversation",name:"跳转会话",ios:"2.6.0",android:"2.6.0",paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.navigation.goBack",name:"",ios:"2.6.0",android:"2.6.0"},{namespace:"biz.navigation.setMenu",name:"设置导航左侧按钮",ios:"2.6.0",android:"2.6.0",defaultParams:{watch:!0}},{namespace:"biz.util.uploadAttachment",name:"附件上传",ios:"2.7.0",release:!1,android:"2.7.0"},{namespace:"biz.cspace.preview",name:"附件预览",ios:"2.7.0",android:"2.7.0",release:!1,defaultParams:{}},{namespace:"biz.cspace.saveFile",name:"转存附件",ios:"2.7.6",android:"2.7.6"},{namespace:"biz.clipboardData.setData",name:"添加到黏贴板",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"biz.util.warn",name:"报警接口",ios:"2.7.6",android:"2.7.6",release:!1,paramsCallback:function(e){var t=e.logName||"h5_common_error",n="url="+location.href,o=[],i=e.obj||{};for(var r in i)o.push(r+"="+i[r]);e.message={msg:t+" "+n+" "+o.join(" ")}}},{namespace:"biz.util.multiSelect",name:"下拉多选",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.contact.getMobileContact",name:"查询手机联系人",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.telephone.showCallMenu",name:"打电话选择面板",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.presentWindow",name:"打开窗口",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.contact.changeCustomerFollower",name:"企业通讯录选人，加入微应用权限过滤",ios:"2.8.0",android:"2.8.0",paramsCallback:function(t){e.cfg&&e.cfg.corpId&&(t.corpId=e.cfg.corpId)}},{namespace:"biz.notify.send",name:"消息通知H5到Native",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.alipay.pay",name:"支付宝移动支付SDK，订单支付JS-API封装",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.alipay.auth",name:"支付宝移动支付SDK，授权JS-API封装",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.fetchImageData",name:"在相册中拾取某张图片，对图片数据base64编码后返回给js",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.scanCard",name:"名片扫描",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.addDesktopShortcuts",name:"添加桌面快捷方式",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"biz.util.timestamp",name:"获取服务器时间",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"biz.contact.complexPicker",name:"选人",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"biz.util.encrypt",name:"加密",ios:"2.9.1",android:"2.9.1",release:!1},{namespace:"biz.util.decrypt",name:"解密",ios:"2.9.1",android:"2.9.1",release:!1},{namespace:"biz.contact.pickCustomer",name:"选择客户",ios:"2.11",android:"2.11",release:!1},{namespace:"biz.map.searchRoute",name:"查询路线",ios:"2.11",android:"2.11",release:!1}],ui:[{namespace:"ui.input.plain",name:"输入框（单行）",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.progressBar.setColors",name:"设置顶部进度条颜色",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.pullToRefresh.enable",name:"启用下拉刷新功能",ios:"2.4.0",android:"2.4.0",defaultParams:{watch:!0}},{namespace:"ui.pullToRefresh.stop",name:"收起下拉刷新控件",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.pullToRefresh.disable",name:"禁用下拉刷新功能",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.webViewBounce.enable",name:"启用webview下拉弹性效果",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.webViewBounce.disable",name:"禁用webview下拉弹性效果",ios:"2.4.0",android:"2.4.0"},{namespace:"ui.nav.preload",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.go",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.recycle",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.push",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.pop",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.quit",name:"",ios:"2.10.0",android:"2.11.0",release:!1},{namespace:"ui.nav.close",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.nav.getCurrentId",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.init",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.config",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.enable",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.disable",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.open",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.drawer.close",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"ui.tab.init",name:"初始化tab",android:"2.7.6"},{namespace:"ui.tab.start",name:"唤起tab",android:"2.7.6"},{namespace:"ui.tab.config",name:"配置tab",android:"2.7.6"},{namespace:"ui.tab.select",name:"tab选择",android:"2.7.6"},{namespace:"ui.tab.add",name:"增加tab",android:"2.7.6"},{namespace:"ui.tab.remove",name:"移除tab",android:"2.7.6"},{namespace:"ui.appLink.open",name:"应用跳转",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"ui.appLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.appLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.appLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.nav.push",name:"往路径堆栈中push路径",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"ui.nav.pop",name:"路径堆栈中删除view 路径",ios:"2.8.0",android:"2.8.0",release:!1}],runtime:[{namespace:"runtime.info",name:"获取容器信息",ios:"2.4.0",android:"2.4.0"},{namespace:"runtime.permission.requestAuthCode",name:"请求授权码，免登改造用",ios:"2.4.0",android:"2.4.0"},{namespace:"runtime.permission.requestJsApis",name:"权限校验jsapi，隐藏方法，只限sdk内部调用",ios:"2.4.0",android:"2.4.0",release:!1},{namespace:"runtime.message.post",name:"",ios:"2.6.0",android:"2.6.0",release:!1},{namespace:"runtime.message.fetch",name:"",ios:"2.6.0",android:"2.6.0",release:!1}],internal:[{namespace:"internal.lwp.call",name:"lwp接口(目前只有套件使用)",ios:"2.5.0",android:"2.5.0",offline:!0},{namespace:"internal.microapp.checkInstalled",name:"检测微应用是否安装",ios:"2.5.0",android:"2.5.0"},{namespace:"internal.user.getRole",name:"获取角色",ios:"2.5.0",android:"2.5.0"},{namespace:"internal.request.lwp",name:"lwp通道",ios:"2.5.1",android:"2.5.1",paramsCallback:function(e){var t=e.body;t=JSON.stringify(t),e.body=t}},{namespace:"internal.util.encryData",name:"参数加密生成key",ios:"2.5.2",android:"2.5.2"},{namespace:"internal.log.upload",name:"上报日志到服务端",ios:"2.6.0",android:"2.6.0"},{namespace:"internal.hpm.get",name:"获取hpm配置信息（暂未开发）",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.hpm.update",name:"更新hpm",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.request.getSecurityToken",name:"获取securityToken",ios:"2.7.0",android:"2.7.0"},{namespace:"internal.phoneContact.add",name:"添加号码到手机通信录",ios:"2.7.6",android:"2.7.6"},{namespace:"internal.log.add",name:"日志写入到客户端",ios:"2.7.6",android:"2.7.6",paramsCallback:function(e){var t="h5_log=1";e.text=t+e.text}},{namespace:"internal.pageLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.pageLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.pageLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getCorpIdByOrgId",name:"orgId换corpId",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getOrgIdByCorpId",name:"corpId换orgId",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.request.httpOverLWP",name:"http转lwp",ios:"2.8.0",android:"2.8.0"},{namespace:"internal.notify.send",name:"消息通知H5到Native",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.schema.open",name:"内部页面跳转",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.contact.chooseMobileContact",name:"手机通讯录选人（单选）",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.isSimulator",name:"模拟器",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.util.getWua",name:"人机识别",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"internal.beacon.detectBeacons",name:"beacon",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.lwp",name:"离线托管的lwp请求",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.query",name:"查询离线托管任务",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.host.cancel",name:"取消离线托管任务",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.schema.openWifiSetting",name:"跳转到wifi设置（Android）",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.createOrg.industryInfo",name:"获取创建团队之后的行业信息",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.createOrg.successJump",name:"创建团队之后跳转",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.beacon.detectStart",name:"detectStart",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.beacon.detectStop",name:"detectStop",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"internal.attend.assistant",name:"上班助手",ios:"2.11.0",android:"2.11.0",release:!1},{namespace:"internal.certify.step",name:"查询活体认证状态",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.biometric",name:"调用活体拍照",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.takePhoto",name:"拍照",ios:"2.12.0",android:"2.12.0",release:!1},{namespace:"internal.certify.submit",name:"上班助手",ios:"2.12.0",android:"2.12.0",release:!1}],util:[{namespace:"util.localStorage.getItem",name:"本地存储读",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.localStorage.setItem",name:"本地存储写",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.localStorage.removeItem",name:"本地存储移除操作",ios:"2.4.2",android:"2.4.2",release:!1},{namespace:"util.domainStorage.getItem",name:"本地存储（区分域名）读",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.setItem",name:"本地存储（区分域名）写",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.removeItem",name:"本地存储（区分域名）删除",ios:"2.9.0",android:"2.9.0",release:!1},{namespace:"util.domainStorage.clearItems",name:"本地存储（区分域名）清空",ios:"2.9.0",android:"2.9.0",release:!1}],preRelease:[{namespace:"preRelease.appLink.open",name:"应用跳转",ios:"2.7.0",android:"2.7.0",release:!1},{namespace:"preRelease.appLink.request",name:"发送消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"preRelease.appLink.response",name:"返回消息",ios:"2.8.0",android:"2.8.0",release:!1},{namespace:"preRelease.appLink.fetch",name:"获取请求页面（sourceApp）的数据",ios:"2.8.0",android:"2.8.0",release:!1}]};e.extend(e,{sdk_version:t}),e.extend(e,{methods:n})}(__dd),function(e,t){"use strict";function n(t,n,o){"undefined"==typeof WebViewJavascriptBridge,e.__getMockName&&(t=e.__getMockName(t));var i={};i=e.extend(i,o&&o.defaultParams),e.extend(i,n),o&&o.paramsCallback&&o.paramsCallback(i);var r=function(e){console.log("默认成功回调",t,e)},a=function(e){console.log("默认失败回调",t,e)},s=function(){};i.onSuccess&&(r=i.onSuccess,delete i.onSuccess),i.onFail&&(a=i.onFail,delete i.onFail),i.onCancel&&(s=i.onCancel,delete i.onCancel);var l=function(e){var t=e||{},n=t.errorCode,o=t.result;"0"===n?r&&r.call(null,o):"-1"===n?s&&s.call(null,o):a&&a.call(null,o,n)},u=i.watch;if(e.android){var c=t.split("."),d=c.pop(),p=c.join(".");window.WebViewJavascriptBridgeAndroid&&WebViewJavascriptBridgeAndroid(r,a,p,d,i)}else e.ios&&(u?(window.WebViewJavascriptBridge&&WebViewJavascriptBridge.registerHandler(t,function(e,t){l({errorCode:"0",errorMessage:"成功",result:e}),t&&t({errorCode:"0",errorMessage:"成功"})}),window.WebViewJavascriptBridge&&WebViewJavascriptBridge.callHandler(t,i)):window.WebViewJavascriptBridge&&WebViewJavascriptBridge.callHandler(t,i,l))}var o,r=!1,a=null,s="runtime.permission.requestJsApis",l=null,u=!1,c=!1;window.ES6Promise?(ES6Promise.polyfill(),c=!0):window.Promise||(window.Promise=function(){}),e.extend(e,{ability:"",config:function(t){t&&(a={corpId:t.corpId,appId:t.appId||-1,timeStamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList},e.cfg=a,t.agentId&&(a.agentId=t.agentId))},error:function(e){l=e},ready:function(n){var o=function t(o){if(!o)return console.log("bridge初始化失败");if(null!==a&&a.signature){if(e.ios)o.callHandler(s,a,function(e){var t=e||{},i=t.errorCode,r=t.errorMessage||"";t.result,"0"===i?n(o):setTimeout(function(){l&&l({message:"权限校验失败 "+r,errorCode:3})})});else if(e.android){var t=s.split("."),i=t.pop(),u=t.join(".");o(function(){n(o)},function(e){setTimeout(function(){var t=e&&e.errorMessage||"";l&&l({message:"权限校验失败 "+t,errorCode:3})})},u,i,a)}}else n(o);if(r===!1&&(r=!0,e.events.forEach(function(t){e.ios&&o.registerHandler(t,function(e,n){var o=document.createEvent("HTMLEvents");o.data=e,o.detail=e,o.initEvent(t),document.dispatchEvent(o),n&&n({errorCode:"0",errorMessage:"成功"})})}),null===a)){var c={url:encodeURIComponent(window.location.href),
js:e.sdk_version,cid:a&&a.corpId||""};e.biz.util.ut({key:"dd_open_js_monitor",value:JSON.stringify(c),onSuccess:function(e){}})}};if(e.ios&&t.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(e,t){})}catch(e){console.log(e.message)}return o(WebViewJavascriptBridge)}if(e.android&&t.WebViewJavascriptBridgeAndroid)return o(WebViewJavascriptBridgeAndroid);if(e.ios)document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("请在钉钉App打开此页面");try{WebViewJavascriptBridge.init(function(e,t){})}catch(e){console.log(e.message)}u=!0,o(WebViewJavascriptBridge)},!1);else{if(!e.android)return console.log("请在钉钉App打开此页面");var i=function(){try{t.WebViewJavascriptBridgeAndroid=t.nuva.require(),u=!0,o(WebViewJavascriptBridgeAndroid)}catch(e){console.log("window.nuva.require出错",e.message),o(null)}};t.nuva&&(void 0===t.nuva.isReady||t.nuva.isReady)?i():document.addEventListener("runtimeready",function(){i()},!1)}},compareVersion:function(e,t,n){if("string"!=typeof e||"string"!=typeof t)return!1;for(var o,i,r=e.split("."),a=t.split(".");o===i&&a.length>0;)o=r.shift(),i=a.shift();return n?(0|i)>=(0|o):(0|i)>(0|o)}});var d=function(t,n){for(var o=t.split("."),i=e,r=0,a=o.length;a>r;r++)r===a-1&&(i[o[r]]=n),"undefined"==typeof i[o[r]]&&(i[o[r]]={}),i=i[o[r]]},p=function(t,r,a){return c?new i(function(s,l){r=r||{},r._onSuccess=r.onSuccess||function(){},r._onFail=r.onFail||function(){},r._onCancel=r.onCancel||function(){},r.onSuccess=function(){r._onSuccess.apply(this,arguments),s.apply(this,arguments)},r.onFail=function(){r._onFail.apply(this,arguments),l.apply(this,arguments)},r.onCancel=function(){r._onCancel.apply(this,arguments),l.apply(this,arguments)},o=new i(function(t,n){e.ready(function(e){t(e)})}),i.all([o]).then(function(o){r=r||{},e.cfg&&e.cfg.corpId&&(r.corpId=e.cfg.corpId),n(t,r,a)})}):(r=r||{},e.cfg&&e.cfg.corpId&&(r.corpId=e.cfg.corpId),void n(t,r,a))};for(var f in e.methods)e.methods[f].forEach(function(e){d(e.namespace,function(t){return p(e.namespace,t,e)})});e._invoke=function(e){d(e.namespace,function(t){return p(e.namespace,t,e)})},e.biz.util.pageClick=function(t){var n="open_micro_log_record_client",o=+new Date,r=t.corpId,s=t.agentId;r||(r=a&&a.corpId||""),s||(s=a&&a.agentId||"");var l={visitTime:o,clickType:2,clickButton:t.clickButton||"",url:location.href,corpId:r,agentId:s};return e.biz.util.ut({key:n,value:l}),c?new i(function(e){e()}):void 0}}(__dd,window)}).call(t,n(5)(e),n(170))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},,,,,,function(e,t,n){"use strict";t.__esModule=!0;var o=n(236);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return o.default}});var i=n(238);Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return i.default}})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){d||(d=!0,console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0,t.default=void 0;var l=n(7),u=n(237),c=o(u),d=!1,p=function(e){function t(n,o){i(this,t);var a=r(this,e.call(this,n,o));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.componentWillReceiveProps=function(e){var t=this.store,n=e.store;t!==n&&s()},t.prototype.render=function(){var e=this.props.children;return l.Children.only(e)},t}(l.Component);t.default=p,p.propTypes={store:c.default.isRequired,children:l.PropTypes.element.isRequired},p.childContextTypes={store:c.default.isRequired}},function(e,t,n){"use strict";t.__esModule=!0;var o=n(7);t.default=o.PropTypes.shape({subscribe:o.PropTypes.func.isRequired,dispatch:o.PropTypes.func.isRequired,getState:o.PropTypes.func.isRequired})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function l(e,t,n){function o(e,t){var n=e.getState(),o=S?g(n,t):g(n);return(0,T.default)((0,y.default)(o),"`mapStateToProps` must return an object. Instead received %s.",o),o}function l(e,t){var n=e.dispatch,o=x?w(n,t):w(n);return(0,T.default)((0,y.default)(o),"`mapDispatchToProps` must return an object. Instead received %s.",o),o}function p(e,t,n){var o=E(e,t,n);return(0,T.default)((0,y.default)(o),"`mergeProps` must return an object. Instead received %s.",o),o}var h=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],v=Boolean(e),g=e||P,w=(0,y.default)(t)?(0,b.default)(t):t||k,E=n||_,S=g.length>1,x=w.length>1,M=h.pure,N=void 0===M||M,j=h.withRef,I=void 0!==j&&j,L=O++;return function(e){var t=function(t){function n(e,a){i(this,n);var s=r(this,t.call(this,e,a));return s.version=L,s.store=e.store||a.store,(0,T.default)(s.store,'Could not find "store" in either the context or '+('props of "'+s.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+s.constructor.displayName+'".')),s.stateProps=o(s.store,e),s.dispatchProps=l(s.store,e),s.state={storeState:null},s.updateState(),s}return a(n,t),n.prototype.shouldComponentUpdate=function(e,t){if(!N)return this.updateStateProps(e),this.updateDispatchProps(e),this.updateState(e),!0;var n=t.storeState!==this.state.storeState,o=!(0,m.default)(e,this.props),i=!1,r=!1;return(n||o&&S)&&(i=this.updateStateProps(e)),o&&x&&(r=this.updateDispatchProps(e)),!!(o||i||r)&&(this.updateState(e),!0)},n.prototype.computeNextState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];return p(this.stateProps,this.dispatchProps,e)},n.prototype.updateStateProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=o(this.store,e);return!(0,m.default)(t,this.stateProps)&&(this.stateProps=t,!0)},n.prototype.updateDispatchProps=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],t=l(this.store,e);return!(0,m.default)(t,this.dispatchProps)&&(this.dispatchProps=t,!0)},n.prototype.updateState=function(){var e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0];this.nextState=this.computeNextState(e)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){v&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},n.prototype.handleChange=function(){this.unsubscribe&&this.setState({storeState:this.store.getState()})},n.prototype.getWrappedInstance=function(){return(0,T.default)(I,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=I?"wrappedInstance":null;return d.default.createElement(e,u({},this.nextState,{ref:t}))},n}(c.Component);return t.displayName="Connect("+s(e)+")",t.WrappedComponent=e,t.contextTypes={store:f.default},t.propTypes={store:f.default},(0,C.default)(t,e)}}var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.__esModule=!0,t.default=l;var c=n(7),d=o(c),p=n(237),f=o(p),h=n(239),m=o(h),v=n(240),y=o(v),g=n(241),b=o(g),w=n(251),C=o(w),E=n(252),T=o(E),P=function(){return{}},k=function(e){return{dispatch:e}},_=function(e,t,n){return u({},n,e,t)},O=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=Object.prototype.hasOwnProperty,r=0;r<n.length;r++)if(!i.call(t,n[r])||e[n[r]]!==t[n[r]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e){if(!e||"object"!==("undefined"==typeof e?"undefined":n(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var o=t.constructor;return"function"==typeof o&&o instanceof o&&i(o)===i(Object)}t.__esModule=!0,t.default=o;var i=function(e){return Function.prototype.toString.call(e)}},function(e,t,n){"use strict";function o(e){return function(t){return(0,i.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=o;var i=n(242)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(243),r=o(i),a=n(245),s=o(a),l=n(248),u=o(l),c=n(249),d=o(c),p=n(250),f=o(p);t.createStore=r.default,t.combineReducers=s.default,t.bindActionCreators=u.default,t.applyMiddleware=d.default,t.compose=f.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(){return u}function o(e){c.push(e);var t=!0;return function(){if(t){t=!1;var n=c.indexOf(e);c.splice(n,1)}}}function i(e){if(!a.default(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,u=l(u,e)}finally{d=!1}return c.slice().forEach(function(e){return e()}),e}function r(e){l=e,i({type:s.INIT})}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var l=e,u=t,c=[],d=!1;return i({type:s.INIT}),{dispatch:i,subscribe:o,getState:n,replaceReducer:r}}t.__esModule=!0,t.default=i;var r=n(244),a=o(r),s={INIT:"@@redux/INIT"};t.ActionTypes=s},function(e,t){"use strict";function n(e){if(!e||"object"!=typeof e)return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&o(n)===o(Object)}t.__esModule=!0,t.default=n;var o=function(e){return Function.prototype.toString.call(e)};e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=t&&t.type,o=n&&'"'+n.toString()+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+o+". To ignore an action, you must explicitly return the previous state."}function r(e){Object.keys(e).forEach(function(t){var n=e[t],o=n(void 0,{type:s.ActionTypes.INIT});if("undefined"==typeof o)throw new Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var i="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if("undefined"==typeof n(void 0,{type:i}))throw new Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){var t,n=p.default(e,function(e){return"function"==typeof e});try{r(n)}catch(e){t=e}var o=c.default(n,function(){});return function(e,r){if(void 0===e&&(e=o),t)throw t;var a=!1,s=c.default(n,function(t,n){var o=e[n],s=t(o,r);if("undefined"==typeof s){var l=i(n,r);throw new Error(l)}return a=a||s!==o,s});return a?s:e}}t.__esModule=!0,t.default=a;var s=n(243),l=n(244),u=(o(l),n(246)),c=o(u),d=n(247),p=o(d);e.exports=t.default},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,o){return n[o]=t(e[o],o),n},{})}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t){"use strict";function n(e,t){return Object.keys(e).reduce(function(n,o){return t(e[o])&&(n[o]=e[o]),n},{})}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(){return t(e.apply(void 0,arguments))}}function r(e,t){if("function"==typeof e)return i(e,t);if("object"!=typeof e||null===e||void 0===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');return s.default(e,function(e){return i(e,t)})}t.__esModule=!0,t.default=r;var a=n(246),s=o(a);e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,o){var i=e(n,o),a=i.dispatch,l=[],u={getState:i.getState,dispatch:function(e){return a(e)}};return l=t.map(function(e){return e(u)}),a=s.default.apply(void 0,l)(i.dispatch),r({},i,{dispatch:a})}}}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=i;var a=n(250),s=o(a);e.exports=t.default},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},i="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,r){if("string"!=typeof t){var a=Object.getOwnPropertyNames(t);i&&(a=a.concat(Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;++s)if(!(n[a[s]]||o[a[s]]||r&&r[a[s]]))try{e[a[s]]=t[a[s]]}catch(e){}}return e}},function(e,t,n){"use strict";var o=function(e,t,n,o,i,r,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,o,i,r,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=o},,function(e,t){"use strict";function n(e){var t=e.dispatch,n=e.getState;return function(e){return function(o){return"function"==typeof o?o(t,n):e(o)}}}e.exports=n},function(e,t,n){(function(t){function n(e,t){var n={};for(var o in e)t.indexOf(o)<0&&(n[o]=e[o]);return n}e.exports=function(){return function(e){return function(o){var i=o.promise,r=o.types,a=n(o,["promise","types"]);if(!i)return e(o);var s=r[0],l=r[1],u=r[2];return e({type:"@@REQUEST/START"}),e(t.assign({},a,{type:s})),i.then(function(n){return e({type:"@@REQUEST/SUCCESS"}),e(t.assign({},a,{type:l,result:n})),n},function(n){return e({type:"@@REQUEST/FAILED",payload:{err:n}}),e(t.assign({},a,{type:u,error:n})),n})}}}}).call(t,n(4))},,,,,,,,function(e,t,n){var o;(function(i){o=function(){var e;return e=function(e){var t,n;return t=i.Deferred(),n="/api/file/external_link/"+e,i.get(n).done(function(e){return 0===e.code?t.resolve(e.data):t.reject("api error")}),t.promise()},{getShareStatusByGuid:e}}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(1))},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){403===e.code&&(window.location.href="/login")},i=function(e,t){var i=n.Deferred(),r=window.cow.currentListByGuid;if(e===window.cow.tempCurrentFile.guid&&void 0===window.cow.tempCurrentFile.authorized)window.cow.tempCurrentFile.authorized=window.cow.authorized,i.resolve(window.cow.tempCurrentFile);else if(r&&r[e]&&!t)i.resolve(r[e]);else{var a="/-/"+e;n.get(a).done(function(e){if(0===e.code){var t=e.data,n=t.file;n.authorized=t.authorized,i.resolve(n)}else i.reject(e)}).fail(function(e){o(e),i.reject(e)})}return i.promise()};t.default={getDocByGuid:i},e.exports=t.default}).call(t,n(1))},,function(e,t,n){var o,i;(function(r,a,s,l){var u=function(e,t){function n(){this.constructor=e}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},c={}.hasOwnProperty;o=[n(184),n(175),n(263),n(293),n(300),n(166),n(301),n(302),n(163),n(303),n(304),n(292),n(305),n(191),n(307),n(308),n(309),n(310),n(226),n(311),n(266)],i=function(e,t,n,o,i,c,d,p,f,h,m,v,y,g,b,w,C,E,T,P,k){var _;return new(_=function(b){function _(){return _.__super__.constructor.apply(this,arguments)}return u(_,b),_.prototype.init=function(){var e;return e=this,this.cow=window.cow,this.imageDownloadLink="/download/image?url=",this.padView=r("#pad-view"),this.gallery=r("#gallery-box"),this.galleryImg=r("#gallery-img"),this.galleryDetail=r("#gallery-details"),this.galleryList=r("#gallery-list"),this.view=this.padView,this.isMouseMove=!1,this.isMouseDown=!1,this.isDisableLink=!1,this.isPadReady=!1,this.imgArray=[],this.originPos={},this.initFontColorParams(),this.fontSizeList=["9","10","11","12","14","18","24","30","36"],this.bindEvents(),this.subscribe(),this.initSaveToShimo(),this.tooltipInfo={},this.initialized=!0,e},_.prototype.eventMap={"click .dropdown":"stopPropagation","click .export-btn":"displayExportSelection","click #close-export":"closeExportSelection","click .export-sprite":"exportDocument","blur #doc-title-input":"updateTitle","focus #doc-title-input":"focusTitle","click .print-btn":"print","keypress #doc-title-input":"docInputKeypress","click .operation-box .dropdown-btn":"toggleDropdown","click .delete-btn":"deleteDoc","click #doc-insert":"toggleInsertMenu","click #innerdocbody>div":"fadeUserline","mouseover #innerdocbody":"handleMouseOver","mouseout #innerdocbody":"handleMouseOut"},_.prototype.domEvents={focusTitle:function(e){if("无标题"===this.title.val())return this.title.val("")},stopPropagation:function(e){return e.preventDefault(),e.stopPropagation(),!1},toggleDropdown:function(e,n){var o,i,a,s;return e.stopPropagation(),o=r(n),i=o.parent(),a=i.find(".dropdown.active"),s="",i.attr("class")===this.shareBox.attr("class")?s=".share":i.attr("class")===this.operationBox.attr("class")&&(s=".operation"),a.length?(a.removeClass("active"),o.removeClass("active")):(t.clearDropdown(),i.find(s).addClass("active"),o.addClass("active"))},print:function(e){var t,n,o,i,s,l,u,c,d,p,f,h,m,v,y,g,b,w,C,T,P,k;for(e.stopPropagation(),n=function(e){var t;return t=e.contentDocument||e.contentWindow.document,t.documentElement.innerHTML=""},b=document.getElementById("printer"),g=function(e){return setTimeout(function(){return r(".operation-btn").removeClass("active"),r(".operation-dropdown").removeClass("active"),e.contentWindow.print(),n(b)},1e3)},t=r("#editorcontainer").clone(),k=t.find("#doc-title-input"),k.removeAttr("placeholder"),k.removeAttr("class"),k.attr("value",t.find("#doc-title-input").val()),w=t.find(".table-div"),u=0,p=w.length;u<p;u++)l=w[u],l=r(l),P=l.find(".shadow-table").html(),l.html(P);for(C=t.find("span.mention"),c=0,f=C.length;c<f;c++){l=C[c];try{v=a.filter(l.parentElement.classList,function(e){if(e.startsWith("lineguid-"))return e}),y=r("."+v[0]+" span.mention").css("font-family").match(/^'(.+)-(.+)'$/)[2],l.innerHTML="@"+y}catch(e){i=e,l.innerHtml="@"}}for(T=r("link"),d=0,h=T.length;d<h;d++)m=T[d],m.href.match(/\/index-(.+)\.css$/)&&(o=m.href);return s=a.template(E)({body:t.html(),css:o}),b.contentWindow.document.write(s),b.contentWindow.document.close(),g(b)},displayExportSelection:function(e){return e.stopPropagation(),r("span.sm-share-btn").removeClass("active"),r("div.dropdown.active").removeClass("active"),r("body,html").addClass("overflow-hidden"),r(".export-dialog").show()},closeExportSelection:function(e){return r(".export-box").hide()},updateTitle:function(e){return this.updateTitle(e)},docInputKeypress:function(e){var n,o,i;if(e.keyCode===t.keyCodes.ENTER)return r(e.target).blur(),i=window.getSelection(),o=document.createRange(),n=document.getElementById("innerdocbody"),o.setStart(n,0),o.setEnd(n,0),i.removeAllRanges(),i.addRange(o),e.stopPropagation(),e.preventDefault(),!1},deleteDoc:function(){var e,n,o,i,r,a,s,l,u,c;return c=this,r=window.cow.currentFile,n={headText:"确认操作",buttons:[]},i={buttonLabel:"确认删除",customClass:"btn btn-error",closeAfterClick:!0,onClick:function(){return k.updateFile(r,{is_delete:1}).then(function(e){return c._goback()}).fail(function(e){return P.isEnterpriseStandard(cow.currentUser)||P.isEnterpriseDingding(cow.currentUser)?t.alert({title:e.responseText||"删除失败",type:"error"}):t.alert({title:"删除失败",type:"error"})})}},u={buttonLabel:"退出共享",customClass:"btn btn-ok",closeAfterClick:!0,onClick:function(){return k.quiteShare(r).then(function(){return c._goback(),t.alert({title:"已从此"+r.name+"的共享中退出"})}).fail(function(){return t.alert({title:"操作失败",type:"error"})})}},e={buttonLabel:"取消",customClass:"btn",closeAfterClick:!0},s={buttonLabel:"确认",customClass:"btn btn-ok",closeAfterClick:!0},a=1===r.type?"文件夹":0===r.type?"文档":"表格",o=r.permissions.manageable,l=r.permissions.quitable,o&&l?(n.buttons=[i,u,e],n.bodyText="你可以删除"+a+"<br />也可以退出共享，但不删除"+a):o?(n.buttons=[i,e],n.bodyText="确认删除"+a+"吗？<br />删除后，所有协作者都无法访问此"+a):l?(n.buttons=[u,e],n.bodyText="你不是"+a+"的创建者<br />继续此操作会退出"+a+"共享<br />但不会删除"+a):(n.headText="没有权限",n.buttons=[s],n.bodyText="你没有权限删除或退出此"+a),v.show(n)},cancelShare:function(){var e;return e=window.cow.currentFile,v.show({okCallback:function(){return t.post("/api/share/delete",{guid:e.guid,user_id:window.cow.currentUser.id,file_type:"file"},function(){return t.alert({title:"已从此文档的共享中退出"}),window.location.href="/desktop"},function(){return t.alert({title:"操作失败",type:"error"})})},headText:"退出共享",bodyText:"确认要退出共享吗？<br />退出共享后你将无权限访问该文件"})},fadeUserline:function(e){var t;return e.offsetX<0?(t=r(e.target).data("author-name"))?r(e.target).removeClass("fadeUserline").siblings().each(function(e,n){return t!==r(n).data("author-name")?r(n).addClass("fadeUserline"):r(n).removeClass("fadeUserline")}):void 0:r("#innerdocbody > div").removeClass("fadeUserline")},handleMouseOver:function(e){var t,n,o,i,a,s;for(a=e.target,s=document.getElementById("innerdocbody");a&&!this._isAuthoredSpan(a)&&a!==s;)a=a.parentNode;if(this._isAuthoredSpan(a)&&this.tooltipInfo.target!==a&&"dotted"===this.getStyle(a,"border-bottom-style"))return i=this.getStyle(a,"border-bottom-color"),this.ensureTooltipExists(),t=this.getClassArray(a,function(e){return e.match("^author-")}),n=t[0].replace("author-",""),o=g.getUserName(n),this.tooltipInfo.target=a,this.tooltipInfo.tooltip.innerHTML=o,this.tooltipInfo.tooltip.style.display="block",this.tooltipInfo.tooltip.style.left=String(r(a).offset().left+r(a).outerWidth()/2-r("#tooltip").outerWidth()/2)+"px",this.tooltipInfo.tooltip.style.right="auto",this.tooltipInfo.tooltip.style.top=String(r(a).offset().top+r(a).outerHeight()+5)+"px",this.tooltipInfo.tooltip.style.background=i,this.tooltipInfo.tooltip.style.position="absolute"},handleMouseOut:function(e){if(this.tooltipInfo.tooltip&&(!e.relatedTarget||!this._isElementChildOf(e.relatedTarget,this.tooltipInfo.target)))return this.tooltipInfo.target=null,this.tooltipInfo.tooltip.style.display="none"},toggleInsertMenu:function(e){var n;return e.stopPropagation(),n=r("#doc-insert"),n.hasClass("active")||t.clearDropdown(),n.toggleClass("active")}},_.prototype._goback=function(){var e,t;return e=cow.currentFile,t="",t=window.cow.authorized?e.parent&&e.parent.guid?"/folder/"+e.parent.guid:"/desktop":"/login",s(t)},_.prototype.reset=function(){var e,i;return i=this,this.comment=o.getInstance(".sidebar-body"),this.title=this.view.find("#doc-title-input"),this.titleSpan=this.view.find("#doc-title-span"),this.shareBox=this.view.find(".list-share-box"),this.operationBox=r(".operation-box"),this.focusTarget=r("#focus-target"),this.padWrap=r("#pad-wrap"),this.docView=r("#doc-view"),this.editbar=r("#editbar"),this.sidebar=r("#sidebar"),this.editHeader=r("#edit-heading"),this.mobileMoreBtn=r("#mobile-more-btn"),this.crumbWrap=r(".crumb-wrap"),this.mobileShareLink=r(".share-link"),this.textCount=r("#text-count"),this.isMouseMove=!1,this.isMouseDown=!1,this.isDisableLink=!1,this.isPadReady=!1,this.imgArray=[],this.originPos={},this.initName(),this.initScroll(),this.initToolbar(),this.operationBox.children(".dropdown").html(a.template(m)(window.cow.currentFile)),this.checkPadReady().then(function(){return i.bindTextCount(),i.docView.on("scroll",function(){return 0===r(this).scrollTop()?r("body").removeClass("scroll"):r("body").addClass("scroll")})}),window.cow.authorized?t.isMobile()?(e=window.cow.currentFile.guid,n.getShareStatusByGuid(e).then(function(t){if(window.cow.currentFile.guid===e)return i.mobileShareLink.removeClass().addClass("share-link share-"+t.mode)}),this.mobileMoreBtn.removeClass("transparent")):(c.notify("doc:init","doc"),this.shareBox.removeClass("hide")):t.isMobile()?this.mobileMoreBtn.addClass("transparent"):this.shareBox.addClass("hide")},_.prototype.initToolbar=function(){return this.initCtrlOrCmd(),this.initFontList(),this.initDisplayBtn(),r(".toolbar-item").each(function(e,t){return new C(t)}),r(".menu-item").each(function(e,t){return new C(t,{placement:"left"})}),new C("#image-upload-button"),new C("#upload-attachment")},_.prototype.initFontList=function(){var e,t,n,o,i;return o=this,e=this.editHeader.find("#color-list"),e.empty(),n="",a.each(this.fontColorList,function(e,t){var i,r;return i=o.colorNameList[t],r="",t<9&&(r="margin-bottom: 5px;"),n+="<li class='font-color-list-item' style='background:"+e+"; "+r+"'><a href='javascript:void(0);' class='color-item'><span class='doc-color-name s-tooltip'>"+i+"</span></a></li>"}),e.append(n),t=this.editHeader.find("#size-list"),t.empty(),i="",a.each(this.fontSizeList,function(e,t){return i+='<li class="font-size-list-item"><a href="javascript:;" class="menu-item"><span data-value="'+(t+1)+'">'+e+"</span></a></li>"}),t.append(i)},_.prototype.initCtrlOrCmd=function(){var e,t,n,o;if(t=r(".toolbar-item,.menu-item"),e=r(".font-size-toolbar"),l.win)o="Ctrl";else if(o="Cmd",a.each(t,function(e){var t,n,o;if(n=r(e),t=n.data("content"),"string"==typeof t)return o=t.replace("Ctrl","Cmd"),n.data("content",o)}),"string"==typeof e.data("content"))return n=e.data("content").replace("↑/↓","⬆/⬇"),e.data("content",n)},_.prototype.initScroll=function(){var e,n,o,i,a;return a=this,/^#(comment-)?[a-zA-Z0-9]{16}$/.test(location.hash)?(this.comment.off("ready"),e=window.cow.currentFile.guid,n=location.hash.substring(1),o=location.href.indexOf("?"),i=location.href,o>-1?(i=i.replace(location.hash,""),i=i.replace("http://"+location.host,""),history.replaceState({guid:e},"",i)):history.replaceState({guid:e},"",location.pathname),/^comment-[a-zA-Z0-9]{16}$/.test(n)?(t.isMobile()&&!window.cow.iOS&&d("移动版暂不支持查看评论"),this.comment.isReady?this.showComment(n):this.comment.on("ready",function(){return a.showComment(n)})):/^[a-zA-Z0-9]{16}$/.test(n)?this.scrollToMention(n):void 0):void a.checkPadReady().then(function(){var e;return e=r(t.isMobile()?"#pad-wrap":"#doc-view"),e.scrollTop(0)})},_.prototype.initDisplayBtn=function(){return w.postAceInit()},_.prototype.scrollToMention=function(e){var n;return n=this,n.checkPadReady().then(function(){var o,i,a;if(o=n.docView.find("."+e),o.length>0)return i=o.offset().top-r(document).height()/2,a=r(t.isMobile()?"#pad-wrap":"#doc-view"),a.scrollTop(i)})},_.prototype.showComment=function(e){var t,n;if(n=this,t=this.comment.commentData[e],null!=t)return n.checkPadReady().then(function(){var t;return window.cow.iOS?(t=n.docView.find("."+e),i.repositionBuddle(t),i.showListComment(e)):setTimeout(function(){return c.notify("comment:show",e)},100)}),c.notify("comments",{comments:[t]})},_.prototype.checkPadReady=function(){var e,t,n;return n=this,e=r.Deferred(),n.isPadReady?e.resolve():(t=function(n){return r(window).off("pad_ready",t),e.resolve()},r(window).on("pad_ready",t)),e.promise()},_.prototype.initName=function(e){var n;if(e=window.cow.readonly?e||this.title.html():e||this.title.prop("value"))return n=t.cutName(e,32),this.titleSpan.html(a.escape(e)),window.cow.readonly?this.title.html(a.escape(e)).attr("title",e):this.title.val(e).attr("data-value",e),this.cow.updateTitle(e)},_.prototype.subscribe=function(){var t;return t=this,e.bind("File",function(e){var n;if("doc"===window.cow.pageType&&"update"===e.db_event&&(null!=e&&null!=(n=e.data)?n.id:void 0)===window.cow.currentFile.id){if(0===+e.data.is_delete)return window.cow.updateDocCurrentFile({name:e.data.name}),t.initName(e.data.name);if(+e.data.is_delete>=1&&+e.data.deleted_by!==window.cow.currentUser.id)return t.backParent()}})},_.prototype.initFontColorParams=function(){var e;return e=this,this.attrValuesMap=[13,14,15,16,2,3,17,4,5,18,6,19,20,21,22,23,24,25,26,27,1,28,29,30,31,32,33,34,35,7,8,36,9,10,38,39,40,12,41,42,43,44,45,37,11],this.fontColorList=["#ffffff","#0d0015","#fe2c23","#ff9900","#ffd900","#a3e043","#37d9f0","#4da8ee","#aa17d0","#f3f3f1","#949494","#fcdbd6","#fde9d0","#fff0cf","#d4e9d6","#def3f3","#cee0ef","#dfdbec","#dcdedd","#595856","#ee837d","#f8c387","#e6b322","#9abd9d","#83ccd2","#89b0ce","#9389b1","#c1c6ca","#41464b","#d51228","#cf770b","#8d634a","#557b5c","#01a3b0","#3776a6","#765c83","#adadad","#2b2b2b","#a91913","#884702","#563725","#00552e","#00767a","#194e77","#530e6f"],this.colorNameList=["白","漆黑","红","橙","黄","葱绿","湖蓝","天色","紫","白练","鼠","虹","薄卵","蒸栗","白绿","蓝白","天空","紫水晶","白鼠","墨","甚三红","雄黄","金子","薄青","白群","薄花","紫苑","灰青","石墨","红绯","红金","枯茶","绿青","浅葱","薄缥","紫霞","薄钝","黑","朱绯","褐","黑茶","深绿","苍蓝","琉璃","葡萄"],this.fontColorObj={},a.each(this.attrValuesMap,function(t,n){return e.fontColorObj[t]=e.fontColorList[n]})},_.prototype.bindEvents=function(){var e,n;return n=this,"gallery"===location.hash.slice(1)&&(location.hash=""),r(window).on("pad_ready",function(){return n.isPadReady=!0}).on("hashchange",function(){return n.initScroll(),n.swapStatus()}).on("keydown keypress",function(e){if(8===e.keyCode&&"BODY"===e.target.tagName)return e.preventDefault()}),this.padView.on("click","#sidebar .change",function(e){return!1}),this.padView.on("hover",".history-show .document-info-list",function(e){return r("#sidebar").css("z-index","1")}).on("mousemove",".history-show .document-info-list",function(e){return r("#sidebar").css("z-index","-1")}),this.padView.on("click","#innerdocbody img",function(e){var o,i,a,s,l,u,d,p,f,h,m;if(m=r("#tempImageResizeStyle").text(),o=r(e.target).parents("span[class*=img-]"),
a=o.length>0?o.attr("class"):"",l=a.match(/img-[0-9A-Za-z]{16}/),l=l&&l[0],r(".image-resize-bar").is(":visible")&&m.indexOf(l)>-1||window.cow.readonly||t.isMobile())return e.preventDefault(),e.stopPropagation(),f=r(e.target).attr("src"),window.cow.readonly?void window.open(f.replace(/!thumbnail$/,"")):(d=n.view.find("#innerdocbody img"),h=[],u=[],i=-1,d.each(function(t,n){var o,a,s;return o=r(n),s=o.attr("src"),h.push(s),a=o.closest("span").attr("class"),l=a.match(/img-([0-9|a-z|A-Z]{16})/),l=l&&l[1]?l[1]:"",o.is(e.target)&&(i=t),u.push(l)}),window.cow.iOS?(s=d.index(e.target),void c.notify("openImage",{imgs:h,guids:u,currentIndex:s})):(n.originPos.e=e,n.imgArray=d,p=e.target.src,n.setPosition(),n.isMobile()?T.previewImage({urls:h,current:p}):(c.notify("img:preview",i,h),c.notify("body:addOverflowHidden"))))}),r(document).on("keyup",function(e){if(n.gallery.hasClass("modal"))return e.keyCode===t.keyCodes.LEFT||e.keyCode===t.keyCodes.UP?n.changeActive("up"):(e.keyCode===t.keyCodes.RIGHT||e.keyCode===t.keyCodes.DOWN)&&n.changeActive("down")}),this.gallery.on("click",".thumb",function(e){if(!r(this).hasClass("active"))return n.showSpecifiedImg(r(this).index())}),this.gallery.on("click",function(e){if(e.stopPropagation(),!r(e.target).hasClass("return")&&!r(e.target).parents(".return").length)return n.isMobile()?"#gallery"===location.hash?history.back():location.hash="":n.changeGallery("hide")}),this.$view.on("click",".context-menu-list",function(e){var t;if(t=r(this).attr("data-guid").match(/table-(\w{16})/),t&&!r(".table-"+t[1]).length)return r(this).remove(),r("#context-menu-layer").remove()}),e=function(){return r(".export-dialog").hide(),r("body,html").removeClass("overflow-hidden")},r("#close-export").on("click",function(t){return e()}),r("html").on("click",function(t){if(t.target.parentElement&&"export-box"!==t.target.parentElement.className)return e()}),r(".export-sprite").on("click",function(n){var o,i,a;return a=n.target.classList[1],i={title:r("#doc-title-input").val(),type:a,guid:window.cow.currentFile.guid},window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),o=function(e,t){var n;return t=encodeURIComponent(decodeURIComponent(t)),n=document.createElement("a"),n.href=location.origin+"/download/export?filename="+e,n.href+="&downloadAs="+t,n.download=t,h.detectIE?window.location=n:h.simulate(n,"click")},e(),t.alert({title:"正在导出…"}),f.get(location.origin+"/export",i,function(e){return o(e.data.filename,r("#doc-title-input").val()+("."+a))},function(e){return t.alert({title:"下载出错，请重试。",type:"error"})})})},_.prototype.bindTextCount=function(){var e,t,n,o,i;return p.start(),t=parseInt(this.textCount.css("bottom")),i=null,n=this,r(document).on("selectionchange",function(a){var s,l,u,c,d,p;return u=r(a.currentTarget.activeElement),0!==u.closest("#editorcontainer").length&&(p=window.getSelection(),p.toString().length?(clearTimeout(i),s=n.docView.children(".outer-container").outerHeight(),l=n.docView.outerHeight(),c=r("#footer").outerHeight(),d=s+c,r(document).off("click.removeTextCount").on("click.removeTextCount",function(e){if(0===r(e.currentTarget.activeElement).closest("#editorcontainer").length)return o()}),n.docView.off("scroll.TextCount").on("scroll.TextCount",function(e){var o,i;return i=r(e.currentTarget).scrollTop(),l+i>=s?(o=c-(d-(l+i))+t,n.textCount.css("bottom",o)):n.textCount.css("bottom",t)}),n.textCount.css("bottom",t).removeClass("hide fadeout").children(".text-count-number").text(e(p.toString())),n.docView.trigger("scroll.TextCount"),i=setTimeout(function(){return n.textCount.addClass("fadeout"),setTimeout(function(){return o()},500)},3e3)):n.textCount.hasClass("hide")?void 0:o())}),o=function(){return n.textCount.addClass("hide"),r(document).off("click.removeTextCount"),n.docView.off("scroll.TextCount")},e=function(e){var t,n,o,i,r,s;return i=0,o=/^[A-Za-z0-9]+$/gi,n=/[A-Za-z0-9]+/gi,r=/↵|\s/,t=/[^a-zA-Z0-9\s\u4e00-\u9fa5]/g,e=e.replace(/\b[a-zA-Z]+'[a-zA-Z]+\b/g,"0").replace(/\b\d+\.\d+\b/g,"0").replace(t," "),s=a.compact(e.split(r)),s.forEach(function(e){var t,r,a,s;return s=e.trim(),r=s.match(o),Array.isArray(r)?i+=r.length:(t=s.match(n),Array.isArray(t)?(a=s.split(n).join(""),i+=a.length,i+=t.length):i+=s.length)}),i}},_.prototype.swapStatus=function(){var e;return e=location.hash?location.hash.slice(1):"","gallery"===e?this.changeGallery("show"):this.changeGallery("hide")},_.prototype.updateTitle=function(e){var n,o,i,a;if(i=this,a=r(e.target).prop("value"),a||(a=r(e.target).val("无标题").val()),a!==r(e.target).attr("data-value"))return n={name:a},o=this.cow.currentDocGuid||this.cow.currentFile.guid,t.post("/api/file/"+o,n).fail(t.error),c.notify("file:updateTitle",a)},_.prototype.renderShare=function(){if("doc"===window.cow.pageType)return this.share?this.share.reload():this.share=new Share(" .list-share-box .dropdown.share",{teamworkerEle:" .list-share-box .dropdown.teamworker"})},_.prototype.reloadShare=function(){if("doc"===window.cow.pageType&&this.share)return this.share.reload()},_.prototype.initSaveToShimo=function(){var e;return e=this,this.checkPadReady().then(function(){if(window.cow.currentUser.id<0||window.cow.readonly)return e.saveDoc=new y("body")})},_.prototype.changeActive=function(e){var t;if(t=this.galleryList.find(".thumb.active").index(),"up"===e){if(0===t)return;t-=1}else{if(t===this.imgArray.length-1)return;t+=1}return this.showSpecifiedImg(t)},_.prototype.showSpecifiedImg=function(e){var t;return this.galleryList.find(".thumb.active").removeClass("active"),t=this.galleryList.find(".thumb:nth-child("+(e+1)+")"),t.addClass("active"),this.generateZoomImg(this.imgArray[e].src)},_.prototype.scrollToActiveThumb=function(){var e,t,n;if(e=this.galleryList.find(".thumb.active"),e.length){if(n=r(window).height(),t=this.galleryList.scrollTop(),e.offset().top<70)t=t+e.offset().top-70;else{if(!(e.offset().top>n-120))return;t=t+e.offset().top-n+120}return this.galleryList.scrollTop(t)}},_.prototype.showActiveInfo=function(){var e,t,n,o;return o=this.imgArray.length,e=this.galleryList.find(".thumb.active"),e.length?(n=e.index()+1,t=n+"/"+o):t="",this.galleryDetail.find("number").html(t)},_.prototype.setPosition=function(){var e,t,n,o,i,a,s;return o=this,n=o.originPos,this.imgArray.length>1&&this.gallery.hasClass("modal")?(e=o.galleryList.find(".thumb.active"),i=this.imgArray[e.index()]):null!=n.e&&(i=n.e.target),n=i&&r(i).parents("#innerdocbody").length?{off:r(i).offset(),width:r(i).width(),height:r(i).height()}:{off:!1,width:0,height:0},s=r(window).width(),a=r(window).height(),this.isMobile()?(t=a/s>=n.height/n.width?(a-n.height/n.width*s)/2:0,this.galleryImg.css({width:"100%",height:"auto","margin-top":t})):this.galleryImg.css({width:n.width,height:n.height,top:n.off?2*n.off.top-(a-n.height):0,left:n.off?2*n.off.left-(s-n.width):0})},_.prototype.showGalleryList=function(e,t){var n;return n=this,this.galleryList.show().html(""),a.each(e,function(e){var o,i,r;return o=e.src===t?" active":"",i=e.src,r='<p class="gallery-list-item thumb'+o+'"><img class="gallery-list-img" src="'+i+'" style=""></p>',n.galleryList.append(r)}),this.galleryDetail.css({right:this.galleryList.width()})},_.prototype.generateImgList=function(e){if(this.imgArray.length>1&&!this.isMobile())return this.showGalleryList(this.imgArray,e)},_.prototype.generateZoomImg=function(e){var t,n,o,i,a;return o=new Image,o.src=e,o&&o.width?i={width:o.width,height:o.height}:(t=this.galleryList.find(".thumb.active"),a=this.imgArray[t.index()],i={width:r(a).width(),height:r(a).height()}),n={width:r(window).width()-40-this.galleryList.width(),height:r(window).height()-40-this.galleryDetail.height()},i.width>n.width&&(i={width:n.width,height:i.height*n.width/i.width}),i.height>n.height&&(i={width:i.width*n.height/i.height,height:n.height}),i.left="block"===this.galleryList.css("display")?-this.galleryList.width():0,this.galleryDetail.find(".origin-link").attr("href",e.replace(/!thumbnail$/,"")),this.galleryImg.find("img").attr("src",e),this.galleryDetail.find(".origin-link")[0].hostname===window.cow.domain&&(e=e.replace("_large","")),this.galleryDetail.find(".link-download").attr("href",this.imageDownloadLink+e),this.galleryDetail.find(".link-download").show(),this.isMobile()||this.galleryImg.css({width:i.width,height:i.height,top:"-"+this.galleryDetail.height()+"px",left:i.left}),this.scrollToActiveThumb(),this.showActiveInfo()},_.prototype.resetGallery=function(){return this.imgList=[],this.setPosition(),this.gallery.css("background-color","transparent")},_.prototype.refreshGallery=function(){return this.gallery.attr("style","").removeClass("modal").children().attr("style","")},_.prototype.changeGallery=function(e){var t;return t=this,"show"!==e?(c.notify("body:removeOverflowHidden"),this.resetGallery(),this.isMobile()?(this.refreshGallery(),this.padWrap.removeClass("hide"),window.cow.padScroller&&window.cow.padScroller.refresh()):setTimeout(function(){return t.refreshGallery()},200)):(c.notify("body:addOverflowHidden"),this.gallery.addClass("modal"),this.isMobile()?(this.padWrap.addClass("hide"),r("#innerdocbody").blur()):void 0)},_.prototype.isMobile=function(){return window.cow.isMobile},_.prototype.backParent=function(){var e,t;return s.len>0?s.back():(e=window.cow.currentFile,t=window.cow.authorized?e.parent&&e.parent.guid?"/folder/"+e.parent.guid:"/desktop":"/login",s(t))},_.prototype.ensureTooltipExists=function(){if(!this.tooltipInfo.tooltip)return this.tooltipInfo.tooltip=document.createElement("DIV"),this.tooltipInfo.tooltip.id="tooltip",r("body").append(this.tooltipInfo.tooltip)},_.prototype._isAuthoredSpan=function(e){return!(!e||"SPAN"!==e.nodeName)&&this.getClassArray(e,function(e){return e.match("^author-")}).length},_.prototype.getClassArray=function(e,t){var n;return e.className?(n=[],e.className.replace(/\S+/g,function(e){if(!t||t(e))return n.push(e)}),n):[]},_.prototype.getStyle=function(e,t){var n;return n=function(e){return e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})},e.currentStyle?e.currentStyle[n(t)]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):e.style[n(t)]},_.prototype._isElementChildOf=function(e,t){for(;e&&e!==t;)e=e.parentNode;return e===t},_}(t.DomModule))("#pad-view")}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1),n(4),n(176),n(291))},,,function(e,t,n){var o,i;(function(r,a){var s=function(e,t){function n(){this.constructor=e}for(var o in t)l.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=[n(184),n(175),n(294),n(298),n(299),n(183),n(292),n(191)],i=function(e,t,n,o,i,l,u,c){var d,p;return d=function(d){function p(){return p.__super__.constructor.apply(this,arguments)}return s(p,d),p.prototype.fetchData=!1,p.prototype.opened=!0,p.prototype.init=function(){var e;if(!window.cow.readonly)return e=this,this.container=r(".container"),this.infoList=this.$view.find(".document-info-list"),this.tempList=this.$view.find(".temp-list"),this.list=this.$view.find(".comment-list"),this.noTarget=this.tempList.find(".no-target"),this.input=this.$view.find(".comment-input"),this.header=r("#header"),this.editHeading=r("#edit-heading"),this.docView=r("#doc-view"),this.topCut=98,this.btn=r("#comment-btn"),this.queryURL="/api/comment/",this.createURL="/api/comment/create",this.imgRex="ImAgEuRl/?/iMaGeUrL",this.mentionPop=new n("#comment-mention-pop"),this.commentData={},this.commentCache={},this.editCache={},this.initPush()},p.prototype.commentInit=function(){this.isReady=!1,this.commentData={},this.commentCache={},this.inputHeight=0,this.initComments(),e.getConnectSocket().then(function(){return self.fileGuid=window.cow.currentFile.guid})},p.prototype.domEvents={selectionChange:function(){return this.checkInputEmpty()},selectionPaste:function(e){var t,n;return n=r(e.target),t=n.parents(".document-info-li").attr("data-s-guid"),this.resizeCommentList(t,!0)},selectionKeyUp:function(e){var t,n;return n=r(e.target),t=n.parents(".document-info-li").attr("data-s-guid"),this.setEditCache(t,n.html().trim()),this.resizeCommentList(t)},selectionKeyPress:function(e){var n,o;if(o=r(e.target),n=o.parents(".document-info-li").attr("data-s-guid"),e.keyCode===t.keyCodes.ENTER)return!!o.text().trim().length&&(this.createSelectionComments(o),e.preventDefault())},selectionFocus:function(e){return this.inputHeight=r(e.target).height(),this.$view.find(".document-info-li.active").removeClass("active"),r(e.target).parents(".document-info-li").addClass("active"),this.checkInputEmpty()},deleteComment:function(e,t){var n;return n=this,u.show({okCallback:function(){return n.sureDelete(t)},headText:"删除评论",bodyText:"确认要永久删除该评论吗？"})},resendComment:function(e){var t,n,o;return t=r(e.target).parents(".doc-comment-item"),n=t.attr("data-comment-guid"),o=this.commentCache[n],t.addClass("sending").removeClass("sending-error"),this.sendCreatePost(o,t)}},p.prototype.eventMap={"propertychange .selection-comment-input":"selectionChange","input .selection-comment-input":"selectionChange","paste .selection-comment-input":"selectionPaste","keyup .selection-comment-input":"selectionKeyUp","keypress .selection-comment-input":"selectionKeyPress","focus .selection-comment-input":"selectionFocus","click .delete-comment":"deleteComment","click .resend-comment":"resendComment"},p.prototype.initComments=function(){return this.queryComments()},p.prototype.show=function(){this.container.addClass("commentable"),this.queryComments("show")},p.prototype.hide=function(){this.container.removeClass("commentable")},p.prototype.setReady=function(){if(this.isReady=!0,!window.cow.isMobile||window.cow.iOS)return this.trigger("ready")},p.prototype.sureDelete=function(e){var t,n,o,i;return i=this,t=r(e),n=t.parents(".doc-comment-item"),o=n.attr("data-comment-id"),n.addClass("deleting"),r.post("/api/comment/delete/"+o,{},function(e){if(e.code)return n.removeClass("deleting"),console.log("remove comment error"),console.log(e)})},p.prototype.checkInputEmpty=function(){var e,t,n;return n=r(".sidebar-body"),e=n.find(".selection-comment-input"),t=n.find(".input-placeholder"),e.text().length?t.hide():t.show()},p.prototype.setEditCache=function(e,t){return this.editCache[e]=t},p.prototype.queryComments=function(e){var n,o;if(o=this,o.fileGuid=window.cow.currentFile.guid,n=window.cow.currentFile.permissions||{},n.commentable)return this.ajax.get(this.queryURL+o.fileGuid,function(n){var i,r,s,u,d;if(0===n.code){if(u=!window.cow.iOS&&o.infoList[0].scrollTop+o.infoList.height()===o.infoList[0].scrollHeight,e)for(o.list.empty(),d=n.data,r=0,s=d.length;r<s;r++)i=d[r],o.format(i);a.each(n.data,function(e,n){var i;return i=a.pick(c.get(e.user_id),"avatar","email","name"),a.assign(e,i),e.online=l.isOnline(e.user_id),e.formattedTime=t.DateTime.format(e.created_at),o.handlerSelectionComment.call(o,e)}),u&&o.infoList.scrollTop(o.infoList[0].scrollHeight)}return o.setReady()})},p.prototype.changeInputBoxShow=function(e){var t;return t=r(e.target).parents(".comment-input-box"),t.hasClass("active")?t.removeClass("active"):t.addClass("active").find("input").focus()},p.prototype.createSelectionComments=function(e){var t,n,o,i;return t=e.html(),e.html("").focus(),o=e.parents(".document-info-li"),n=o.attr("data-s-guid"),i=a.unescape(o.find(".selection-comment-title").attr("data-title")),this.createComments(t,n,i)},p.prototype.createSelectionListArea=function(e,t,n){var o,s;if(s=this,o=t||r(e.target).data("select-array"),o.length>1?(s.tempList.addClass("has-many").removeClass("only"),n="has-many"):s.tempList.addClass("only").removeClass("has-many"),s.resetTempList(),a.each(o,function(e,t){var o,r,u,c;return o=s.commentData[e],c=o?o[0].selection_title:"",s.createSelectionCommentsArea(e,c,n),r=s.tempList.find(".document-info-li[data-s-guid="+e+"]"),u=r.find(".selection-comment-list"),o.length&&r.addClass("has-comment"),a.each(o,function(e,t){return e.online=l.isOnline(e.user_id),e.is_current=+e.user_id===+window.cow.currentUser.id,u.append(a.template(i)(e)),s.addSelectionTitle(r,"",e)}),s.changeSelectionCommentNumber(r)}),setTimeout(function(){return s.tempList.find(".selection-comment-input").off().focus(),s.mentionPop.mentionable(s.tempList.find(".selection-comment-input"))},200),o[0])return s.setCommentBoxPosition(o[0],!0,n)},p.prototype.createSelectionCommentsArea=function(e,n,i){var r,s,l,u,c;return c=n&&n.replace(/\s/g,"").length?n:t.cutLength(this.container.find("."+e).text(),42),u={title:c,type:"s-comment",list_type:i,s_guid:e},r=a.template(o)(u),"has-many"===i?(l=this.tempList.find(".scroll-list"),s=l.length?l:this.tempList.append('<div class="scroll-list"></div>').find(".scroll-list")):(this.tempList.find(".scroll-list").remove(),s=this.tempList),s.append(r),this.mentionPop.mentionable(this.tempList.find(".selection-comment-input")),this.tempList.find(".selection-comment-input").html(this.editCache[e]),this.tempList.find(".document-info-li[data-s-guid="+e+"]")},p.prototype.fixImgSelection=function(e,t){var n,o;if(n=e.find(".selection-comment-title"),o=r("."+t).find("img")[0]||n.find("img")[0],r(o).attr("src"))return n.html("图片评论").attr("data-title",this.imgRex+r(o).attr("src"))},p.prototype.fixAttachmentSelection=function(e,t){var n,o;if(o=e.find(".selection-comment-title"),n=r("."+t).find(".attachment-wrapper"),n.length>0)return o.html("附件评论")},p.prototype.resetTempList=function(){return this.tempList.find(".selection-comment-input").off(),this.tempList.find("li").remove()},p.prototype.changeDeleteTag=function(e){return"remove"===e?this.noTarget.show():this.noTarget.hide()},p.prototype.scrollToBottom=function(){return this.infoList.scrollTop(this.infoList[0].scrollHeight)},p.prototype.setCommentBoxPosition=function(e,t,n){var o,i,a,s,l,u,c,d,p,f,h,m,v,y,g,b;if(e)return this.fixImgSelection(this.tempList,e),this.fixAttachmentSelection(this.tempList,e),o=this.container.find("."+e),i=this.tempList.find(".trangle-box"),h={},p=0,s=0,o.length?(l=o.attr("class"),d=this.getCommentFont(l),p=96*(this.fontList[d]-1.2)/72,s=20,h.top=o.offset().top,i.show()):(h.top=114,i.hide()),y=this.topCut,m=0,b=r(window).height(),this.changeDeleteTag(n),this.tempList.hasClass("has-many")&&this.tempList.find(".document-info-li").length>1?u=this.tempList.find(".scroll-list"):(o.length&&(h.top-=this.scrollSelection(h.top)),u=this.tempList.find(".selection-comment-list"),f=69+this.tempList.find(".comment-input-box").outerHeight(),m=f,"remove"===n&&(m=f+this.noTarget.height())),c=Math.min(Math.max(b-300,400),b-m-y),u.css("max-height",c),a=this.tempList.outerHeight(),v=Math.max(Math.min(h.top-y-a/2,b-y-a-5),1),!this.contentNeedScroll(u)&&!t||this.tempList.hasClass("has-many")||u.scrollTop(u[0].scrollHeight),g=Math.max(h.top+p-s/2-y-v,0),this.tempList.css({top:v}),i.css({top:g})},p.prototype.scrollSelection=function(e){var t,n,o;return n=this.docView.scrollTop(),o=r(document).height(),t=e<120?e-120:e>o-100?e-o+100:0,this.docView.scrollTop(n+t),t},p.prototype.contentNeedScroll=function(e){var t;return t=e?e:this.tempList.find(".selection-comment-list"),!!t.length&&t[0].scrollTop+t.height()===t[0].scrollHeight},p.prototype.sendCreatePost=function(e,t){var n;return n=this,n.fileGuid=window.cow.currentFile.guid,r.ajax({type:"post",url:this.createURL+"?target_type=file&guid="+n.fileGuid,data:e,dataType:"json",success:function(e){return 0===e.code?n.input.val(""):t.removeClass("sending").addClass("sending-error")},error:function(){return t.removeClass("sending").addClass("sending-error")}})},p.prototype.createComments=function(e,n,o){var s,l,u,d,p;if(p=this,d={comment_guid:t.genGuid(),content:e,selection_guid:n,selection_title:o},u=window.cow.currentUser,l={online:!0,created_at:new Date,formattedTime:t.DateTime.format(new Date),name:c.getUserName(u.id),sending:"sending",user_id:u.id,id:"",avatar:u.avatar,is_current:!0,type:n?"s-comment":"w-comment"},l=r.extend(l,d),l.selection_title=a.escape(l.selection_title),s=r(a.template(i)(l)),this.handlerSelectionComment(l,!0,s,"add"),this.infoList.scrollTop(this.infoList[0].scrollHeight),this.sendCreatePost(d,s),this.commentCache[d.comment_guid]=d,n)return this.editCache[n]=""},p.prototype.changeSelectionCommentNumber=function(e,t){var n,o,i;if(t||(t=e),o=e.attr("data-s-guid"),this.commentData[o]&&(n=this.commentData[o].length,i=t.find(".show-comments"),n<1?e.removeClass("has-comment"):e.addClass("has-comment"),i.length))return t.find(".selection-comment-list").attr("data-number",n).parents(".document-info-li").addClass("has-comment"),i.html("查看所有"+n+"条")},p.prototype.handlerSelectionComment=function(e,t,n,o){var r,s,l,u,c,d,p,f,h;return p=this,e.sending="",s=e.comment_guid,c=e.selection_guid,f=p.$view.find(".sending."+s),f.length?(c&&(e.type="s-comment",p.commentData[c]&&p.commentData[c].length?p.commentData[c].push(e):(p.commentData[c]=[],p.commentData[c].push(e)),r=p.$view.find(".document-info-li[data-s-guid="+c+"]"),p.changeSelectionCommentNumber(r)),f.removeClass("sending").attr("data-comment-id",e.id)):(e.is_current=+e.user_id===+window.cow.currentUser.id,c&&(e.type="s-comment",p.commentData[c]&&p.commentData[c].length?o||p.commentData[c].push(e):(p.commentData[c]=[],o||p.commentData[c].push(e)),l=p.$view.attr("comment-mode"),d="document-comment"!==l&&this.checkSelectionOpen(e.selection_guid))?(this.tempList.find(".selection-comment-input").off(),h=p.tempList.find(".document-info-li[data-s-guid="+c+"]"),h.length||(h=p.createSelectionCommentsArea(c,e.selection_title,"temp")),p.addSelectionTitle(h,l,e),(p.contentNeedScroll()||t)&&(u=!0),h.find(".selection-comment-list").append(n||a.template(i)(e)),this.mentionPop.mentionable(this.tempList.find(".selection-comment-input")),p.setCommentBoxPosition(e.selection_guid,u),p.changeSelectionCommentNumber(h)):void 0)},p.prototype.checkSelectionOpen=function(e){var t,n;return n=!1,t=this.tempList.find(".document-info-li"),a.each(t,function(t,o){if(r(t).attr("data-s-guid")===e)return n=!0}),n},p.prototype.addSelectionTitle=function(e,n,o){var i,a,s;if(i=e.find(".selection-header"),s=i.find(".selection-comment-title"),a=i.find(".author").html(),!a)return e.find(".comment-avatar.first img").attr("src",o.avatar),i.find(".author").text(o.name),i.find("small").attr("data-time",o.created_at).text(o.formattedTime),s.attr("data-title",o.selection_title).html(o.selection_title),o.selection_title.indexOf(this.imgRex)<0?s.text('"'+t.cutLength(r(s[0]).text(),42)+'"'):s.html("").append('<img src="'+o.selection_title.substr(19,o.selection_title.length)+'" />')},p.prototype.changeFromManyToOnly=function(){var e,t,n,o;if(o=this.tempList.find(".scroll-list"),n=o.children(),1===n.length)return e=this.tempList.find(".selection-comment-list"),o.remove(),t='<div class="comment-input-box"><input class="selection-comment-input" placeholder="回复"></div>',this.tempList.removeClass("has-many").addClass("only").append(n).find(".document-info-li").append(e).append(t).find(".selection-comment-content").remove()},p.prototype.handlerCommentDelete=function(e){var t,n,o,i;if(i=this,n=r(".doc-comment-item[data-comment-id="+e.data.id+"]"),t=n.parents(".document-info-li"),o=e.data.selection_guid)return this.tempList.hasClass("has-many")&&0===n.siblings().length?(t.remove(),this.changeFromManyToOnly()):n.remove(),this.removeDelete(o,e)},p.prototype.removeDelete=function(e,t){var n,o,i;return o=this.commentData[e],n=r('.document-info-li[data-s-guid="'+e+'"]'),i=0,a.each(o,function(e,n){if(e.id===t.data.id)return i=n}),o.splice(i,1),this.changeSelectionCommentNumber(n),this.setCommentBoxPosition(e)},p.prototype.updateComments=function(){},p.prototype.initPush=function(){var n;if(t.isMobile())return n=this,e.bind("Comment",function(e){var o,i;if("create"===e.db_event){if(i=e.data,l.format(e.data),e.data.online=l.isOnline(e.data.user_id),e.data.formattedTime=t.DateTime.format(e.data.created_at),e.data.name=c.getUserName(e.data.user_id),n.handlerSelectionComment.call(n,i),window.cow.iOS||(o=n.infoList[0].scrollTop+n.infoList.height()===n.infoList[0].scrollHeight,o&&n.infoList.scrollTop(n.infoList[0].scrollHeight)),"duang"===i.content)return n.duang()}else if("update"===e.db_event)return n.handlerCommentDelete(e)})},p.prototype.duang=function(){var e;return e=r("#pad-view"),e.addClass("duang"),setTimeout(function(){return e.removeClass("duang")},1e3)},p.prototype.resizeCommentList=function(e,t){var n;return n=this.tempList.find(".selection-comment-input").height(),(n!==this.inputHeight||t)&&this.setCommentBoxPosition(e),this.inputHeight=n},p.prototype.resizeContainer=function(){var e,t;e=r("body").width(),t=this.container.width(),this.container.css("left",(e-t)/2)},p}(t.DomModule),p=null,{getInstance:function(e,t){return p||(p=new d(e,t)),p}}}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1),n(4))},function(e,t,n){var o,i;(function(r,a){var s=function(e,t){function n(){this.constructor=e}for(var o in t)l.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=[n(175),n(295),n(296),n(183),n(297)],i=function(e,t,n,o,i){var l;return l=function(l){function u(){return u.__super__.constructor.apply(this,arguments)}return s(u,l),u.prototype.init=function(){var e;return e=this,this.$view.html(r.template(t)({})),this.inMention=!1,this.maxSearch=6,this.halfMaxSearch=.5*this.maxSearch,this.$resultListView=this.$view.children(".result-list"),this.$placeholder=this.$view.find(".placeholder"),this.docResultList=[],this.userResultList=[],this.allResultList=[],this.placeholderText="在此@同伴或者文档",this.$placeholder.text(this.placeholderText),this.$arrowUp=this.$view.find(">.arrow-up"),this.$arrowDown=this.$view.find(">.arrow-down"),this.docGuid=window.cow.currentFile.guid,this.start=r.debounce(function(e){return function(t){return e.search(t)}}(this),500),a("body").append('<div id="mention-pop-shadow" contenteditable="true"></div'),this.$shadow=a("#mention-pop-shadow"),a(document).on("mousedown",function(t){0===e.$view.has(a(t.target)).length&&e.cancel()})},u.prototype.currentTarget=void 0,u.prototype.currentKeyword="",u.prototype.currentNode=null,u.prototype.currentCursorPosition=0,u.prototype.timer=void 0,u.prototype.eventMap={"mouseenter .mention-result":"mouseEnterResult","click .mention-result":"clickResult","click .placeholder":"stopPropagation","click .down":"stopPropagation"},u.prototype.domEvents={mouseEnterResult:function(e){var t;t=a(e.target),t.hasClass("active")||(this.$resultListView.find("li").removeClass("active"),t.addClass("active"))},clickResult:function(e){return this.create(),e.stopPropagation()},stopPropagation:function(e){return e.stopPropagation()}},u.prototype.mentionList={doc:{},user:{}},u.prototype.mentionable=function(t){var n;return n=this,t instanceof a||(t=a(t)),t.off("click"),t.off("keyup"),t.on("click keyup",function(o){var i,r,a,s,l,u,c,d;(l=o.keyCode)!==e.keyCodes.UP&&l!==e.keyCodes.DOWN&&l!==e.keyCodes.ENTER&&(n.currentTarget=t,s=window.getSelection().getRangeAt(0),d=s.endOffset,r=s.endContainer,n.currentCursorPosition=s.endOffset,n.currentNodeIndex=n.getCurrentNodeIndex(r),a=r.parentNode,"DIV"===r.parentNode.nodeName&&"true"===a.getAttribute("contenteditable")&&"#text"===r.nodeName&&(c=r.nodeValue.slice(0,d).split(/\s+/),i=c[c.length-1],i.indexOf("@")>-1?(u=i.slice(i.lastIndexOf("@")+1),n.start(u)):n.cancel({keyword:u})))}),t.on("keydown",function(t){var o;n.inMention&&((o=t.keyCode)!==e.keyCodes.UP&&o!==e.keyCodes.DOWN||(n.select(t.keyCode===e.keyCodes.UP?"up":"down"),t.preventDefault()),t.keyCode===e.keyCodes.ENTER&&(n.create(),t.preventDefault()))}),t.on("paste",function(e){var n,o;return n=function(e){return e.replace(/(<[\w\W]*?)(style)([\w\W]*?>)/g,function(e,t,n,o){return t+"style_replace"+o})},o=function(e){return a.trim(e.replace(/<\/?((?!a)(\w+))\s*[\w\W]*?>/g,""))},setTimeout(function(){var e;return e=t.html(),e=n(e),e=o(o(e)),t.html(e)},0)})},u.prototype.cancel=function(){if(this.inMention)return this.hide(),this.inMention=!1},u.prototype.show=function(){return this.position(this.currentTarget),this.$view.addClass("active"),this.inMention=!0},u.prototype.hide=function(){return this.$view.removeClass("active"),this.$resultListView.empty(),this.$placeholder.html(this.placeholderText).show(),this.inMention=!1},u.prototype.select=function(e){var t,n,o;n=this.$resultListView.find("li"),"init"===e?n.removeClass("active").first().addClass("active"):(t=this.$resultListView.find("li.active"),t.length>0&&(o=t.attr("data-index"),"down"===e&&o<n.length-1&&t.removeClass("active").next("li").addClass("active"),"up"===e&&o>0&&t.removeClass("active").prev("li").addClass("active")))},u.prototype.create=function(){var e,t,n,i,r,s,l,u,c,d,p,f,h,m,v,y,g;if(t=this.$resultListView.find("li.active"),0!==t.length)return g={type:t.attr("data-type"),name:t.attr("data-name")},"doc"===g.type&&(g.guid=t.attr("data-guid")),"user"===g.type&&(g.id=t.attr("data-id")),this.currentTarget.focus(),f=this.currentTarget[0].childNodes[this.currentNodeIndex],this.moveCursor(f,this.currentCursorPosition),h=f.parentNode,p=f.nextSibling,i=f.nodeValue,n=i.lastIndexOf("@"),s=this.currentCursorPosition,m=i.slice(0,n),v=i.slice(n,s),y=i.slice(s),u=document.createTextNode(m+" "),c=document.createTextNode(" "+y),l=document.createElement("a"),e=a(l),"doc"===g.type&&(e.attr("data-file-id",g.id),e.attr("href","/"+g.guid)),"user"===g.type&&(e.attr("href","javascript:void(0);"),d=o.isOnline(g.id),d&&e.addClass("online"),e.attr("data-user-id",g.id),e.attr("contenteditable","false")),e.addClass("mention-"+g.type),l.innerText=l.textContent=g.name,h.insertBefore(u,p),h.insertBefore(l,p),h.insertBefore(c,p),h.removeChild(f),r=c,this.moveCursor(r,1),null===p&&h.insertBefore(document.createElement("br"),p),setTimeout(function(e){return function(){return e.cancel()}}(this),100)},u.prototype.position=function(e){var t,n,o,i,r,s,l,u,c,d,p,f,h,m,v,y,g,b,w,C,E;return h=this,this.$shadow.html(this.currentTarget.html()),["fontSize","width","height","lineHeight","padding","border","outline"].forEach(function(e){return h.$shadow.css(e,h.currentTarget.css(e))}),m=this.$shadow[0],c=m.childNodes[this.currentNodeIndex],u=c.nextSibling,g=c.nodeValue,d=c.parentNode,i=this.currentCursorPosition,n=g.slice(0,i).lastIndexOf("@"),p=g.slice(0,n),f=g.slice(n),r=document.createTextNode(p),s=document.createTextNode(f),y=document.createElement("span"),y.innerText="1",d.insertBefore(r,u),d.insertBefore(y,u),d.insertBefore(s,u),d.removeChild(c),o=a(y).offset(),v=a(".doc-comment-input").offset(),o.top+=v.top+5e3,o.left+=v.left+5e3,v.left-=10,l=+/\d+/.exec(this.$view.css("maxHeight"))[0],b=this.$view.height(),E=this.$view.width(),w=v.left,t=o.left-v.left,t+20>E&&(w+=t-E+20,t-=t-E+20),a(window).height()-v.top<l?(C=o.top-b-25,this.$arrowUp.hide(),this.$arrowDown.show().find("span").css("left",t)):(C=o.top+25,this.$arrowDown.hide(),this.$arrowUp.show().find("span").css("left",t)),this.$view.css({left:w,top:C-50})},u.prototype.search=function(e){if(!(window.cow.currentUser.id<0))return this.mentionStr=e,e?(this.docResultList=[],this.userResultList=[],this.render("result"),function(e){return function(t){return i.searchAll(t,"file,recent_contact,team_member",0,6).then(function(n){var o,i,a;if(t===e.mentionStr)return e.docResultList=r.get(n,"file.results",[]).map(function(e){return e.source}),o=r.get(n,"recent_contact.results",[]),i=r.get(n,"team_member.results",[]),e.userResultList=r.unionBy(o,i,"id"),a=e.userResultList.splice(e.halfMaxSearch),e.docResultList.length>e.halfMaxSearch?e.docResultList.splice(e.maxSearch-e.userResultList.length):e.docResultList.length<e.halfMaxSearch&&a.length>0&&(a.splice(e.halfMaxSearch-docResultList.length),e.userResultList=e.userResultList.concat(a)),e.render("result"),e.select("init")})}}(this)(e)):(this.userResultList=[],this.docResultList=[],this.render("placeholder"))},u.prototype.render=function(e){if(!(window.cow.currentUser.id<0))return this.$resultListView.empty(),
"placeholder"===e&&(this.$placeholder.show(),this.$resultListView.hide(),this.show()),"result"===e?(this.$placeholder.hide(),this.userResultList.length||this.docResultList.length?(this.$resultListView.append(r.template(n)({list:this.userResultList})).append(r.template(n)({list:this.docResultList})).show(),this.$resultListView.find("li").each(function(e){return a(this).attr("data-index",e)}),this.show()):this.hide()):void 0},u.prototype.moveCursor=function(e,t,n){var o,i;n=n||this.currentTarget[0],o=document.createRange(),o.selectNodeContents(n),o.setStart(e,t),o.collapse(!0),i=window.getSelection(),i.removeAllRanges(),i.addRange(o)},u.prototype.getCurrentNodeIndex=function(e,t){var n,o,i,r,a,s;for(s=-1,t=t||this.currentTarget[0],a=t.childNodes,i=o=0,r=a.length;o<r;i=++o)n=a[i],n===e&&(s=i);return s},u}(e.DomModule)}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(4),n(1))},function(e,t){e.exports='<div class="arrow-up">\n  <span class="top"></span>\n  <span class="down"></span>\n</div>\n<div class="arrow-down">\n  <span class="top"></span>\n  <span class="down"></span>\n</div>\n<ul>\n  <li class="placeholder">@朋友或者文档</li>\n</ul>\n<ul class="result-list">\n</ul>'},function(e,t){e.exports='<% _.each(list, function (data, index) { %>\n\t\t<li class="mention-result" data-guid="<%= data.guid %>" data-name="<%= data.name %>" data-id="<%= data.id %>" data-type="<% data.guid ? print(\'doc\') : print(\'user\') %>">\n\t\t\t<% if (!data.guid){ %>\n\t\t\t\t<img class="avatar" src="<%= data.avatar %>"><%= data.name %>\n\t\t\t<% } else { %>\n        <% if (data.type === 1) {%>\n            <span class="file-sprite file-folder-icon mention-icon"></span>\n        <% } else if (data.type === 0) { %>\n            <span class="file-sprite file-doc-icon mention-icon"></span>\n        <% } else if (data.type === -1) { %>\n            <span class="file-sprite file-spreadsheet-icon mention-icon"></span>\n        <% } else if (data.type === -3) { %>\n          <span class="file-sprite file-sheet-icon mention-icon"></span>\n        <% } %>\n\t\t\t\t<%= data.name %>\n\t\t\t<% } %>\n\t\t</li>\n<% }) %>\n\n'},function(e,t,n){(function(e){function o(t){var n=t.apiUrl;return new e(function(e,o){(0,l.ajaxPost)(n,(0,u.omit)(t,"apiUrl")).then(function(t){0===t.code?e(t.data):o(new Error(t.message))},function(e){o(e)})})}function i(e,t,n,i){void 0===t&&(t="file,recent_contact,team_member");var r="/smapi/search";return o({apiUrl:r,keyword:e,type:t,page:n,pageSize:i})}function r(e,t,n){var i="/smapi/search/file";return o({apiUrl:i,keyword:e,page:t,pageSize:n})}function a(e,t,n){var i="/smapi/search/recent_contacts";return o({apiUrl:i,keyword:e,page:t,pageSize:n})}function s(e,t,n){var i="/smapi/search/team_members";return o({apiUrl:i,keyword:e,page:t,pageSize:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.searchAll=i,t.searchFiles=r,t.searchRecentContacts=a,t.searchTeamMembers=s;var l=n(231),u=n(4);t.default={searchAll:i,searchFiles:r,searchRecentContacts:a,searchTeamMembers:s}}).call(t,n(170))},function(e,t){e.exports='<li class="document-info-li <%= type%>"  data-s-guid="<%= s_guid%>">\n    <%if(list_type === \'info\' || list_type === \'has-many\'){%>\n        <div class="selection-header">\n            <div class="selection-comment-title" data-title="<%- title%>"></div>\n        </div>\n        <div class="selection-comment-content">\n            <ul class="selection-comment-list" data-number="">\n            </ul>\n            <div class="comment-input-box">\n                <input class="selection-comment-input" placeholder="评论"></input>\n                <div class="input-box-footer">\n                    <a href="javascript:void(0);" class="show-comments">所有评论</a>\n                    <span class="start-comment"><span class="hicon icon-comment-add"></span>评论</span>\n                </div>\n            </div>\n        </div>\n        <img class="shadow-img" src="https://assets-cdn.shimo.im/assets/images/shadow-3c0f519ff8.png"></img>\n    <%}else{%>\n        <div class="selection-header">\n            <div class="selection-comment-title" data-title="<%- title%>">"<%- title%>"</div>\n        </div>\n        <ul class="selection-comment-list" data-number="">\n        </ul>\n        <div class="comment-input-box">\n            <div class="input-placeholder">按Enter键发送</div>\n            <div class="selection-comment-input editable mousetrap" placeholder="评论" contenteditable="true"></div>\n        </div>\n    <%}%>\n</li>\n'},function(e,t){e.exports='<li data-user-id="<%= user_id %>" data-comment-id="<%= id %>" class="doc-comment-item <%= comment_guid%> <%= sending %> <%= is_current? \'current-user\':\'\'%> <%= type == \'w-comment\' ? \'document-info-li w-comment\' : \'\'%> <%= online?\'online\':\'\' %>" <% if (sending) { %> data-comment-guid="<%= comment_guid %>"<% } %>>\n    <div class="comment-avatar">\n        <img class="comment-avatar-img" src="<%= avatar %>"/>\n        <span class="comment-online-circle online-circle"></span>\n    </div>\n    <div class="comment-body">\n        <div class="comment-info">\n            <span class="comment-author"><%= name %></span>\n            <small class="comment-item-time" data-time="<%= created_at %>"><%= formattedTime %></small>\n        </div>\n        <div class="comment-content"><%= content%></div>\n    </div>\n    <% if (is_current) { %>\n        <a href="javascript:void(0);" class="fun delete-comment icon-box">\n            <span class="delete-comment-icon hicon icon-trash-delete"></span>删除\n        </a>\n        <span class="fun deleting-comment">删除中...</span>\n    <% } %>\n    <% if (sending) { %>\n        <span class="fun sending-comment">发送中...</span>\n        <a href="javascript:void(0);" class="fun resend-comment icon-box">\n            <span class="resend-comment-icon hicon icon-refurbish"></span>重发\n        </a>\n        <span class="comment-error-span error-span icon-box">\n            <span class="comment-error-icon hicon icon-remind"></span>发送失败\n        </span>\n    <% } %>\n</li>\n'},function(e,t,n){var o,i;(function(r,a){o=[n(184),n(175),n(293),n(166),n(191)],i=function(e,t,n,o,i){var s,l,u,c,d,p,f,h,m,v,y,g,b,w,C,E,T,P,k,_,O,S,x,M,N,j,I;return y={},c="",h="",O="",w="",d=!0,_=!1,I="",m="",v="",k=!1,l=96/72,j=void 0,s=void 0,x={},o.attach("pad:render_content",function(){if(s=n.getInstance(".sidebar-body"),!j)return j=new u}),u=function(){function n(){this.view=r("#pad-view"),this.header=r("#header"),this.editHeading=r("#edit-heading"),this.buddleBox=r("#buddle-box"),this.cover=r("#document-cover-box"),this.comment=r(".sidebar-body"),this.container=r("#doc-container"),this.editor=r("#innerdocbody"),this.editContainer=r("#editorcontainer"),this.sideCommentBtn=r("#buddle-comment-btn"),this.commentInput=this.comment.find(".comment-input"),this.documentCover=this.cover.find(".document-cover"),this.sCommentInfo=this.comment.find(".selection-comment-info"),this.docView=r(window.cow.iOS?"#pad-wrap":"#doc-view"),this.dirtyCheck="",this.buddleList={},this.lineToComments=[],this.fontList=["9","10","11","12","14","18","24","30","36"],this.sideHover=!0,this.cutLength=window.cow.iOS?90:98,this.autoScroll=!1,this.currentLineNum=-1,this.Comment=s,this.isAndroidApp=t.isAndroidApp(),this.init()}return n.prototype.init=function(){var e;return e=this,this.bind(),this.bindWin(),this.resizeWin(),this.changeMode("document-comment"),this.initBuddle(),this.Comment.getCommentFont=this.getCommentFont,this.Comment.fontList=this.fontList,o.attach("contact:loaded",function(){var t,n,o,r,a,s,l;s=e.Comment.commentData;for(n in s)for(t=s[n],r=0,a=t.length;r<a;r++)o=t[r],l=i.get(o.user_id),o.name=l.name,o.avatar=l.avatar;return e.refreshAuthor()}),o.attach("active:change",function(e){return N(e)}),o.attach("comment:cancel",function(t){return e.context.ace.callWithAce(function(e){var n,o;return n=document.getElementsByClassName(t)[0],o=e.ace_domToRep(n),e.ace_cancelComment(o)},"cancel-comment",!0)}),o.attach("comment:change",function(e){return x=e})},n.prototype.initBuddle=function(){var e,t,n;return n=this,e=function(){var e;return e=0,n.Comment.isReady?(clearInterval(t),n.buddleDirtyCheck(),n.commentPushCheck()):e>50?clearInterval(t):void 0},t=setInterval(e,200)},n.prototype.bind=function(){return t.bindEvents.call(this,"",this.bindFun)},n.prototype.bindFun={buddleClick:function(e){var t,n,i,a;return t=r(e.target),t.hasClass("comment-buddle")?(this.Comment.resetTempList(),this.repositionBuddle(t),"document-comment"!==this.comment.attr("comment-mode")&&this.refreshSelection(),t.hasClass("beClick")?t.removeClass("beClick"):(this.buddleBox.find(".beClick").removeClass("beClick"),this.buddleBox.find(".active").removeClass("active"),t.addClass("beClick"),i=r(e.target).attr("data-buddle"),a=this.buddleList[i].group,r(e.target).data("select-array",a),window.cow.iOS?(n=this.getCommentData(),n.current=a[0],o.notify("comments",n)):this.showListComment(e))):void t.parent().click()},buddleMouseOver:function(e){if(d)return this.changeHighLight(e,"show")},buddleMouseOut:function(e){if(d)return this.changeHighLight(e,"hide")},commentBtnClick:function(e){if(this.Comment.isReady)return this.newComment(),e.stopPropagation()},commentKeyPress:function(e){var n;if(n=this.comment.attr("comment-mode"),e.keyCode===t.keyCodes.ENTER&&"start-selection-comment"===n)return this.finishComment(),this.buddleDirtyCheck()},coverClick:function(){return this.hideCover()},editKeyDown:function(){var e;return e=this,clearTimeout(e.dirtyCheck),e.dirtyCheck=setTimeout(function(){return e.buddleDirtyCheck()},100)},padClick:function(e){if(!r(e.target).parents(".sidebar-body").length&&!r(e.target).hasClass("comment-buddle")&&"buddle-comment-btn"===!e.target.id&&"document-mode"!==this.comment.attr("comment-mode"))return this.hideCover()},sideCommentClick:function(e,t){return _=!0,r("#select-comment").click()},maskClick:function(){return this.closeSelectionUnfold()},docClick:function(){if(this.view.hasClass("selection-unfold"))return this.closeSelectionUnfold()},closeTemp:function(){return this.closeSelectionUnfold()},startComment:function(e,t){var n,o,i;if(!this.comment.hasClass("start-s-comment")&&"document-comment"!==this.comment.attr("comment-mode")&&!this.comment.find(".temp-list").hasClass("only"))return o=r(e.target),i=o.parents(".document-info-li").attr("data-s-guid"),n=this.editContainer.find("."+i),i&&n[0]?(this.repositionBuddle(n),j.showListComment("",[i],"start-comment")):j.showListComment("",[i],"remove"),this.buddleDirtyCheck()}},n.prototype.events={"click .start-comment, .selection-header, .show-comments":"startComment","click .close-temp":"closeTemp","click .list-mask":"maskClick","click #buddle-comment-btn":"sideCommentClick","click #select-comment":"commentBtnClick","click .document-cover":"coverClick","click .comment-buddle":"buddleClick","click #doc-container":"padClick","mouseout .comment-buddle":"buddleMouseOut","mouseover .comment-buddle":"buddleMouseOver","keypress .selection-comment-input":"commentKeyPress","click #innerdocbody":"docClick"},n.prototype.bindWin=function(){var e;return e=this,r(document).on("click",function(t){var n;if(v=window.getSelection().toString(),e.view.hasClass("selection-unfold"))return n=r(t.target),0===n.parents(".document-info-li,.temp-list").length&&"buddle-comment-btn"!==n.attr("id")&&0===n.parents("#buddle-box").length?e.closeSelectionUnfold():void 0}),this.docView.on("scroll",function(t){return e.autoScroll?void(e.autoScroll=!1):!e.view.hasClass("selection-unfold")&&void 0}),r(document).on("keyup",function(){return v=window.getSelection().toString()})},n.prototype.getCommentData=function(){var e,t;return t=[],e=[],r("#innerdocbody .is-commented").each(function(){var n,o;if(o=r(this).attr("class").match(/comment-\w{16}/)[0],t.indexOf(o)===-1)return n=s.commentData[o],n?(t.push(o),e.push(n)):void 0}),this.isAndroidApp&&e.forEach(function(e){return e.forEach(function(e){return e.content=e.content.replace(/"/g,"'")})}),{guids:t,comments:e}},n.prototype.newComment=function(){var e,n,i;if(i=this,n=t.getSelection(),!(!this.isCursorInEditor(n.selection)||this.noTextInLine(n.selection)&&this.isEtherpadSelectionNoText()))return e={},this.context.ace.callWithAce(function(n){n.ace_insertHighLight(),h&&(e={guid:h,title:t.cutLength(r("."+h).text(),42)},h="")},"insert-highlight-comment",!0),window.cow.iOS?e:e.guid&&"add"===O?o.notify("comment:start",e.guid):void 0},n.prototype.repositionBuddle=function(e){var t,n,o,i;return o=e.offset().top,n=this.docView.scrollTop(),i=r(document).height(),t=o<120?o-120:o>i-100?o-i+100:0,this.docView.scrollTop(n+t),this.autoScroll=!0},n.prototype.getOutLineNum=function(e){for(;e.parentNode&&"innerdocbody"!==e.parentNode.id;)e=e.parentNode;return r(e).index()},n.prototype.getFontNode=function(e){for(;e.parentNode.parentNode&&"innerdocbody"!==e.parentNode.parentNode.id&&"li"!==e.parentNode.tagName.toLowerCase();){if(r(e).attr("class")&&r(e).attr("class").indexOf("font-size-")>-1)return;e=e.parentNode}return e},n.prototype.refreshAuthor=function(){return this.view.find(".doc-comment-item").each(function(){var e,t,n;if(e=r(this),n=e.attr("data-user-id"),i.exists(n))return t=i.get(n),e.find(".comment-author").html(t.name),e.find(".comment-avatar img").attr("src",t.avatar)})},n.prototype.commentInLine=function(e,t){var n;return t&&this.buddleList[t]&&this.buddleBox.find('.comment-buddle[data-buddle="'+t+'"]').addClass("hide"),n=this.cutLength-this.docView.scrollTop()+15,this.sideCommentBtn.css({top:e-n}).show()},n.prototype.closeSelectionUnfold=function(){return this.buddleBox.find(".beClick").removeClass("beClick"),this.refreshSelection()},n.prototype.refreshSelection=function(){return w="",this.editContainer.find(".is-commented.active").removeClass("active"),this.hideCover()},n.prototype.resizeWin=function(){var e;return e=this},n.prototype.showListComment=function(e,t,n){if(this.changeHighLight(e,"show",t),this.coverDocument("buddle",e,t),!window.cow.iOS)return this.Comment.createSelectionListArea(e,t,n)},n.prototype.isCursorInEditor=function(e){var t;return t=e.focusNode,!(t&&!r(t).parents("#innerdocbody").length)||r(t).hasClass("icon-comment-add")},n.prototype.coverDocument=function(e,t,n){var o;return m=[e,t],o="select"===m[0]?"start-selection-comment":"selection-comment",d=!1,this.changeMode(o)},n.prototype.changeHighLight=function(e,t,n){var o,i,a,s;return this.editContainer.find(".is-commented.active").removeClass("active"),s=this,n&&n.length?"show"===t?(w=n,r("."+n[0]).addClass("active")):w="":(o=r(e.target),o.hasClass("comment-buddle")||(o=r(e.target).parent()),i=o.attr("data-buddle"),a=r("."+this.buddleList[i].group.join(", .")),"show"===t?(a.addClass("active"),w=this.buddleList[i].group):(a.removeClass("active"),w=""))},n.prototype.finishComment=function(){return I=""},n.prototype.changeMode=function(e){},n.prototype.getCommentFont=function(e){var t;return t=e&&e.indexOf("font-size-")>-1?e.match(/font-size-([0-9]+)/)[1]-1:2},n.prototype.isEtherpadSelectionNoText=function(){var e;return e="",this.context.ace.callWithAce(function(t){var n,o,i,r,a,s,l,u;for(i=t.ace_getRep(),s=[i.selStart[0],i.selStart[1]],a=[i.selEnd[0],i.selEnd[1]],n=s[0],r=[];n<=a[0]&&(o=i.lines.atIndex(n),u=o.text,n===s[0]?(l=0===s[0]?o.lineMarker:s[0],e+=u.slice(l,u.length)):e+=n===a[0]?u.slice(o.lineMarker,a[0]):u.slice(o.lineMarker,u.length),e=e.replace(/\s/g,""),!(e.length>0));)r.push(n+=1);return r},"get-selection",!0),!(e.length>0)},n.prototype.noTextInLine=function(e){var n,o,i;return o=e.focusNode,o?"buddle-comment-btn"!==r(o)[0].id&&!!(t.getLineDom(o).textContent.length<1)&&r(t.getLineDom(o)).find(".upload-image").length<1:(n=r("#tempAttachmentStyle"),!(n.length>0)||(i=n.text().match(/attachment-[a-z,A-Z,0-9]{16}/),i=i&&i[0]?i[0]:"",!(r("."+i).length>0)))},n.prototype.buddleDirtyCheck=function(e,t){var n,i,s,u,d,p,f,h,m,v,y;o.notify("dirtyCheck"),m=this,s=[],m.lineToComments=[],i={},m.buddleList={},h=this.docView.scrollTop(),v=this.cutLength-h+15,u=this.container.find(".is-commented"),m.view.hasClass("selection-unfold")?c=m.view.find(".temp-list .document-info-li").attr("data-s-guid"):window.cow.iOS||(c=""),a.each(u,function(e,t){var n,o,a,l,u;if(n=r(e).attr("class"),u=n.match(/comment-([A-Za-z0-9]{16})/)[0],l=m.getCommentFont(n),i[u]!==!0)return i[u]=!0,o=m.Comment.commentData[u],a={guid:u,font:l,number:o?o.length:0},s.push(a)}),a.each(s,function(e,t){var n,o,i,s,u;if(n=r(m.container.find("."+e.guid)[0]),i=m.fontList[e.font]*l,n.length>0&&(o=n.offset().top+i,u=null,a.forIn(m.buddleList,function(e,t){if(Math.abs(t-o)<10)return u=m.buddleList[t]}),e.number)){if(!u)return s=m.getOutLineNum(n[0]),m.lineToComments[s]=m.lineToComments[s]||[],m.lineToComments[s].push(o),m.buddleList[o]={num:1,total:e.number,group:[e.guid],min:o,lineNum:s};if(u.group||(u.group=[]),u.group.join("").indexOf(e.guid)<0&&(u.num++,u.total+=e.number,u.group.push(e.guid),o<u.min))return u.min=o}}),m.buddleBoxDomCache||(m.buddleBoxDomCache={}),n=a.clone(m.buddleBoxDomCache),m.buddleBoxDomCache={},p=[],a.forIn(m.buddleList,function(o,i){var r,a,s,l,u,d,f;if(o.total)return a="",s="",o.total>=99&&(o.total="99+"),c&&o.group.toString().indexOf(c)>-1&&(s="beClick"),window.cow.iOS||c||e!==o.lineNum||k||(a="active"),t&&t===i&&(""!==a&&(a+=" "),a+="hide"),u='<a class="comment-buddle hicon '+s+" icon-comment "+a+'" title="'+o.group.length+"处标记"+o.total+'处评论" data-buddle="'+i+'" style="top:'+(o.min-v)+'px;" ><span class="comment-buddle-text">'+o.total+"</span></a>",l=n[i],f='<a class="comment-buddle hicon (beClick)? icon-comment (active|hide|active hide)?" title="'+o.group.length+"处标记"+o.total+'处评论" data-buddle="'+i+'" style="top:'+(o.min-v)+'px;" ><span class="comment-buddle-text">'+o.total+"</span></a>",d=new RegExp(f),p.push(i),r=m.buddleBox.find('.comment-buddle[data-buddle="'+i+'"]'),l!==u?l&&l.match(d)&&u.match(d)?r.removeClass("beClick").removeClass("active").removeClass("hide").addClass(s).addClass(a):(r.remove(),m.buddleBox.append(u)):(""!==a&&!r.hasClass(a)||""===a&&(r.hasClass("active")||r.hasClass("hide"))||""===s&&r.hasClass("beClick")||"beClick"===s&&!r.hasClass("beClick"))&&(r.remove(),m.buddleBox.append(u)),m.buddleBoxDomCache[i]=u}),f=[];for(d in n)y=n[d],a.includes(p,d)?f.push(void 0):f.push(m.buddleBox.find('.comment-buddle[data-buddle="'+d+'"]').remove());return f},n.prototype.commentPushCheck=function(){var t;return t=this,e.bind("Comment",function(e){if(e.data.selection_guid)return setTimeout(function(){return t.buddleDirtyCheck()},100)})},n.prototype.getLineSelects=function(e){var t,n,o;return t=r(e.target).attr("data-buddle"),n=this.buddleList[t].group,r(e.target).data("select-array",n),o={y:0,height:0},a.each(n,function(e,t){var n,i;if(i=r("."+e),0===t&&i[0]&&(o.y=i.offset().top),i.height=i.outerHeight(),i.length>=2&&(n=r(i[i.length-1]),i.height=n.offset().top-r(i[0]).offset().top+n.outerHeight()),i.height>o.height)return o.height=i.height}),o},n.prototype.hideCover=function(e){var t;t=this,this.changeMode("document-comment"),d=!0,w=""},n.prototype.updateCommentBtnPosition=function(e){var n,o,i,u,c,d,p,f,h,m,y,g,b,w,C,E,T,P,_,O,S;if(!e.selStart||!s.isReady)return void this.sideCommentBtn.hide();if(E=t.getSelection(),this.isCursorInEditor(E.selection)){if(b=e.selStart[0],o=r("#innerdocbody").children().eq(b),r(".comment-buddle.hide").removeClass("hide"),o.find(".image-placeholder").length)return void this.sideCommentBtn.hide();if(o.find(".attachment-placeholder").length)return void this.sideCommentBtn.hide();if(T=E.string&&!E.string.replace(/\s/g,"").length,m=E.string&&E.string.replace(/\s/g,"").length,h=v.replace(/\s/g,"").length&&v.length===e.selEnd[1]-e.selStart[1],T)this.sideCommentBtn.hide();else if(m){if(k=!0,C=t.getSelectionPosition(),O=window.getSelection().anchorNode,!O)return;if(p=this.getFontNode(O),u=r(p).attr("class"),d=this.getCommentFont(u),!d||!r(p).offset())return;w=r(p).offset().top,y=w-C.y,S=y>-5?w:C.y,i=S+this.fontList[d]*l,_=null,a.forIn(this.buddleList,function(e,t){if(Math.abs(t-i)<10)return _=t}),this.commentInLine(i,_)}else{if(h)return;if(k=!1,b<e.lines.length())if(c=e.lines.atIndex(b),c&&c.text)if(P=this,g=this.lineToComments[b],f=g&&!!g.length,f&&window.cow.iOS)this.sideCommentBtn.hide(),window.cow.iOS||a.each(g,function(e){return P.buddleBox.find('.comment-buddle[data-buddle="'+e+'"]').addClass("active")});else{if(n=r(o.find("span")[0]),!n.length)return;u=n.attr("class"),d=this.getCommentFont(u),i=n.offset().top+P.fontList[d]*l,this.commentInLine(i)}else this.sideCommentBtn.hide()}this.buddleDirtyCheck(b,_),this.view.hasClass("selection-unfold")&&this.sideCommentBtn.hide()}},n}(),y.getCommentData=function(){return j.getCommentData()},y.changeActiveGuid=function(e){return c=e,j.buddleDirtyCheck()},y.changeHighLight=function(e){return j.changeHighLight(null,"show",[e])},y.refreshSelection=function(){return j.refreshSelection()},y.newComment=function(){return j.newComment()},y.finishComment=function(){return j.finishComment()},y.commentTop=function(e){var t,n,o;n=j.buddleList;for(o in n)if(t=n[o],t.group.indexOf(e)!==-1)return o},y.updateCommentBtnPosition=function(e){return j.updateCommentBtnPosition(e)},y.repositionBuddle=function(e){return j.repositionBuddle(e)},y.showListComment=function(e){return j.showListComment("",[e])},y.postAceInit=function(e,t){if(j)return j.context=t,this.sComment=j},y.aceAttribsToClasses=function(e,t){var n;if("comment"===t.key)return w&&a.each(w,function(e,n){if(t.value.indexOf(e)>-1&&t.value.indexOf("active")<0)return t.value+=" active"}),n=["is-commented "+t.value]},g=function(){var e,t,n;for(t=17,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];t-=1;)n.push(e[parseInt(62*Math.random())]);return n.join("")},P=function(e){var n,o,i,l,u,c,d,p,h,m,v,y,g,w,C,E,P;return C=this,E=e.selStart[0],o=j.view.find("#innerdocbody").children("div:nth-child("+(E+1)+")"),n=o.find(".is-commented"),u=[],l=[],v=e,h=[e.selStart[1],e.selEnd[1]],w="",d=o.text().length<1,P="add",i=t.isMobile()?s.commentData:x,a.each(n,function(e){var t;if(t=e.className.match(/\b\w{7}-\w{16}/),i[t[0]]&&i[t[0]].length)return l.push(e)}),y=t.getSelection(),g=y.string&&!y.string.replace(/\s/g,"").length,g?w=o[0]:e.selStart[0]===e.selEnd[0]&&e.selStart[1]===e.selEnd[1]?l.length>0?(P="position",w=l[0]):w=o[0]:(e.selStart[0]<e.selEnd[0]&&(c=f(v)||E,c!==E&&(l=[],o=j.view.find("#innerdocbody").children("div:nth-child("+(c+1)+")"),n=o.find(".is-commented"),a.each(n,function(e){var t;if(t=e.className.match(/\b\w{7}-\w{16}/),i[t[0]]&&i[t[0]].length)return l.push(e)})),h[0]=v.selStart[1],h[1]=v.selEnd[1]),l.length>0&&(a.each(l,function(e){if(T(e,h))return u.push(e)}),u.length&&(w=u[0],P="position"))),w&&"add"===P&&(p=b(w),h=[p,p+r(w).text().length],v.selStart[1]=h[0],v.selEnd=[e.selStart[0],h[1]]),m={rep:v,type:P,dom:w,noText:d}},f=function(e){var t,n,o,i,r,a,s,l,u,c;for(c=e.selStart[0],n=e.selEnd[0],o=i=s=c,l=n;s<=l?i<=l:i>=l;o=s<=l?++i:--i)if(a=e.lines.atIndex(o).lineMarker,r=e.lines.atIndex(o).text.length,u=a,t=u+r,o===c&&(u=e.selStart[1]),o===n&&(t=e.selEnd[1]),t-u>0)return e.selStart=[o,u],e.selEnd=[o,t],o},T=function(e,t){var n,o;return o=b(e),n=[o,o+r(e).text().length],!(n[1]<=t[0]||n[0]>=t[1])},b=function(e){var t,n,o,i,r;for(o=document.getElementById("innerdocbody"),r="​",t=0;(n=e.parentNode)!==o;)(i=e.previousSibling)?(e=i,t+=S(e).length,S(e)[0]===r&&(t=Math.max(t-1,0))):e=n;return e.firstChild&&E(e.firstChild)&&(t+=1),t},S=function(e){return e.innerText||e.textContent||e.nodeValue||""},E=function(e){var t;return t={div:1,p:1,pre:1,li:1,ol:1,ul:1,inherit:1},!!t[(e.tagName||"").toLowerCase()]},p=function(e){if(e.selStart&&e.selEnd)return this.documentAttributeManager.setAttributesOnRange(e.selStart,e.selEnd,[["comment",""]])},C=function(e,t){var n,o,i,a;if("cancel"===e){if(!t.selStart||!t.selEnd)return;j.finishComment(),this.documentAttributeManager.setAttributesOnRange(t.selStart,t.selEnd,[["comment",""]])}else{if(i=this.rep,!i.selStart||!i.selEnd)return;if(a=P(i),O=a.type,"add"===a.type){if(n="comment-"+g(),h=n,w=[n],o=r("#innerdocbody").find(">div").eq(i.selStart[0]),!o.length)return;if(o.find(".image-placeholder, .attachment-placeholder").length)return;i.selStart[0]===i.selEnd[0]&&i.selStart[1]===i.selEnd[1]&&o.find(".upload-image, .upload-attachment").length&&(i.selEnd[1]+=1),this.documentAttributeManager.setAttributesOnRange(i.selStart,i.selEnd,[["comment",n]]),I={code:n,temp:!0},j.coverDocument("select")}else M(a.dom)}return j.buddleDirtyCheck()},M=function(e){var n;return n=e.className.match(/\b\w{7}-\w{16}/),h=n[0],t.isMobile()?j.showListComment("",n):(N([h]),o.notify("comment:show",h))},N=function(e){if(w=e,r(".is-commented.active").removeClass("active"),w&&w.length)return r("."+w[0]).addClass("active")},y.aceInitialized=function(e,t){var n;n=t.editorInfo,n.ace_insertHighLight=a.bind(C,t),n.ace_cancelComment=a.bind(p,t)},y}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1),n(4))},function(e,t,n){var o,i;(function(r){o=[n(226),n(194)],i=function(e,t){var n,o;return o=navigator.userAgent,n=o.match(/mobile.*dingtalk/i)?e.toast:function(e,n,o){var i,a,s;return null==e&&(e=""),null==n&&(n=3e3),null==o&&(o=""),e=t(e,{whiteList:{span:["class"],br:[]}}),a=r("#toast-wrap"),i&&clearTimeout(i),a.length>0?(a.html(e),a[0].className="toast fadein "+o):(s=document.createElement("div"),s.id="toast-wrap",s.className="toast fadein "+o,s.innerHTML=e,r("body").append(s)),i=setTimeout(function(){return r("#toast-wrap").addClass("hide")},n)},window.toast=n,n}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1))},function(e,t,n){var o;o=function(){var e=function(e){function t(t){var n=t.onselectionchange;if(n!==e)try{return t.onselectionchange=0,null===t.onselectionchange}catch(e){}finally{t.onselectionchange=n}return!1}function n(){return"undefined"!=typeof WeakMap?new WeakMap:(console.error("selectionchange: WeakMap not supported"),null)}function o(e){var t=e.getSelection();return t.rangeCount?t.getRangeAt(0):null}function i(e,t,n){e.addEventListener(t,n,!0)}function r(e,t,n){e.removeEventListener(t,n,!0)}function a(e){b[e.target.tagName]||p(this,!0)}function s(e){var t=e.keyCode;(65===t&&e[y]&&!e.shiftKey&&!e.altKey||t>=37&&t<=40||e.ctrlKey&&m&&v.indexOf(t)>=0)&&(b[e.target.tagName]||setTimeout(p.bind(null,this),0))}function l(e){0===e.button&&(i(this,"mousemove",u),setTimeout(p.bind(null,this),0))}function u(e){1&e.buttons?p(this):r(this,"mousemove",u)}function c(e){0===e.button?setTimeout(p.bind(null,this),0):r(this,"mousemove",u)}function d(){setTimeout(p.bind(null,this.document),0)}function p(e,t){var n=o(e);!t&&f(n,h.get(e))||(h.set(e,n),setTimeout(e.dispatchEvent.bind(e,new Event("selectionchange")),0))}function f(e,t){return e===t||e&&t&&g.every(function(n){return e[n]===t[n]})}var h,m=/^Mac/.test(navigator.platform),v=[65,66,69,70,78,80],y=m?"metaKey":"ctrlKey",g=["startContainer","startOffset","endContainer","endOffset"],b={INPUT:1,TEXTAREA:1};return{start:function(e){var r=e||document;(h||!t(r)&&(h=n()))&&(h.has(r)||(h.set(r,o(r)),i(r,"input",a),i(r,"keydown",s),i(r,"mousedown",l),i(r,"mousemove",u),i(r,"mouseup",c),i(r.defaultView,"focus",d)))},stop:function(e){var t=e||document;h&&h.has(t)&&(h.delete(t),r(t,"input",a),r(t,"keydown",s),r(t,"mousedown",l),r(t,"mousemove",u),r(t,"mouseup",c),r(t.defaultView,"focus",d))}}}();return e}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))},function(e,t,n){var o,i;o=[n(165),n(164)],i=function(e,t){var n,o,i,r,a;return i={},o={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},n={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},r=function(e,t){var n;for(n in t)e[n]=t[n];return e},i.simulate=function(e,t){var i,a,s,l,u;u=r(n,arguments[2]||{}),l=void 0,i=null;for(s in o)if(o[s].test(t)){i=s;break}if(!i)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");return document.createEvent?(l=document.createEvent(i),"HTMLEvents"===i?l.initEvent(t,u.bubbles,u.cancelable):l.initMouseEvent(t,u.bubbles,u.cancelable,document.defaultView,u.button,u.pointerX,u.pointerY,u.pointerX,u.pointerY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,e),e.dispatchEvent(l)):(u.clientX=u.pointerX,u.clientY=u.pointerY,a=document.createEventObject(),l=r(a,u),e.fireEvent("on"+t,l)),e},a=function(e,t){var n,o;o=e,document.createEvent?(n=document.createEvent("MouseEvents"),n.initEvent(t,!0,!1),o.dispatchEvent(n)):document.createEventObject&&(n=document.createEventObject(),o.fireEvent("on"+t,n))},i.detectIE=function(){var e,t,n,o,i;return i=window.navigator.userAgent,t=i.indexOf("MSIE "),t>0?parseInt(i.substring(t+5,i.indexOf(".",t)),10):(o=i.indexOf("Trident/"),o>0?(n=i.indexOf("rv:"),parseInt(i.substring(n+3,i.indexOf(".",n)),10)):(e=i.indexOf("Edge/"),e>0&&parseInt(i.substring(e+5,i.indexOf(".",e)),10)))},i}.apply(t,o),!(void 0!==i&&(e.exports=i))},function(e,t){e.exports='<div class="trangle">\n    <span class="top operation-trangle-item"></span>\n    <span class="down operation-trangle-item"></span>\n</div>\n\n<ul class="operation-list">\n  <li class="operation-list-item export-btn">导出</li>\n  <li class="operation-list-item print-btn">打印</li>\n  <% if (typeof authorized !== \'undefined\' && authorized) {%>\n      <hr/>\n  \t\t<li class="operation-list-item delete-btn">删除文档</li>\n  <% } %>\n  \n</ul>\n'},function(e,t,n){var o,i;(function(r,a){var s=function(e,t){function n(){this.constructor=e}for(var o in t)l.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},l={}.hasOwnProperty;o=[n(184),n(175),n(301),n(306)],i=function(e,t,n,o){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return s(i,e),i.prototype.init=function(){var e,n,o,i;if(this.registerPendingAction("/api/file/copy",{guid:window.cow.tempCurrentFile.guid,source_url:window.location.href},this.saveSharedDocAsCopy),window.cow.currentUser.id<0&&"editable"===window.cow.shareStatus.mode&&!t.isMobile()&&(e=window.cow.currentFile.guid,i=window.localStorage.getItem("visitedAnonymousDocGuids"),"undefined"!=typeof i&&null!==i||(i=""),o=".*,"+e+",.*",n=new RegExp(o),!n.test(i)))return i=","+e+","+i,window.localStorage.setItem("visitedAnonymousDocGuids",i),this.showSaveDocDialog()},i.prototype.eventMap={"click .save-to-shimo-link":"saveSharedDoc","click .save-to-shimo-btn":"saveSharedDoc","click .goto-desktop-btn":"gotoDesktop","click .login-write-btn":"gotoLogin","click .stay-here-btn":"hideSaveDocDialog","click .save-doc-dialog-close":"hideSaveDocDialog","touchmove .flat-dialog-mask":"stopPropagation","click .flat-dialog-mask":"stopPropagation"},i.prototype.domEvents={stopPropagation:function(e){return e.stopPropagation(),e.preventDefault(),!1},saveSharedDoc:function(e){if(window.cow.currentUser.id<0&&"editable"===window.cow.shareStatus.mode&&!t.isMobile()?this.showSaveDocDialog():this.saveSharedDocAsCopy.call(this,this.pendingAction.data.url,this.pendingAction.data.data),window.ga)return window.ga("send","event","save","save_to_shimo",location.pathname)},gotoDesktop:function(e){if(window.location.href="/desktop",!t.isMobile())return r("body").removeClass("overflow-hidden")},gotoLogin:function(e){if(window.location.href="/login",!t.isMobile())return r("body").removeClass("overflow-hidden")},hideSaveDocDialog:function(e){var n;if(n=this,this.$saveDocDialog.css("opacity",0),setTimeout(function(){return n.$saveDocDialog.removeClass("active")},200),!t.isMobile())return r("body").removeClass("overflow-hidden")}},i.prototype.initSaveDocDialog=function(){var e,n;return n={isMobile:t.isMobile(),readonly:!!window.cow.readonly,docTitle:window.cow.currentFile.name,shareCount:window.cow.currentFile.share_count},e=a.template(o)(n),r(".save-doc-dialog").remove(),r("body").append(e),this.$saveDocDialog=r(".save-doc-dialog")},i.prototype.showSaveDocDialog=function(){var e;return this.initSaveDocDialog(),e=this,this.$saveDocDialog.addClass("active"),setTimeout(function(){
return e.$saveDocDialog.css("opacity",1)},0),t.isMobile()||r("body").addClass("overflow-hidden"),setTimeout(function(){return r("#innerdocbody").blur()},200)},i.prototype.saveSharedDocAsCopy=function(e,n){var o,i;return i=this,o=window.cow.currentFile.guid,window.cow.currentUser.id<0?void(window.location.href="/register"):t.post(e,n,function(e){return 0===e.code?i.showSaveDocDialog():i.alertMsg("保存失败","error")},function(e){return setTimeout(function(){return i.alertMsg("保存失败","error")},500)})},i.prototype.alertMsg=function(e,o){return t.isMobile()?n(e):t.alert({title:e,type:o})},i}(t.DomModule)}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1),n(4))},function(e,t){e.exports='<div class="flat-dialog-wrapper save-doc-dialog">\n    <div class="flat-dialog-mask">\n    <% if (isMobile) { %>\n    <a class="save-doc-dialog-close" href="javascript:void(0);">\n        <span class="hicon icon-close"></span>\n    </a>\n    <% } %>\n    <div class="flat-dialog-content">\n        <% if (isMobile) { %>\n        <img class="save-doc-logo" width="40px" heiht="20px" src="https://assets-cdn.shimo.im/assets/images/logo_over-3e9a9d5f2d.png">\n        <% } %>\n        <% if (readonly) { %>\n        <div class="save-doc-info">\n            <span>该文档已保存到我的桌面!</span>\n        </div>\n        <div class="goto-desktop-btn flat-dialog-btn">\n            <span>前往桌面查看</span>\n        </div>\n        <div class="stay-here-btn">\n            <span>留在此文档</span>\n        </div>\n        <% } else {%>\n        <div class="save-doc-title">\n            <span>「<%= docTitle %>」</span>\n        </div>\n        <div class="doc-share-info">\n            <span><%= shareCount + 1 %>人正在协作编辑此文档</span>\n        </div>\n        <div class="login-write-btn flat-dialog-btn">\n            <span>登录并参与协作</span>\n        </div>\n        <div class="stay-here-btn">\n            <span>匿名编辑</span>\n        </div>\n        <% } %>\n    </div>\n    </div>\n</div>\n'},function(e,t,n){var o,i;(function(r){o=[n(164),n(166)],i=function(e,t){var n,o,i,a,s;return a=[".header-back-up",".sm-share-btn",".operation-btn",".account-setting-btn",".message-box",".toolbar-upload-file-input","#select-comment"],s=["table"],i=["#pad-back-btn","#mobile-more-btn",".toolbar-upload-file-input"],n=function(){if(!window.cow.client)return window.cow.isMobile?i.forEach(function(e){return r(e).on("tap",!1)}):a.forEach(function(e){return r(e).on("click",!1)}),"doc"===window.cow.pageType?s.forEach(function(e){if(e=window.padeditbar.getItem(e))return e.setEnable(!1)}):void 0},o=function(){if(window.cow.isMobile?i.forEach(function(e){return r(e).off("tap",!1)}):a.forEach(function(e){return r(e).off("click",!1)}),"doc"===window.cow.pageType)return s.forEach(function(e){if(e=window.padeditbar.getItem(e))return e.setEnable(!0)})},t.attach("socket:disconnected",function(){return n()}),t.attach("socket:reconnected",function(){return o()})}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1))},function(e,t,n){var o,i;(function(r){o=[n(175),n(166)],i=function(e,t){var n,o,i,a,s,l,u,c;return a={},c=r("#pad-view"),a.postAceInit=function(n,o){var i;return i=this,r("#display-toolbar-btn").off().on("click",function(t){var n;return t.stopPropagation(),n=r(this),n.hasClass("active")||e.clearDropdown(),n.toggleClass("active")}),r(".userline-btn").off().on("click",function(e){var t;return t=r(e.target).closest(".display-item"),t.hasClass("pressed")?(t.removeClass("pressed"),c.removeClass("edit-mode")):(t.addClass("pressed"),c.addClass("edit-mode"))}),r(".history-btn").off().on("click",function(e){return i.showOperation(e)}),r(".change-comment-btn").off().on("click",function(e){return i.showOperation(e)}),r(".directory-btn").off().on("click",function(e){return i.showOperation(e)}),r(".doc-sidebar-close").off().on("click",function(e){return i.closeSidebar(e)}),r(".change-comment-btn").addClass("pressed"),t.attach("doc:goback",function(){if("function"==typeof i.closeSidebar)return i.closeSidebar()}),t.attach("comment:show",function(){if(!r("#pad-view").hasClass("comment-show"))return r(".change-comment-btn").addClass("pressed"),s()})},s=function(){return r("#pad-view").addClass("comment-show").removeClass("history-show"),o(),i()},n=function(){return r("#pad-view").removeClass("comment-show"),r(".change-comment-btn").removeClass("pressed")},u=function(){return r("#doc-history").removeClass("hide"),t.notify("doc:history:show"),o(),n()},i=function(){return r("#doc-history").addClass("hide"),t.notify("doc:history:hide"),r(".history-btn").removeClass("pressed")},l=function(){return r("#pad-view").addClass("directory-show"),r("#doc-directory").removeClass("hide"),i(),n(),window.cow.directory.isOpened=!0},o=function(){return r("#pad-view").removeClass("directory-show"),r("#doc-directory").addClass("hide"),r(".directory-btn").removeClass("pressed"),window.cow.directory.isOpened=!1},a.showOperation=function(e){var t,d;return t=r(e.target).closest(".display-item"),d=t.data("type"),r("#innerdocbody").focus(),c.hasClass("history-show")||"comment"===d||(c.addClass("history-show"),"directory"===d&&(window.cow.directory.firstOpen=!0)),"history"===d?t.hasClass("pressed")?(i(),c.hasClass("history-show")&&c.removeClass("history-show")):(t.addClass("pressed"),u()):"directory"===d?t.hasClass("pressed")?(o(),c.hasClass("history-show")&&c.removeClass("history-show")):(t.addClass("pressed"),l()):"comment"===d&&(t.hasClass("pressed")?n():(t.addClass("pressed"),s())),a.closeSidebar=function(e){if(i(),o(),c.hasClass("history-show"))return c.removeClass("history-show")}},a.showUserLine=function(){var e;if(e=r(".userline-btn"),!e.hasClass("pressed"))return r(".userline-btn").click(),r("#display-toolbar-btn").removeClass("active")},a}.apply(t,o),!(void 0!==i&&(e.exports=i))}).call(t,n(1))},function(e,t,n){var o;(function(i){o=function(){var e;return e=function(e,t){return this.type=null,this.options=null,this.enabled=null,this.timer=null,this.$element=null,this.init("tooltip",e,t)},e.DEFAULTS={isautohide:!0,placement:"top",selector:"",template:'<div class="smtooltip"><div class="smtooltip-inner"></div></div>',html:!1,trigger:"hover",container:!1},e.prototype.init=function(e,t,n){var o,r,a,s;return this.enabled=!0,this.type=e,this.$element=i(t),this.options=this.getOptions(n),s=this.options.trigger,"click"===s?this.$element.on("click."+this.type,this.options.selector,function(){return i.proxy(this.generate,this)}):"manual"!==s&&(r="hover"===s?"mouseenter":"focusin",a="hover"===s?"mouseleave":"focusout",o=this,setTimeout(function(){return o.$element.on(r+"."+o.type,o.options.selector,function(){return o.generate()})},0),this.options.isautohide)?(this.$element.on(a+"."+this.type,this.options.selector,i.proxy(this.destroy,this)),this.$element.on("click."+this.type,this.options.selector,i.proxy(this.destroy,this))):void 0},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=i.extend({},this.getDefaults(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.popup=function(){return this.generate()},e.prototype.popdown=function(){return this.destroy()},e.prototype.hasContent=function(){var e;return e=this.$element.data("content"),!!e&&e},e.prototype.show=function(){var e;return e=this.tip(),!!this.hasContent()&&(e.addClass(this.options.placement).find(".smtooltip-inner").html(this.hasContent()),i("body").hasClass("smtooltip")?void 0:i("body").append(e))},e.prototype.generate=function(){var e,t,n,o,r,a;switch(clearTimeout(this.timer),e=this,t=this.$element.height(),o=null,n=null,a=0,r=0,this.show(),this.hasContent()&&(o=this.tip().outerWidth(!0),n=this.tip().outerHeight()),this.options.placement){case"top":a=Math.round(this.$element.offset().top-i(window).scrollTop()+t+10),r=Math.round(this.$element.offset().left+this.$element.outerWidth()/2-i(window).scrollLeft()-o/2);break;case"bottom":a=Math.round(this.$element.offset().top-i(window).scrollTop()-this.tip().outerHeight()-t-10),r=Math.round(this.$element.offset().left+this.$element.outerWidth()/2-i(window).scrollLeft()-o/2);break;case"right":a=Math.round(this.$element.offset().top+this.$element.outerHeight()/2-i(window).scrollTop()-n/2),r=Math.round(this.$element.offset().left+this.$element.outerWidth()-i(window).scrollLeft()+10);break;case"left":a=Math.round(this.$element.offset().top+this.$element.outerHeight()/2-i(window).scrollTop()-n/2),r=Math.round(this.$element.offset().left-i(window).scrollLeft()-o-10)}return this.tip().css({top:a,left:r})},e.prototype.destroy=function(){var e;return e=this,e.timer=setTimeout(function(){return e.tip().remove()},30)},e.prototype.tip=function(){return this.$tip=this.$tip||i(this.options.template)},e}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}).call(t,n(1))},function(e,t){e.exports="<html>\n  <head>\n    <link rel='stylesheet' type='text/css' href='<%= css %>'>\n    <style>\n     #buddle-comment-btn {\n       display: none !important;\n     }\n     table, tr, td {\n       border: 1px solid black;\n     }\n     table {\n       border-collapse: collapse;\n       margin-bottom: 20px;\n     }\n     td {\n       min-width: 50px;\n       padding: 0 4px 0 4px;\n       height: 22px;\n     }\n     .comment-buddle {\n       display: none;\n     }\n     #mention-pop {\n       display: none;\n     }\n    </style>\n  </head>\n  <body>\n    <%= body %>\n  </body>\n</html>\n"},function(e,t,n){(function(o,i){function r(e){return d(cow.currentUser,e)}function a(e){if(u(e)||c(e)){if(e.team_role&&"creator"===e.team_role)return!0}else if(e.isOwner)return!0;return!1}function s(e){if(u(e)||c(e)){if(e.team_role&&"member"===e.team_role)return!0}else if(!a(e))return!0;return!1}function l(e){return!(!u(e)&&!c(e)||!e.team_role||"admin"!==e.team_role)}function u(e){return e.accountType&&("enterprise_standard"===e.accountType||"enterprise_expired"===e.accountType)}function c(e){return e.accountType&&"enterprise_dingding"===e.accountType}function d(e,t){return e.id&&t.id&&e.id===t.id||e.email&&t.email&&e.email===t.email}function p(e,t){return!!a(e)||!(!l(e)||a(t)||l(t))}function f(e,t){var n=[];return e&&/^[\w-@\.\u4E00-\u9FFF]+$/.test(e)?(e=e.toLowerCase(),t&&(e.match(/^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*\.)+[a-z]{2,6})$/i)?!function(){var i=new RegExp("^"+e);o.each(t,function(e){i.test(e.email||"")&&n.push(e)})}():(o.each(t,function(t){if(t.name_pinyin&&!(t.id<0)){if(!E[t.id]){if(!t.name_pinyin||t.id<0)return;var i=t.name_pinyin.split("|");E[t.id]={name:t.name,firstLetters:i[0],fullPinyin:i[1],fullPinyinS:i[1].replace(/\'/g,""),emailPrefix:(null!==t.email?t.email.split("@")[0]:void 0)||"",emailFull:t.email||""}}var r=E[t.id],a=r.name.toLowerCase().indexOf(e)+1,s=r.firstLetters.toLowerCase().indexOf(e)+1,l=r.fullPinyin.toLowerCase().indexOf("'"+e)+1,u=r.emailPrefix.toLowerCase().indexOf(e)+1,c=r.emailFull.toLowerCase().indexOf(e)+1,d=r.fullPinyinS.toLowerCase().indexOf(e)+1,p=o.min([a,20*s,20*l,20*u,1e4*c,1e3*d].filter(function(e){return e>0}));"undefined"!=typeof p&&t.status>-1&&n.push({weight:p,user:t})}}),n=n.sort(function(e,t){return e.weight-t.weight}).map(function(e){return e.user}))),n):n}function h(e){var t="/api/getUserInfo?email="+e;return(0,C.ajaxGet)(t)}function m(e,t){return new i(function(n,o){if(0===e.length)return void n();var i={file_id:t,users:[]};e.forEach(function(e){var t="number"==typeof e.id?e.id:e.email;i.users.push(t)}),(0,C.ajaxPost)("/api/invite",i).then(function(e){0===e.code&&e.data.success?!function(){var t=[];e.data.detail.forEach(function(e){"undefined"!=typeof e.user&&t.push(e.user)}),n(t)}():o()},function(){o()})})}function v(){return(0,C.ajaxGet)("/api/share/recent_contact")}function y(e){return new i(function(t,n){(0,C.ajaxGet)("/smapi/teams/mine/members",e).then(function(e){0===e.code?t(e.data||[]):n(e)},function(e){n(e)})})}function g(e,t){var n={guid:e,user_id:t};return new i(function(e,t){(0,C.ajaxPost)("/api/share/delete",n).then(function(n){0===n.code?e(n):t()},function(e){t(e)})})}function b(){return new i(function(e,t){(0,C.ajaxGet)("/smapi/teams/mine/permissions").then(function(n){if(0===n.code){var o=cow.currentUser.team_role;e({share:(n.data.share||[]).indexOf(o)>-1,invite:(n.data.invite||[]).indexOf(o)>-1,setAdmin:(n.data.setAdmin||[]).indexOf(o)>-1})}else t(new Error(n.message))},function(e){t(e)})})}function w(e){return new i(function(t,n){(0,C.ajaxGet)("/smapi/users/email?email="+e).then(function(e){0===e.code?t(e.data):n(new Error(e.message))},function(e){n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var C=n(231),E={};t.default={isSelf:r,isSameUser:d,isCreator:a,isMember:s,isAdmin:l,isEnterpriseStandard:u,isEnterpriseDingding:c,hasPermissionRemoveUserFromTeam:p,searchByKeyword:f,getUserInfoByEmail:h,addNewShareUsers:m,getRecentMember:v,getTeamMembers:y,deleteShareUser:g,getMyPermission:b,searchByEmail:w},e.exports=t.default}).call(t,n(4),n(170))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=n(425);e.exports=o},function(e,t,n){var o=n(426),i=function(){try{var e=o(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){function o(e,t){var n=r(e,t);return i(n)?n:void 0}var i=n(427),r=n(439);e.exports=o},function(e,t,n){function o(e){if(!a(e)||r(e))return!1;var t=i(e)?h:u;return t.test(s(e))}var i=n(428),r=n(436),a=n(435),s=n(438),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,p=c.toString,f=d.hasOwnProperty,h=RegExp("^"+p.call(f).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=o},function(e,t,n){function o(e){if(!r(e))return!1;var t=i(e);return t==s||t==l||t==a||t==u}var i=n(429),r=n(435),a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";e.exports=o},function(e,t,n){function o(e){return null==e?void 0===e?l:s:u&&u in Object(e)?r(e):a(e)}var i=n(430),r=n(433),a=n(434),s="[object Null]",l="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=o},function(e,t,n){var o=n(431),i=o.Symbol;e.exports=i},function(e,t,n){var o=n(432),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();e.exports=r},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){function o(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var o=!0}catch(e){}var i=s.call(e);return o&&(t?e[l]=n:delete e[l]),i}var i=n(430),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,l=i?i.toStringTag:void 0;e.exports=o},function(e,t){function n(e){return i.call(e)}var o=Object.prototype,i=o.toString;e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function o(e){return!!r&&r in e}var i=n(437),r=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=o},function(e,t,n){var o=n(431),i=o["__core-js_shared__"];e.exports=i},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var o=Function.prototype,i=o.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},,,,,,,,function(e,t,n){function o(e){return a(e)?i(e):r(e)}var i=n(448),r=n(462),a=n(466);e.exports=o},function(e,t,n){function o(e,t){var n=a(e),o=!n&&r(e),c=!n&&!o&&s(e),p=!n&&!o&&!c&&u(e),f=n||o||c||p,h=f?i(e.length,String):[],m=h.length;for(var v in e)!t&&!d.call(e,v)||f&&("length"==v||c&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||l(v,m))||h.push(v);return h}var i=n(449),r=n(450),a=n(453),s=n(454),l=n(456),u=n(457),c=Object.prototype,d=c.hasOwnProperty;e.exports=o},function(e,t){function n(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}e.exports=n},function(e,t,n){var o=n(451),i=n(452),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){function o(e){return r(e)&&i(e)==a}var i=n(429),r=n(452),a="[object Arguments]";e.exports=o},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var o=n(431),i=n(455),r="object"==typeof t&&t&&!t.nodeType&&t,a=r&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===r,l=s?o.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||i;e.exports=c}).call(t,n(5)(e))},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){return t=null==t?o:t,!!t&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var o=n(458),i=n(460),r=n(461),a=r&&r.isTypedArray,s=a?i(a):o;e.exports=s},function(e,t,n){function o(e){return a(e)&&r(e.length)&&!!N[i(e)]}var i=n(429),r=n(459),a=n(452),s="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Function]",f="[object Map]",h="[object Number]",m="[object Object]",v="[object RegExp]",y="[object Set]",g="[object String]",b="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",E="[object Float32Array]",T="[object Float64Array]",P="[object Int8Array]",k="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",S="[object Uint8ClampedArray]",x="[object Uint16Array]",M="[object Uint32Array]",N={};N[E]=N[T]=N[P]=N[k]=N[_]=N[O]=N[S]=N[x]=N[M]=!0,N[s]=N[l]=N[w]=N[u]=N[C]=N[c]=N[d]=N[p]=N[f]=N[h]=N[m]=N[v]=N[y]=N[g]=N[b]=!1,e.exports=o},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;e.exports=n},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var o=n(432),i="object"==typeof t&&t&&!t.nodeType&&t,r=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=r&&r.exports===i,s=a&&o.process,l=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=l}).call(t,n(5)(e))},function(e,t,n){function o(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=n(463),r=n(464),a=Object.prototype,s=a.hasOwnProperty;e.exports=o},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||o;return e===n}var o=Object.prototype;e.exports=n},function(e,t,n){var o=n(465),i=o(Object.keys,Object);e.exports=i},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function o(e){return null!=e&&r(e.length)&&!i(e)}var i=n(428),r=n(459);e.exports=o},,,,,,,,,,function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e){return"symbol"==typeof e||r(e)&&i(e)==a}var i=n(429),r=n(452),a="[object Symbol]";e.exports=o},,,,,,,,,,,function(e,t){function n(e){return e}e.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(649),d=o(c),p=n(166),f=o(p),h=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={activeIndex:-1,urlList:[]},this.onGalleryClosed=this.onGalleryClosed.bind(this),this.onIndexChanged=this.onIndexChanged.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{type:l.PropTypes.string}}}]),a(t,[{key:"componentDidMount",value:function(){this.bindBCEvent()}},{key:"bindBCEvent",value:function(){var e=this,t=function(){var t=-1,n=[],o=!1;e.setState({activeIndex:t,urlList:n,show:o})};f.default.attach("img:preview",function(t,n){if(cow.pageType===e.props.type){var o=!0;e.setState({activeIndex:t,urlList:n,show:o})}}),f.default.attach("doc:goback",function(){t()}),f.default.attach("spreadsheet:exit",function(){t()})}},{key:"onGalleryClosed",value:function(){"doc"===cow.pageType?f.default.notify("body:removeOverflowHidden"):"spreadsheet"===cow.pageType&&window.tableInst.listen(),this.setState({show:!1,activeIndex:-1,urlList:[]})}},{key:"onIndexChanged",value:function(e){this.setState({activeIndex:e})}},{key:"render",value:function(){var e=this.state,t=e.activeIndex,n=e.urlList,o=e.show;return 0===n.length?null:u.default.createElement(d.default,{activeIndex:t,onClosed:this.onGalleryClosed,onIndexChanged:this.onIndexChanged,show:o,urlList:n})}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){(function(o){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=i(u),d=n(650),p=i(d),f=n(651),h=i(f),m=n(652),v=i(m),y=n(285),g=i(y),b=n(655),w=i(b),C=n(165),E=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={imageOriginWidth:0,imageOriginHeight:0,imageCurrentWidth:0,imageCurrentHeight:0,imageScale:0,imageStyle:{},disableAction:!0},this.scaleSteps=[.1,.25,.33,.5,.65,.8,1,1.25,1.5,2,2.5,3,3.5,4],this.exitPreview=this.exitPreview.bind(this),this.onKeyup=this.onKeyup.bind(this),this.zoomIn=this.zoomIn.bind(this),this.zoomOut=this.zoomOut.bind(this),this.onImageLoaded=this.onImageLoaded.bind(this),this.onImageStartLoad=this.onImageStartLoad.bind(this),this.onViewerResize=this.onViewerResize.bind(this),this.pan=this.pan.bind(this),this.displayFixedExtent=this.displayFixedExtent.bind(this),this.displayOriginScale=this.displayOriginScale.bind(this)}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{activeIndex:u.PropTypes.number,urlList:u.PropTypes.array,show:u.PropTypes.bool,onClosed:u.PropTypes.func.isRequired,onIndexChanged:u.PropTypes.func.isRequired}}}]),s(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.onKeyup)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.onKeyup)}},{key:"exitPreview",value:function(){this.props.onClosed()}},{key:"changeIndex",value:function(e){this.props.onIndexChanged(e)}},{key:"stopEvent",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"onImageStartLoad",value:function(){this.setState({disableAction:!0})}},{key:"onImageLoaded",value:function(e,t,n){var o=this,i=e.height,r=e.width,a=t.height,s=t.width,l=n.height-50,u=n.width,c=!1;this.setState({imageCurrentWidth:s,imageCurrentHeight:a,imageOriginWidth:r,imageOriginHeight:i,viewerHeight:l,viewerWidth:u,disableAction:c},function(){o.calcImageSize()})}},{key:"calcImageSize",value:function(){var e=this.state,t=e.imageOriginHeight,n=e.imageOriginWidth,o=e.viewerWidth,i=e.viewerHeight,r=this.state,a=r.imageCurrentWidth,s=r.imageCurrentHeight,l=n,u=t,c=u/t,d="0px",p=t/n;if(t>=i&&p<=1.8||n>=o){var f=.9*i/t,h=.9*o/n;c=f>h?h:f,l=n*c,u=t*c}u<=i&&(d=.5*(i-u)+"px");var m=.5*(o-l)+"px",v={position:"absolute",top:d,left:m,maxHeight:"none",maxWidth:"none",width:l,height:u,margin:0};a=l,s=u,this.fixedScale=c,this.fixedOffsetTop=d,this.fixedOffsetLeft=m,this.setState({imageCurrentWidth:a,imageCurrentHeight:s,imageOriginWidth:n,imageOriginHeight:t,imageStyle:v,imageScale:c})}},{key:"zoomIn",value:function(){this.resizeImage(this.getNextScale("zoomIn"))}},{key:"zoomOut",value:function(){this.resizeImage(this.getNextScale("zoomOut"))}},{key:"getNextScale",value:function(e){var t=this.state.imageScale,n=0,o=this.scaleSteps,i=o.length;for(n=0;n<i;n++){var r=o[n];if(t<=r){t="zoomIn"===e&&r-t<.1&&n<i-1?o[n+1]:"zoomOut"===e&&t-r<.1&&n>0?o[n-1]:r;break}}return t}},{key:"pan",value:function(e,t){var n=o.assign({},this.state.imageStyle),i=this.state,r=i.viewerHeight,a=i.viewerWidth;if(a=parseInt(a,10),r=parseInt(r,10),parseInt(n.width,10)>a){var s=this.getMinLeft();t=t>10?10:t,t=t<s?s:t}if(parseInt(n.height,10)>r){var l=this.getMinTop();e=e>10?10:e,e=e<l?l:e}n.top=e+"px",n.left=t+"px",this.setState({imageStyle:n})}},{key:"displayOriginScale",value:function(){this.resizeImage(1)}},{key:"displayFixedExtent",value:function(){var e=this;this.calcImageSize(),setTimeout(function(){e.resizeImage(e.fixedScale)},10)}},{key:"resizeImage",value:function(e){var t=this.state,n=t.imageOriginHeight,i=t.imageOriginWidth,r=t.imageCurrentWidth,a=t.imageCurrentHeight,s=t.imageStyle,l=t.viewerWidth,u=t.viewerHeight,c=s.top,d=s.left;c=parseInt(c,10),d=parseInt(d,10);var p=o.assign({},s),f=n*e,h=i*e;p.width=h,p.height=f;var m=.5*l,v=.5*u;c=f<u?.5*(u-f):v-(v-c)*f/a,d=h<l?.5*(l-h):m-(m-d)*h/r,p.top=c+"px",p.left=d+"px",this.setState({imageStyle:p,imageScale:e,imageCurrentHeight:f,imageCurrentWidth:h})}},{key:"onViewerResize",value:function(e){var t=this;this.setState({viewerWidth:e.width,viewerHeight:e.height},function(){t.calcImageSize()})}},{key:"getMinLeft",value:function(){var e=this.state.viewerWidth,t=this.state.imageStyle;e=parseInt(e,10);var n=parseInt(t.width,10),o=e-n-10;return o}},{key:"getMinTop",value:function(){var e=this.state.viewerHeight,t=this.state.imageStyle;e=parseInt(e,10);var n=parseInt(t.height,10),o=e-n-10;return o}},{key:"onKeyup",value:function(e){var t=this.props,n=t.activeIndex,o=t.urlList,i=t.show,r=this.state,a=r.viewerWidth,s=r.imageStyle;if(!i)return this.stopEvent(e);if(e.keyCode===C.keyCodes.DOWN&&n<o.length-1)this.changeIndex(n+1);else if(e.keyCode===C.keyCodes.UP&&n>0)this.changeIndex(n-1);else if(e.keyCode===C.keyCodes.ESC)this.exitPreview();else if(e.keyCode===C.keyCodes.LEFT||e.keyCode===C.keyCodes.RIGHT){var l="number"==typeof a&&a<parseInt(s.width,10),u=parseInt(s.left,10),c=parseInt(s.width,10),d=e.keyCode===C.keyCodes.LEFT?1:-1,p=u-.1*c*d;l&&this.pan(parseInt(s.top,10),p)}return this.stopEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.activeIndex,n=e.show,o=e.urlList,i=e.onIndexChanged,r=this.state,a=r.imageStyle,s=r.imageScale,l=r.viewerHeight,u=r.viewerWidth,d=r.disableAction;if("boolean"==typeof n&&!n||!o&&0===o.length)return null;var f=t>-1&&t<o.length?o[t]:"",m=f.replace(/!thumbnail$/i,""),y=(0,g.default)({modal:t>-1,"gallery-box":!0,"thumb-show":o.length>0}),b=this.scaleSteps,C=s!==b[b.length-1],E=s!==b[0],T=1!==s,P=this.fixedOffsetLeft!==a.left||this.fixedOffsetTop!==a.top||this.fixedScale!==s,k="number"==typeof l&&l<a.height,_="number"==typeof u&&u<a.width;return c.default.createElement("div",{className:y},c.default.createElement(v.default,{imageUrl:m,imageStyle:a||{},enableVerticalScroll:k,enableHorizontalScroll:_,pan:this.pan,onImageStartLoad:this.onImageStartLoad,onViewerResize:this.onViewerResize,onImageLoaded:this.onImageLoaded,exitPreview:this.exitPreview}),c.default.createElement(h.default,{activeIndex:t,urlList:o,onIndexChanged:i}),c.default.createElement(p.default,{zoomIn:this.zoomIn,zoomOut:this.zoomOut,disableAction:d,displayOriginScale:this.displayOriginScale,displayFixedExtent:this.displayFixedExtent,enableZoomIn:C,enableZoomOut:E,enableFixedExtent:P,enableOriginScale:T,activeIndex:t,totalCount:o.length,imageUrl:f}),c.default.createElement(w.default,{urlList:o}))}}]),t}(u.Component);t.default=E,e.exports=t.default}).call(t,n(4))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleZoomIn=this.handleZoomIn.bind(this),this.handleZoomOut=this.handleZoomOut.bind(this),this.handleDisplayOriginScale=this.handleDisplayOriginScale.bind(this),this.handleDisplayFixedExtent=this.handleDisplayFixedExtent.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{activeIndex:l.PropTypes.number.isRequired,totalCount:l.PropTypes.number.isRequired,imageUrl:l.PropTypes.string.isRequired,zoomIn:l.PropTypes.func.isRequired,zoomOut:l.PropTypes.func.isRequired,displayOriginScale:l.PropTypes.func.isRequired,displayFixedExtent:l.PropTypes.func.isRequired,enableZoomIn:l.PropTypes.bool,enableZoomOut:l.PropTypes.bool,enableOriginScale:l.PropTypes.bool,enableFixedExtent:l.PropTypes.bool,disableAction:l.PropTypes.bool}}}]),a(t,[{key:"handleZoomIn",value:function(e){/ disable/.test(e.target.className)||this.props.zoomIn()}},{key:"handleZoomOut",value:function(e){/ disable/.test(e.target.className)||this.props.zoomOut()}},{key:"handleDisplayOriginScale",value:function(e){/ disable/.test(e.target.className)||this.props.displayOriginScale()}},{key:"handleDisplayFixedExtent",value:function(e){/ disable/.test(e.target.className)||this.props.displayFixedExtent()}},{key:"render",value:function(){var e=this.props,t=e.activeIndex,n=e.totalCount,o=e.imageUrl,i=e.disableAction,r=this.props,a=r.enableZoomIn,s=r.enableZoomOut,l=r.enableOriginScale,c=r.enableFixedExtent,d="/download/image?url=",p="gallery-action-item",f="gallery-toolbar-icons gallery-toolbar-",h=n>1?t+1+"/"+n:"";return u.default.createElement("div",{className:"gallery-details"},u.default.createElement("span",{className:"gallery-detail-text"},u.default.createElement("number",{
className:"gallery-detail-number"},h)),u.default.createElement("div",{className:"gallery-action"},u.default.createElement("a",{className:p+(i||!a?" disable":""),href:"javascript:void(0)",onClick:this.handleZoomIn},u.default.createElement("i",{className:f+"zoom-in"}),u.default.createElement("span",{className:"tooltip s-tooltip top"},"放大")),u.default.createElement("a",{className:p+(i||!s?" disable":""),href:"javascript:void(0)",onClick:this.handleZoomOut},u.default.createElement("i",{className:f+"zoom-out"}),u.default.createElement("span",{className:"tooltip s-tooltip top"},"缩小")),u.default.createElement("a",{className:p+(i||!l?" disable":""),href:"javascript:void(0)",onClick:this.handleDisplayOriginScale},u.default.createElement("i",{className:f+"origin-scale"}),u.default.createElement("span",{className:"tooltip s-tooltip top"},"实际大小")),u.default.createElement("a",{className:p+(i||!c?" disable":""),href:"javascript:void(0)",onClick:this.handleDisplayFixedExtent},u.default.createElement("i",{className:f+"fixed-extent"}),u.default.createElement("span",{className:"tooltip s-tooltip top"},"适应页面")),u.default.createElement("a",{className:p,href:d+o,target:"_blank",title:"下载图片"},u.default.createElement("i",{className:f+"link-download"}),u.default.createElement("span",{className:"tooltip s-tooltip top"},"下载原图"))))}}]),t}(l.Component);t.default=c,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(285),d=o(c),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.renderListItem=this.renderListItem.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{urlList:l.PropTypes.array.isRequired,activeIndex:l.PropTypes.number.isRequired,onIndexChanged:l.PropTypes.func.isRequired}}}]),a(t,[{key:"onListItemClick",value:function(e,t){var n=this.props,o=n.activeIndex,i=n.onIndexChanged;return o===e?void t.stopPropagation():void i(e)}},{key:"renderListItem",value:function(e,t){var n=this.props.activeIndex,o={"gallery-list-item":!0,thumb:!0,active:n===t};return u.default.createElement("p",{className:(0,d.default)(o),onClick:this.onListItemClick.bind(this,t),key:t},u.default.createElement("img",{className:"gallery-list-img",src:e}))}},{key:"render",value:function(){var e=this.props.urlList;return u.default.createElement("div",{className:"gallery-list"},e.map(this.renderListItem))}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){(function(o){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=i(u),d=n(653),p=i(d),f=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isLoading:!0},this.downTimer=-1,this.isMoving=!1,this.isMouseDown=!1,this.onViewerClick=this.onViewerClick.bind(this),this.onLoad=this.onLoad.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onWheel=this.onWheel.bind(this),this.onMouseOut=this.onMouseOut.bind(this)}return a(t,e),s(t,null,[{key:"propTypes",get:function(){return{imageUrl:u.PropTypes.string.isRequired,exitPreview:u.PropTypes.func,onImageLoaded:u.PropTypes.func,imageStyle:u.PropTypes.object,onViewerResize:u.PropTypes.func,pan:u.PropTypes.func,enableVerticalScroll:u.PropTypes.bool,enableHorizontalScroll:u.PropTypes.bool}}}]),s(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillReceiveProps",value:function(e){e.imageUrl!==this.props.imageUrl&&this.setState({isLoading:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function(){var e={width:this.refs.viewerWrapper.offsetWidth,height:this.refs.viewerWrapper.offsetHeight-50};this.viewerSize=e,this.props.onViewerResize(e)}},{key:"onLoad",value:function(e){var t=this,n=e.target,o={width:n.naturalWidth,height:n.naturalHeight},i={width:n.width,height:n.height},r={width:this.refs.viewerWrapper.offsetWidth,height:this.refs.viewerWrapper.offsetHeight};this.viewerSize=r,this.setState({isLoading:!1},function(){t.props.onImageLoaded(o,i,r)})}},{key:"onViewerClick",value:function(){var e=this.props.exitPreview;this.isMoving?this.isMoving=!1:this.wasOuted?this.wasOuted=!1:"function"==typeof e&&e(),this.downTimer>-1&&(clearTimeout(this.downTimer),this.downTimer=-1)}},{key:"onMouseDown",value:function(e){var t=this;this.isMouseDown=!0,this.lastMousePosition={x:e.clientX,y:e.clientY},this.downTimer>-1&&clearTimeout(this.downTimer),this.downTimer=setTimeout(function(){t.isMoving=!0,console.log(t.isMoving)},200)}},{key:"onMouseMove",value:function(e){if(this.isMouseDown){this.downTimer>-1&&(this.isMoving=!0,clearTimeout(this.downTimer),this.downTimer=-1);var t=this.props,n=t.enableVerticalScroll,i=t.enableHorizontalScroll,r=o.assign({},this.props.imageStyle),a=r.top,s=r.left;s=parseInt(s,10),i&&(s+=e.clientX-this.lastMousePosition.x),a=parseInt(a,10),n&&(a+=e.clientY-this.lastMousePosition.y),this.lastMousePosition={x:e.clientX,y:e.clientY},this.props.pan(a,s)}}},{key:"onMouseOut",value:function(){this.isMoving&&(this.isMoving=!1,this.isMouseDown=!1,this.wasOuted=!0),this.downTimer>-1&&(clearTimeout(this.downTimer),this.downTimer=-1)}},{key:"onMouseUp",value:function(){this.isMouseDown=!1}},{key:"onWheel",value:function(e){var t=o.assign({},this.props.imageStyle),n=this.props,i=n.enableVerticalScroll,r=n.enableHorizontalScroll,a=t.top,s=t.left;a=parseInt(a,10),s=parseInt(s,10),r&&(s-=e.deltaX),i&&(a-=e.deltaY),(r||i)&&this.props.pan(a,s),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.imageUrl,n=e.imageStyle,i=!1,r=o.assign({},n);return this.state.isLoading&&(r=o.assign(r,{opacity:"0",width:"0px",height:"0px"})),c.default.createElement("div",{className:"gallery-img-box sheet-gallery-img-box",ref:"viewerWrapper",onWheel:this.onWheel,onMouseMove:this.onMouseMove,onMouseOut:this.onMouseOut,onClick:this.onViewerClick},c.default.createElement(p.default,{show:this.state.isLoading}),c.default.createElement("img",{src:t,className:"gallery-img sheet-gallery-img",style:r||{},draggable:i,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onLoad:this.onLoad}),c.default.createElement("a",{className:"hidden-link",href:"javascript:void(0)"}))}}]),t}(u.Component);t.default=f,e.exports=t.default}).call(t,n(4))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(654),d=o(c),p=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"render",value:function(){if(this.props.show){var e={backgroundColor:this.props.overlayColor||"transparent",position:"absolute",top:"0",right:"0",bottom:"0",left:"0"};return u.default.createElement("div",{style:e},u.default.createElement(d.default,{size:this.props.size}))}return null}}],[{key:"propTypes",get:function(){return{overlayColor:l.PropTypes.string,show:l.PropTypes.bool,size:l.PropTypes.number}}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"render",value:function(){var e={};return this.props.size&&(e.fontSize=this.props.size+"px"),u.default.createElement("div",{className:"spinner-wrap",style:e},u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}),u.default.createElement("div",{className:"spinner-blade"}))}}],[{key:"propTypes",get:function(){return{size:l.PropTypes.number}}}]),t}(l.Component);t.default=c,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"renderImageObjecList",value:function(){var e=this.props.urlList;return e.map(function(e,t){return u.default.createElement("li",{key:t},u.default.createElement("object",{data:e.replace(/!thumbnail$/i,"")}))})}},{key:"render",value:function(){var e={position:"fixed",overflow:"hidden",width:"0px",height:"0px",opatity:0,top:"-1000px",left:"-1000px"};return u.default.createElement("ul",{className:"image-gallery-pre-loader",style:e},this.renderImageObjecList())}}],[{key:"propTypes",get:function(){return{urlList:l.PropTypes.array}}}]),t}(l.Component);t.default=c,e.exports=t.default},,,,,,,,,function(e,t,n){(function(o){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=i(u),d=n(665),p=i(d),f=n(161),h=n(666),m=i(h),v=n(175),y=i(v),g=n(184),b=i(g),w=n(263),C=i(w),E=n(668),T=i(E),P=n(166),k=i(P),_=n(676),O=i(_),S=n(311),x=i(S),M=n(266),N=i(M),j=n(190),I=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={open:!1,isEnableShare:!1,readOnly:!1,editable:!1,listOrWechat:0,recentUserList:[],copyStatus:""},this.onTeamworkerClose=this.onTeamworkerClose.bind(this),this.onShareUsersChanged=this.onShareUsersChanged.bind(this),this.onShareClose=this.onShareClose.bind(this),this.changeShareState=this.changeShareState.bind(this),this.onShareOpen=this.onShareOpen.bind(this),this.onShareClose=this.onShareClose.bind(this),this.changeShareState=this.changeShareState.bind(this),this.onWechatTap=this.onWechatTap.bind(this),this.listUpdate=this.listUpdate.bind(this),this.onToggleBtn=this.onToggleBtn.bind(this),this.componentClick=this.componentClick.bind(this)}return a(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.init(),k.default.attach("doc:init",function(){e.init()})}},{key:"componentDidUpdate",value:function(){this.initCopy()}},{key:"sortUserList",value:function(e){var t=[];return e&&e.length>0&&(t=e.sort(function(e,t){return t.status-e.status}).sort(function(e,t){return!!t.isSelf-!!e.isSelf}).sort(function(e,t){return t.isOwner-e.isOwner})),t}},{key:"onTeamworkerClose",value:function(){}},{key:"onShareUsersChanged",value:function(e){var t=this;if(e){var n=e.type,o=e.users;if("add"===n){var i=this.state.shareList;i=i.concat(o),this.setState({shareList:i})}else"remove"===n&&o.forEach(function(e){t.removeMember(e)})}}},{key:"componentClick",value:function(){this.state.open&&this.setState({open:!1})}},{key:"onToggleBtn",value:function(){N.default.checkIsWelcomeFile()&&k.default.notify("guideTip:visible",{index:5,value:!1}),this.setState({open:!this.state.open})}},{key:"onShareOpen",value:function(){this.changeShareState("readonly")}},{key:"onShareClose",value:function(){this.changeShareState("private")}},{key:"onCopy",value:function(){}},{key:"changeShareStatusAjax",value:function(e,t){var n="";(0,j.isSheet)(cow.pageType)?n=cow.currentSheetGuid:(0,j.isDoc)(cow.pageType)&&(n=cow.currentDocGuid),y.default.post("/external_link/"+n,{mode:e}).then(function(e){if("function"==typeof t)if(0===e.code)t(!0,e.data),y.default.alert({type:"alert",title:"设置成功"});else{t(!1);var n={type:"error",title:e.error};e.error.length>=20&&(n.title="设置失败",n.content=e.error),y.default.alert(n)}}).fail(function(){y.default.alert({type:"error",title:"设置失败"}),"function"==typeof t&&t(!1)})}},{key:"onWechatTap",value:function(){this.state.isEnableShare&&this.setState({listOrWechat:2===this.state.listOrWechat?0:2})}},{key:"listUpdate",value:function(e){this.setState({listOrWechat:e})}},{key:"showTeamworker",value:function(){this.refs.teamworker.show(),this.setState({open:!1})}},{key:"closeTeamworker",value:function(){this.refs.teamworker.close()}},{key:"updateShareState",value:function(e){var t={isEnableShare:!1,readOnly:!1,editable:!1};"private"===e?t.isEnableShare=!1:"readonly"===e?(t.isEnableShare=!0,t.readOnly=!0):"editable"===e&&(t.isEnableShare=!0,t.editable=!0),this.setState(t)}},{key:"changeShareState",value:function(e){var t=this,n=cow.shareStatus;n!==e&&this.changeShareStatusAjax(e,function(n){n&&t.updateShareState(e)})}},{key:"init",value:function(){this.initShareStatus(),this.setState({shareList:[]})}},{key:"initShareStatus",value:function(){var e=this,t="";(0,j.isSheet)(cow.pageType)?t=cow.currentSheetGuid:(0,j.isDoc)(cow.pageType)&&(t=cow.currentDocGuid),C.default.getShareStatusByGuid(t).then(function(n){if(t===cow.currentFile.guid){cow.shareStatus=n;var o=n.mode;e.updateShareState(o),e.initPush(),e.initCopy()}})}},{key:"initCopy",value:function(){var e=new T.default(this.refs.share_copy);e.on("success",function(){y.default.alert({title:"复制成功！",delay:1500,type:"alert"})}),e.on("error",function(){y.default.alert({title:"复制失败！",delay:1500,type:"error"})})}},{key:"initPush",value:function(){var e=this;b.default.bind("ExternalLink",function(t){cow.shareStatus=t.data,e.updateShareState(t.data.mode),e.refs["permission-list"]&&e.refs["permission-list"].updateShareState(t.data.mode)})}},{key:"removeMember",value:function(e){var t=this.state.shareList;if(t.some(function(n,o){return!!x.default.isSameUser(e,n)&&(t.splice(o,1),!0)}),this.setState({shareList:t}),x.default.isSelf(e))if(this.closeTeamworker(),o.len>0)o.back();else{var n="number"==typeof cow.currentFile.id?cow.currentFile:cow.tempCurrentFile,i="/";window.cow.authorized?n.parent&&n.parent.guid&&(i="/folder/"+n.parent.guid):i="/login",o(i)}}},{key:"render",value:function(){var e=this.state.open?"":"hide",t=null,n=null,o=null,i=null,r=null,a=this.state.shareList||[];a=[].concat(a),a=this.sortUserList(a.map(function(e){return e.id===cow.currentUser.id?e.isSelf=!0:e.isSelf=!1,e})),1===a.length&&a[0].isOwner&&(a.length=0);var s=0===cow.currentFile.type?"文档":"表格",l=0===cow.currentFile.type?"doc":"sheet";if(this.state.isEnableShare){var u="此"+s+"已分享";a.length>0&&(u+=", "+a.length+"位成员参与协作"),t=c.default.createElement("div",{className:"panel-head doc-share-header"},c.default.createElement("span",{className:"doc-share-header-icon doc-share-icon active"}),c.default.createElement("span",null,u)),o=c.default.createElement("span",{className:"doc-share-open",onClick:this.onShareClose},"点击关闭"),i=c.default.createElement(m.default,{listUpdate:this.listUpdate,readOnly:this.state.readOnly,editable:this.state.editable,onChangeShareState:this.changeShareState,listOrWechat:this.state.listOrWechat,ref:"permission-list"}),2===this.state.listOrWechat&&(r=c.default.createElement("div",{className:"doc-qr-box"},c.default.createElement("img",{className:"doc-qr-img",alt:"微信二维码",src:y.default.getQrImageUrl(114,location.href)}),c.default.createElement("div",{className:"doc-qr-info"},"微信扫一扫"),c.default.createElement("div",{className:"doc-qr-info"},"分享此"+s+"给好友")))}else t=c.default.createElement("div",{className:"panel-head doc-share-header"},c.default.createElement("span",{className:"doc-share-header-icon doc-share-icon"}),c.default.createElement("span",null,"私有"+s+"，只有成员可以访问")),o=c.default.createElement("span",{className:"doc-share-open",onClick:this.onShareOpen},"点击开启");n=c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{className:"doc-share-link"},c.default.createElement("div",{className:"doc-share-item-title"},c.default.createElement("span",null,"分享链接"),o),c.default.createElement("div",{className:"doc-link-input-box "+this.state.copyStatus+(this.state.isEnableShare?"":"closed")},c.default.createElement("input",{ref:"link-input",className:"doc-link-input",readOnly:"true",value:location.href}),c.default.createElement("input",{id:l+"-link-input",className:"doc-link-input-hidden",readOnly:!0,value:location.href+" 「"+y.default.cutName(cow.currentFile.name,30)+"」"}),c.default.createElement("span",{ref:"share_copy",className:"doc-share-copy","data-clipboard-action":"copy","data-clipboard-target":"#"+l+"-link-input",onTouchTap:this.onCopy},"复制链接"),c.default.createElement(f.IconButton,{customClass:"doc-link-qr btn",iconBtnClass:"doc-qr-icon doc-share-social-icon",onBtnTap:this.onWechatTap})),i,r));var d=+cow.currentFile.id,p=+cow.currentFile.user_id,h=cow.currentFile.guid,v=+cow.currentFile.type;return c.default.createElement("div",{className:"share-btn-wrap"},c.default.createElement("div",{className:"s-btn sm-share-btn "+(this.state.open?"active":""),onTouchTap:this.onToggleBtn},"分享"),c.default.createElement("div",{className:"sheet-share-dropdown with-trangle "+e},t,n),c.default.createElement(O.default,{ref:"teamworker",fileId:d,fileGuid:h,fileUserId:p,fileType:v,onClose:this.onTeamworkerClose,shareList:this.state.shareList,onShareUsersChanged:this.onShareUsersChanged}))}}]),t}(u.Component);t.default=(0,p.default)(I),e.exports=t.default}).call(t,n(176))},,function(e,t,n){var o=n(7),i=n(667);e.exports=o.createClass({displayName:"exports",getInitialState:function(){var e=0;return this.props.readOnly?e=0:this.props.editable&&(e=1),{permisstion:e}},render:function(){var e,t=[{state:0,type:"readonly",info:"只读",details:"获得链接的人可以查看"},{state:1,type:"editable",info:"可写",details:"获得链接的人可以查看和编辑"}],n="更改";return 1===this.props.listOrWechat&&(n="收起",e=o.createElement("div",null,o.createElement(i,{data:t[0],onTap:this.onTap,active:this.props.readOnly}),o.createElement(i,{data:t[1],onTap:this.onTap,active:this.props.editable}))),o.createElement("div",{className:"doc-link-info"},"链接权限:",o.createElement("span",{className:"doc-link-info-text"},t[this.state.permisstion].info),o.createElement("span",{className:"doc-link-change",onTouchTap:this._permissionChange},n),e)},onTap:function(e,t){t.state!==this.state.permisstion&&(this.setState({permisstion:t.state}),this.props.onChangeShareState(t.type),this._closePermisstion())},updateShareState:function(e){var t=0;"private"===e?t=0:"readonly"===e?t=0:"editable"===e&&(t=1),this.setState({permisstion:t})},_permissionChange:function(){this.props.listUpdate(1===this.props.listOrWechat?0:1)},_closePermisstion:function(){this.props.listUpdate(0)}})},function(e,t,n){var o=n(7);e.exports=o.createClass({displayName:"exports",propTypes:{data:o.PropTypes.object,onTap:o.PropTypes.func},_onTap:function(e){var t=this.props;t.onTap&&t.onTap(e,t.data)},render:function(){var e=this.props,t=e.active?" active":"",n=e.data;return o.createElement("div",{className:"permission-item "+t,onTouchTap:this._onTap},o.createElement("span",{className:"permission-check-item doc-share-icon"}),o.createElement("span",{className:"permission-item-1"},n.info),o.createElement("span",{className:"permission-item-2"},n.details))}})},function(e,t,n){var o,i,r;!function(a,s){i=[e,n(669),n(671),n(672)],o=s,r="function"==typeof o?o.apply(t,i):o,!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=i(t),c=i(n),d=i(o),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=function(e){function t(e,n){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.resolveOptions(n),o.listenClick(e),o}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(c.default);e.exports=f})},function(e,t,n){var o,i,r;!function(a,s){i=[e,n(670)],o=s,r="function"==typeof o?o.apply(t,i):o,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(t),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(t){o(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,n)),this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(e),n.removeAllRanges(),n.addRange(o),t=n.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function o(){i.off(e,o),t.apply(n,arguments)}var i=this;return o._=t,this.on(e,o,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),o=0,i=n.length;
for(o;o<i;o++)n[o].fn.apply(n[o].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),o=n[e],i=[];if(o&&t)for(var r=0,a=o.length;r<a;r++)o[r].fn!==t&&o[r].fn._!==t&&i.push(o[r]);return i.length?n[e]=i:delete n[e],this}},e.exports=n},function(e,t,n){function o(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return i(e,t,n);if(s.nodeList(e))return r(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function r(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=n(673),l=n(674);e.exports=o},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,n){function o(e,t,n,o,r){var a=i.apply(this,arguments);return e.addEventListener(n,a,r),{destroy:function(){e.removeEventListener(n,a,r)}}}function i(e,t,n,o){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&o.call(e,n)}}var r=n(675);e.exports=o},function(e,t){function n(e,t){for(;e&&e.nodeType!==o;){if(e.matches(t))return e;e=e.parentNode}}var o=9;if(Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}e.exports=n},function(e,t,n){(function(o){function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=i(c),p=n(677),f=i(p),h=n(685),m=i(h),v=n(334),y=i(v),g=n(167),b=i(g),w=n(311),C=i(w),E=n(175),T=i(E),P=n(686),k=i(P),_=y.default.initLimition(),O=function(e){function t(e){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n={};n={memberDialogOpen:!1,shareDialogOpen:!1,disableAddUser:!0};var o=e.shareList;e.fileGuid;o?n.shareList=[].concat(r(e.shareList)):n.shareList=[],this.state=n}return s(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.shareList&&!this._isSameUserList(e.shareList,this.state.shareList)){var n=[].concat(r(e.shareList));this._attachPermission(n).then(function(e){t.setState({shareList:e.userList,fileTeamId:e.fileTeamId,disableAddUser:e.disableAddUser})},function(e){console.dir(e)})}}},{key:"_attachPermission",value:function(e){var t=this;return new o(function(n,o){!e||e&&0===e.length?n({userList:e}):!function(){var i=t.props.fileGuid,r=t.props.fileUserId,a=cow.currentUser,s=!0;k.default.getFileTeamInfo(i).then(function(t){var o=t.team_id||t.teamId;r===a.id?(e.map(function(e){e.canBeRemove=!0}),s=!1):o?(C.default.isEnterpriseStandard(a)||C.default.isEnterpriseDingding(a))&&o===a.team_id?(s=!1,e.map(function(e){"admin"===a.team_role&&e.id!==r&&"admin"!==e.team_role&&"creator"!==e.team_role?e.canBeRemove=!0:"creator"===a.team_role?e.canBeRemove=!0:e.canBeRemove=C.default.isSelf(e,a)})):(s=!0,e.map(function(e){e.canBeRemove=C.default.isSelf(e,a)})):(s=!1,e.map(function(e){e.canBeRemove=C.default.isSelf(e,a)})),n({disableAddUser:s,userList:e,fileTeamId:o})},function(e){o(e)})}()})}},{key:"_isSameUserList",value:function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;var n=!0;return e.some(function(e,o){return!C.default.isSameUser(e,t[o])&&(n=!1,!0)}),n}},{key:"close",value:function(){this._hideAllDialog()}},{key:"show",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];!e&&this._shouldShowMemberDialogFirst()?this.state.memberDialogOpen||this._showMemberDialog():this.state.shareDialogOpen||this._showShareDialog()}},{key:"_shouldShowMemberDialogFirst",value:function(e){var t=this.state.shareList,n=this.props.fileGuid;return e&&(t=e),!!(t&&1===t.length&&t[0].isOwner&&!n&&["doc","spreadsheet","sheet"].indexOf(cow.pageType)>-1)}},{key:"_showMemberDialog",value:function(){var e=this;C.default.getRecentMember().then(function(t){if(0===+t.code){var n=(t.data||[]).filter(function(e){return+e.status>-1});e.setState({memberDialogOpen:!0,shareDialogOpen:!1,recentUserList:n})}},function(){}),(C.default.isEnterpriseStandard(cow.currentUser)||C.default.isEnterpriseDingding(cow.currentUser))&&C.default.getTeamMembers().then(function(t){var n=[];t.forEach(function(e){C.default.isSelf(e)||n.push(e)}),e.setState({teamMembers:n})},function(){})}},{key:"_showShareDialog",value:function(){this.setState({memberDialogOpen:!1,shareDialogOpen:!0})}},{key:"_hideAllDialog",value:function(){this.state.memberDialogOpen&&this.setState({memberDialogOpen:!1}),this.state.shareDialogOpen&&this.setState({shareDialogOpen:!1})}},{key:"_onMemberDialogSubmit",value:function(e){var t=this,n=this.props.onShareUsersChanged;"function"==typeof n&&n({type:"add",users:e||[]}),this.setState({shareList:[].concat(this.state.shareList).concat(e||[])},function(){return t._showShareDialog()})}},{key:"_onMemberDialogCancel",value:function(){this._shouldShowMemberDialogFirst()?(this._hideAllDialog(),this._handleDialogClose()):this._showShareDialog()}},{key:"_onShareDialogCancel",value:function(){this._hideAllDialog(),this._handleDialogClose()}},{key:"_onRemoveMember",value:function(e){var t=this,n=this.state.shareList,o="";if(o=["doc","spreadsheet","sheet"].indexOf(cow.pageType)>-1?cow.currentFile.guid:this.props.fileGuid){var i="";i=C.default.isSelf(e)?"确认要删除对你自己的共享吗？<br/>删除后你将无权限访问该文件":"确认要删除对 <b>"+(e.email?e.email:e.name)+"</b> 的共享吗？<br/>删除后该成员将无权限访问该文件",this._hideAllDialog(),(0,b.default)({title:"删除共享",description:i,confirmFun:function(){C.default.deleteShareUser(o,e.id).then(function(){T.default.alert({title:"已删除<span class='blue'>"+e.name+"</span>"});var o=t.props.onShareUsersChanged;n.some(function(t,o){return!!C.default.isSameUser(t,e)&&(n.splice(o,1),!0)}),t.setState({shareList:n},function(){"function"==typeof o&&o({type:"remove",users:e?[e]:[]})}),C.default.isSelf(e)||t._showShareDialog()},function(){T.default.alert({title:"删除失败",type:"error"}),t._showShareDialog()})},abortFun:function(){t._showShareDialog()}})}}},{key:"_onMemberDialogClose",value:function(){this.state.memberDialogOpen&&this.setState({memberDialogOpen:!1}),this._handleDialogClose()}},{key:"_onShareDialogClose",value:function(){this.state.shareDialogOpen&&this.setState({shareDialogOpen:!1}),this._handleDialogClose()}},{key:"_handleDialogClose",value:function(){var e=this.props.onClose;"function"==typeof e&&e()}},{key:"render",value:function(){var e=this.props,t=e.fileId,n=e.fileGuid,o=e.fileUserId,i=e.fileType,r=this.state,a=r.memberDialogOpen,s=r.teamMembers,l=r.recentUserList,u=r.shareDialogOpen,c=r.shareList,p=r.fileTeamId,h=r.disableAddUser;return d.default.createElement("div",{className:"teamworker-wrapper"},d.default.createElement(f.default,{open:a,fileId:t,fileGuid:n,fileUserId:o,fileTeamId:p,fileType:i,onSubmit:this._onMemberDialogSubmit.bind(this),onCancel:this._onMemberDialogCancel.bind(this),recentUserList:l,teamMembers:s,shareList:c,onClose:this._onMemberDialogClose.bind(this),maxShareCount:_.teamworkerCount}),d.default.createElement(m.default,{ref:"shareList",open:u,onCancel:this._onShareDialogCancel.bind(this),showAddPanel:this._showMemberDialog.bind(this),onRemoveMember:this._onRemoveMember.bind(this),fileUserId:o,fileTeamId:p,disableAddUser:h,shareList:c,onClose:this._onShareDialogClose.bind(this),maxShareCount:_.teamworkerCount}))}}]),t}(c.Component);t.default=O,O.propTypes={shareList:c.PropTypes.array,fileId:c.PropTypes.number,fileGuid:c.PropTypes.string,fileUserId:c.PropTypes.number,onShareUsersChanged:c.PropTypes.func,onClose:c.PropTypes.func},e.exports=t.default}).call(t,n(170))},function(e,t,n){(function(o,i){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=r(c),p=n(161),f=n(678),h=r(f),m=n(684),v=r(m),y=n(166),g=r(y),b=n(167),w=r(b),C=n(311),E=r(C),T=n(175),P=r(T),k=function(e){function t(e){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this._preSolveRecentList(e),o={wechatPop:!1,submitBtnClass:"disable",submitBtnText:"确定",selectedList:[],recentUserList:n};(E.default.isEnterpriseStandard(cow.currentUser)||E.default.isEnterpriseDingding(cow.currentUser))&&(o.teamMembers=this._preSolveTeamMembers(e)),this.state=o}return s(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=this._preSolveRecentList(e),n={recentUserList:t};(E.default.isEnterpriseStandard(cow.currentUser)||E.default.isEnterpriseDingding(cow.currentUser))&&(n.teamMembers=this._preSolveTeamMembers(e)),this.setState(n)}},{key:"_preSolveRecentList",value:function(e){var t=e.recentUserList||[];return t=this._preSolveUserList(e,t)}},{key:"_preSolveTeamMembers",value:function(e){var t=e.teamMembers||[];return t=this._preSolveUserList(e,t,!0)}},{key:"_hasInviteWebUserPermission",value:function(){var e=this;return new o(function(t,n){"undefined"==typeof e._inviteWebUserPermission?E.default.getMyPermission().then(function(o){e._inviteWebUserPermission=o.share,o.share?t():n(new Error("没有权限"))},function(e){n(e)}):e._inviteWebUserPermission?t():n(new Error("没有权限"))})}},{key:"_preSolveUserList",value:function(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],o=[],r=this.state&&this.state.selectedList?this.state.selectedList:[],a=e.shareList||[];return t.forEach(function(e){(n&&!E.default.isSelf(e)||e.status>-1)&&!function(){var t=i.assign(e,{});a.some(function(e){return E.default.isSameUser(t,e)})?t.isShared=!0:r.some(function(e){return E.default.isSameUser(e,t)})?t.isChecked=!0:(t.isChecked=!1,t.isShared=!1),o.push(t)}()}),o}},{key:"_onAddUser",value:function(e){var t=this,n=function(){var n=t.state,o=n.selectedList,i=n.recentUserList,r=n.teamMembers;i.some(function(t){return!!E.default.isSameUser(e,t)&&(t.isChecked=!0,!0)}),(r||[]).some(function(t){return!!E.default.isSameUser(e,t)&&(t.isChecked=!0,!0)}),o.push(e),t.setState({recentUserList:i,selectedList:o,teamMembers:r,submitBtnClass:""})},o=this.props.fileTeamId;o?(E.default.isEnterpriseStandard(cow.currentUser)||E.default.isEnterpriseDingding(cow.currentUser))&&o===cow.currentUser.team_id?"member"===cow.currentUser.team_role&&o!==e.team_id?this._hasInviteWebUserPermission().then(function(){n()},function(){P.default.alert({title:"没有添加外部协作者的权限",type:"error"})}):n():P.default.alert({title:"没有添加外部协作者的权限",type:"error"}):n()}},{key:"_onDeleteUser",value:function(e){var t=this.state,n=t.selectedList,o=t.recentUserList,i=t.teamMembers;o.some(function(t){return!!E.default.isSameUser(e,t)&&(t.isChecked=!1,!0)}),(i||[]).some(function(t){return!!E.default.isSameUser(e,t)&&(t.isChecked=!1,!0)}),n.some(function(t,o){return!!E.default.isSameUser(e,t)&&(n.splice(o,1),!0)}),this.setState({recentUserList:o,selectedList:n,teamMembers:i,submitBtnClass:n.length>0?"":"disable"})}},{key:"_onHeaderCloseBtnClick",value:function(){var e=this.props.onCancel;"function"==typeof e&&e()}},{key:"_headTpl",value:function(e){return d.default.createElement("div",null,d.default.createElement("span",{className:"dialog-title"},e),d.default.createElement("span",{className:"hicon icon-close teamworker-close dialog-close-btn",onTouchTap:this._onHeaderCloseBtnClick.bind(this)}))}},{key:"_bodyTpl",value:function(){return d.default.createElement(h.default,{ref:"searchList",recentUserList:this.state.recentUserList,teamMembers:this.state.teamMembers,selectedList:this.state.selectedList,onAddUser:this._onAddUser.bind(this),onDeleteUser:this._onDeleteUser.bind(this),shareList:this.props.shareList})}},{key:"_onShow",value:function(){g.default.notify("tableAction:unlisten","member-dialog")}},{key:"_onClose",value:function(){g.default.notify("tableAction:listen","member-dialog")}},{key:"_submit",value:function(){var e=this,t=this.state.selectedList,n=this.state.submitBtnClass,o=this.props,i=o.shareList,r=o.maxShareCount;if("disable"!==n&&0!==t.length){this.setState({submitBtnClass:"disable",submitBtnText:"请求中..."});var a=!1;if(r!==1/0){var s=r-i.length;if(s<=0?a=!0:t.length>s&&(a=!0),a)return this.setState({submitBtnClass:"",submitBtnText:"确定"}),void this._showOutCountWarning()}t.length>0?!function(){var n=e.props,o=n.onSubmit,i=n.fileId;E.default.addNewShareUsers(t,i).then(function(t){P.default.alert({title:"添加成功"}),e.setState({submitBtnClass:"disable",submitBtnText:"确定",selectedList:[]},function(){"function"==typeof o&&o(t)})},function(){P.default.alert({title:"添加失败",type:"error"}),e.setState({submitBtnClass:"",submitBtnText:"确定"})})}():this.setState({submitBtnClass:"",submitBtnText:"确定"})}}},{key:"_createWechatTpl",value:function(e){return d.default.createElement(v.default,{fileType:this.props.fileType,fileGuid:this.props.fileGuid,data:e})}},{key:"_showOutCountWarning",value:function(){var e={title:"达到上限",description:"最多添加"+this.props.maxShareCount+"个协作者，升级<b>石墨高级版</b>无此限制",buttons:[{type:"link-button",buttonLabel:"了解详情",href:"/payment",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]};["personal_premium","enterprise_standard","enterprise_expired"].indexOf(cow.currentUser.accountType)>-1&&(e.description="协作者不能超过"+this.props.maxShareCount+"人",e.buttons=[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]),(0,w.default)(e)}},{key:"render",value:function(){var e=E.default.isEnterpriseDingding(cow.currentUser)?"hide":"",t=[{customClass:"btn teamworker-btn invite-link "+e,label:"添加微信好友",tpl:this._createWechatTpl.bind(this)},{customClass:"add-submit teamworker-btn btn-ok "+this.state.submitBtnClass,onTap:this._submit.bind(this),label:this.state.submitBtnText},{customClass:"add-cancel teamworker-btn hide",label:"取消",onTap:this.props.onCancel||function(){}}];return d.default.createElement(p.Dialog,{ref:"target",title:"添加成员",headTpl:this._headTpl.bind(this),bodyTpl:this._bodyTpl.bind(this),actions:t,onClose:this.props.onClose,open:this.props.open})}}]),t}(c.Component);t.default=k,k.propTypes={fileId:c.PropTypes.number,fileGuid:c.PropTypes.string,fileTeamId:c.PropTypes.number,fileType:c.PropTypes.number,recentUserList:c.PropTypes.array,teamMembers:c.PropTypes.array,showShareListDialog:c.PropTypes.func,shareList:c.PropTypes.array,maxShareCount:c.PropTypes.number,open:c.PropTypes.bool,onSubmit:c.PropTypes.func,onCancel:c.PropTypes.func,onClose:c.PropTypes.func},e.exports=t.default}).call(t,n(170),n(4))},function(e,t,n){(function(o){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=i(u),d=n(161),p=n(175),f=n(311),h=i(f),m=n(679),v=i(m),y=function(e){function t(e){r(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.keywords={},this.state={searchList:[],keywords:{},isSearching:!1,searchText:"",listType:"recent"}}return a(t,e),s(t,[{key:"_leftUserListChange",value:function(e){e&&("select"===e.type?this._addUser(e.user):"unSelect"===e.type&&this._deleteUser(e.user))}},{key:"_usersWillAddChange",value:function(e){"remove"===e.type&&this._deleteUser(e.user)}},{key:"_isSameUser",value:function(e,t){return e.id&&t.id&&e.id===t.id||e.email&&t.email&&e.email===t.email}},{key:"_addUser",value:function(e){var t=this,n=o.clone(e),i=this.state,r=i.isSearching,a=i.searchList;r&&a.some(function(e){return!!h.default.isSameUser(e,n)&&(e.isChecked=!0,t.setState({searchList:a}),!0)});var s=function(){"function"==typeof this.props.onAddUser&&this.props.onAddUser(n)}.bind(this);n.email?h.default.getUserInfoByEmail(n.email).then(function(e){0===e.code&&(n.name=e.data.name,n.avatar=e.data.avatar),s()}):s()}},{key:"_deleteUser",value:function(e){var t=this,n=this.state,o=n.isSearching,i=n.searchList;o&&i.some(function(n){return!!h.default.isSameUser(n,e)&&(n.isChecked=!1,t.setState({searchList:i}),!0)}),"function"==typeof this.props.onDeleteUser&&this.props.onDeleteUser(e)}},{key:"_inShareList",value:function(e){var t=this.props.shareList;return t.some(function(t){return!!h.default.isSameUser(e,t)&&(e.name=t.name,!0)})}},{key:"_inSelectedList",value:function(e){var t=this.props.selectedList;return t.some(function(t){return!!h.default.isSameUser(e,t)&&(t.name=e.name,!0)})}},{key:"_onSearch",value:function(e,t){var n=void 0,o=this.state.listType;if("recent"===o?n=this.props.recentUserList.filter(function(e){return e.status>-1}):"team"===o&&(n=this.props.teamMembers),e){if(n=h.default.searchByKeyword(e,n),0===n.length&&p.regs.email.test(e)){var i="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",r={name:"邮件邀请",email:e,isChecked:!1,avatar:i};this._inShareList(r)?r.isShared=!0:this._inSelectedList(r)&&(r.isChecked=!0),n.push(r)}if("submit"===t.type){if(1===n.length){var a=n[0];a.isChecked||a.isShared||(this._addUser(a),this.setState({isSearching:!1,searchList:[],searchText:""}))}}else this.setState({isSearching:!0,searchList:n,searchText:e})}else this.setState({isSearching:!1,searchList:[],searchText:e})}},{key:"_onListTypeChange",value:function(e){e!==this.state.listType&&this.setState({listType:e})}},{key:"_renderContactListSwitcher",value:function(){if(!this.state.isSearching&&(h.default.isEnterpriseStandard(cow.currentUser)||h.default.isEnterpriseDingding(cow.currentUser))){var e=this.state.listType,t="recent"===e?"selected":"",n="team"===e?"selected":"";return c.default.createElement("div",{className:"sm-nav-tabs contact-list-switcher"},c.default.createElement("ul",{className:"tab-head-wrap"},c.default.createElement("li",{className:"tab-head-item "+t,onClick:this._onListTypeChange.bind(this,"recent")},"最近"),c.default.createElement("li",{className:"tab-head-item "+n,onClick:this._onListTypeChange.bind(this,"team")},"成员")))}return null}},{key:"render",value:function(){var e=this.state,t=e.isSearching,n=e.searchList,o=e.searchText,i=e.listType,r=this.props,a=r.recentUserList,s=r.teamMembers,l=[];t?l=n||[]:"recent"===i?l=a||[]:"team"===i&&(l=s||[]);var u="待邀请成员"+(this.props.selectedList.length?"("+this.props.selectedList.length+")":""),p=!0,f=!0;return c.default.createElement("div",{className:"mem-list"},c.default.createElement("div",{className:"search-list"},c.default.createElement(d.SearchInput,{placeholder:"输入邮箱、搜索姓名进行添加",customClass:"teamworker-input-box",text:o,onSearch:this._onSearch.bind(this)}),this._renderContactListSwitcher(),c.default.createElement(v.default,{classPrefix:"teamworker",onChange:this._leftUserListChange.bind(this),selectable:p,userList:l})),c.default.createElement("div",{className:"result-list"},c.default.createElement("div",{className:"share-li-title teamworker-li-title invite-title"},u),c.default.createElement(v.default,{classPrefix:"teamworker",onChange:this._usersWillAddChange.bind(this),removeable:f,userList:this.props.selectedList})))}}]),t}(u.Component);t.default=y,y.propTypes={recentUserList:u.PropTypes.array,teamMembers:u.PropTypes.array,shareList:u.PropTypes.array,selectedList:u.PropTypes.array,onAddUser:u.PropTypes.func,onDeleteUser:u.PropTypes.func},e.exports=t.default}).call(t,n(4))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(161),d=n(680),p=o(d),f=n(311),h=o(f),m=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={me:this._filterMeFromUserList(e.userList)}}return r(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this._filterMeFromUserList(e.userList);this.setState({me:t})}},{key:"_filterMeFromUserList",value:function(e){var t=null;return e.some(function(e){return!!h.default.isSameUser(e,cow.currentUser)&&(t=e,!0)}),t}},{key:"_getProps",value:function(){var e=this.props,t={selectable:!!e.selectable,removeable:!!e.removeable,showRole:!!e.showRole,onChange:e.onChange||function(){},roleField:e.roleField||"role",userList:e.userList||[],customClass:e.customClass||"",groupBy:e.groupBy,headTag:e.headTag};return t.groupBy?(t.adapter={type:"group"},t.userList=this._groupUserList(t.groupBy)):t.headTag?(t.adapter={type:"group"},t.userList=[{name:t.headTag,items:t.userList}]):t.adapter={type:"plain"},t}},{key:"_groupUserList",value:function(){return[]}},{key:"_createListRowDom",value:function(e,t){var n=this.props.classPrefix;return u.default.createElement("div",{className:"share-user-li "+(n?n+"-user-li":"user-li")},u.default.createElement(c.ImageIcon,{customClass:"share-user-avatar avatar",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:t.avatar}),u.default.createElement("span",{className:"share-user-name ellipsis "+(n?n+"-user-name":"")},t.name),u.default.createElement("span",{className:"share-user-email ellipsis "+(n?n+"-user-email":"")},t.email),this._createRowActions.bind(this)(t))}},{key:"_createHeadDom",value:function(e,t){var n=t||"",o="";return this.props.classPrefix&&(o=this.props.classPrefix+"-li-title"),u.default.createElement("div",{className:"share-li-title "+o},n)}},{key:"_createRowActions",value:function(e){var t=this._getProps(),n=t.selectable,o=t.removeable,i=t.showRole,r=[];if(n){var a="";a=e.isShared?"is-shared":e.isChecked?"is-checked":"",e.isDisable&&(a+=" is-disable"),r.push(u.default.createElement("span",{key:r.length,className:"operation-icon doc-share-icon "+a}))}if(i){var s=!1;o&&(s=!!e.canBeRemove);var l="share-status share-user-identity "+(s?"share-show-remove":"")+(this.props.classPrefix?" "+this.props.classPrefix+"-user-identify":"");r.push(u.default.createElement("span",{key:r.length,className:l},"disable"===e.team_role?"已禁用":h.default.isCreator(e)?"创建者":"成员")),s&&r.push(u.default.createElement("span",{key:r.length,onClick:this._removeMember.bind(this,e),"data-user":r.length,className:"share-status share-user-remove doc-share-icon"}))}else o&&r.push(u.default.createElement("span",{key:r.length,className:"operation-icon doc-share-icon is-remove"}));return r}},{key:"_removeMember",value:function(e){var t=this._getProps(),n=t.onChange;n({type:"remove",user:e})}},{key:"_onRowClick",value:function(e,t,n){var o=this._getProps(),i=o.selectable,r=o.removeable,a=o.onChange,s=o.showRole;if(!s)if(i){if(n.isShared||n.isDisable)return;a({type:n.isChecked?"unSelect":"select",user:n})}else r&&a({type:"remove",user:n})}},{key:"_onHeadClick",value:function(){}},{key:"render",value:function(){var e=this._getProps(),t=e.userList,n=e.adapter;return u.default.createElement(p.default,{data:t,adapter:n,headDom:this._createHeadDom.bind(this),onClickRow:this._onRowClick.bind(this),onClickHead:this._onHeadClick.bind(this),rowDom:this._createListRowDom.bind(this)})}}]),t}(l.Component);t.default=m,m.propTypes={selectable:l.PropTypes.bool,removeable:l.PropTypes.bool,enableRowClick:l.PropTypes.bool,onChange:l.PropTypes.func,classPrefix:l.PropTypes.string,showRole:l.PropTypes.bool,roleField:l.PropTypes.string,userList:l.PropTypes.array,customClass:l.PropTypes.string,adapter:l.PropTypes.object},e.exports=t.default},function(e,t,n){var o=n(7),i=n(681),r=n(682);e.exports=o.createClass({displayName:"exports",propTypes:{data:o.PropTypes.array,adapter:o.PropTypes.object,rowDom:o.PropTypes.func,headDom:o.PropTypes.func,onClickRow:o.PropTypes.func,onClickHead:o.PropTypes.func},getInitialState:function(){return{}},getDefaultProps:function(){return{rowDom:function(e,t){var n=t&&t.title||"";return o.createElement("div",{className:""},n)},headDom:function(e,t){var n=t||"";return o.createElement("div",{className:""},n)},onClickRow:function(e,t,n){alert("click row: "+t.group+", "+t.row+"\ndata: "+JSON.stringify(n))},onClickHead:function(e,t,n){alert("click head:"+t.group+"\ndata: "+JSON.stringify(n))}}},render:function(){var e,t=this.props;return e=t.adapter&&"group"==t.adapter.type?t.data.map(function(e,n){return o.createElement(i,o.__spread({},t,{key:n,groupIndex:n,groupItem:e}))}):t.data.map(function(e,n){return o.createElement(r,o.__spread({},t,{key:n,groupIndex:0,rowIndex:n,rowItem:e}))}),o.createElement("div",{className:"ui-list"},e)}})},function(e,t,n){var o=n(7),i=n(682),r=n(683);e.exports=o.createClass({displayName:"exports",propTypes:{},render:function(){var e,t=this.props;return e=this.props.groupItem.items.map(function(e,n){return o.createElement(i,o.__spread({},t,{key:n,groupIndex:t.groupIndex,rowIndex:n,rowItem:e}))}),o.createElement("div",{className:"ui-list-group"},o.createElement(r,o.__spread({},t,{groupIndex:t.groupIndex,headItem:t.groupItem.name})),e)}})},function(e,t,n){var o=n(7);e.exports=o.createClass({displayName:"exports",render:function(){var e={group:this.props.groupIndex,row:this.props.rowIndex};return o.createElement("div",{className:"ui-list-row",onClick:this._onClickRow},this.props.rowDom(e,this.props.rowItem))},_onClickRow:function(e){var t={group:this.props.groupIndex,row:this.props.rowIndex};this.props.onClickRow(e,t,this.props.rowItem)}})},function(e,t,n){var o=n(7);e.exports=o.createClass({displayName:"exports",render:function(){var e={group:this.props.groupIndex};return o.createElement("div",{className:"ui-list-head",onClick:this._onClickHead},this.props.headDom(e,this.props.headItem))},_onClickHead:function(e){var t={group:this.props.groupIndex};this.props.onClickHead(e,t,this.props.headItem)}})},function(e,t,n){var o=n(7),i=n(161),r=i.SimpleButton,a=i.DelegateClick,s=n(175);e.exports=o.createClass({displayName:"exports",mixins:[a],propTypes:{guid:o.PropTypes.string},getInitialState:function(){return{open:!1}},componentDidMount:function(){var e=this,t="";t=["doc","spreadsheet","sheet"].indexOf(cow.pageType)>-1?window.cow.currentFile.guid:this.props.fileGuid,s.get("/api/file/"+t+"/invite_link").then(function(t){e.setState({inviteUrl:s.getQrImageUrl(114,t.data.link)})})},render:function(){var e,t=this.props,n=t.data,i={display:"block"},a=t.fileType,s=a===-1?"表格":0===a?"文档":"文件夹";return this.state.open&&(e=o.createElement("div",{className:"invite-link-popup"},o.createElement("p",null,"微信扫一扫"),o.createElement("img",{src:this.state.inviteUrl}),o.createElement("p",null,"把",s,"发送给好友",o.createElement("br",null),"邀请好友加入"),o.createElement("div",{className:"arrow-down",style:i},o.createElement("span",{className:"top"}),o.createElement("span",{className:"down"})))),o.createElement("div",{className:"dialog-wechat-box"},o.createElement(r,{customClass:n.customClass||"",disabled:n.disabled||!1,onTap:this._onTap,label:n.label}),e)},_onTap:function(){this.setState({open:!this.state.open})},componentClick:function(){this.close()},close:function(){this.setState({open:!1})}})},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(161),d=n(166),p=o(d),f=n(167),h=o(f),m=n(679),v=o(m),y=n(175),g=o(y),b=n(311),w=(o(b),
function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"show",value:function(){this.refs.target.show()}},{key:"close",value:function(){this.refs.target.close()}},{key:"_groupList",value:function(e,t){var n=[],o=[];this.props.fileUserId;return e&&e.length>0&&e.forEach(function(e){e.team_id===t?n.push(e):o.push(e)}),{teamMembers:n,otherMembers:o}}},{key:"_headTpl",value:function(e){return u.default.createElement("div",null,u.default.createElement("span",{className:"dialog-title"},e),u.default.createElement("span",{className:"hicon icon-close teamworker-close dialog-close-btn",onTouchTap:this.props.onCancel}))}},{key:"_getUserListDoms",value:function(e,t){var n=[],o=!0,i=!1,r=!0;return n.push(u.default.createElement("div",{className:"userlist-legend"},u.default.createElement("span",{className:"userlist-legend-label"},t+"（"+e.length+"）"))),n.push(u.default.createElement(v.default,{classPrefix:"teamworker-sharelist",onChange:this._removeMember.bind(this),showRole:o,selectable:i,removeable:r,userList:e})),n}},{key:"_bodyTpl",value:function(){var e=this.props,t=e.shareList,n=e.fileTeamId,o=[];if(n){var i=this._groupList(t,n),r=i.teamMembers,a=i.otherMembers;if(r.length>0){var s=cow.currentUser.team_id===n?"团队成员":"成员",l=this._getUserListDoms(r,s);o=o.concat(l)}if(a.length>0){var c=this._getUserListDoms(a,"外部协作者");o=o.concat(c)}return u.default.createElement("div",{className:"teamworker-content"},o)}var d=this._getUserListDoms(t,"成员");return u.default.createElement("div",{className:"teamworker-content"},d)}},{key:"_onShow",value:function(){"spreadsheet"===cow.pageType&&p.default.notify("tableAction:unlisten","share-dialog")}},{key:"_onClose",value:function(){var e=this.props.onClose;"function"==typeof e&&e(),"spreadsheet"===cow.pageType&&p.default.notify("tableAction:listen","share-dialog")}},{key:"_showAddPanel",value:function(){var e=this.props,t=e.disableAddUser,n=e.shareList,o=e.maxShareCount,i=e.showAddPanel;if(t)return void g.default.alert({title:"没有权限添加协作者",type:"error"});if(o!==1/0){var r=o-n.length;if(r<=0)return void this._showOutCountWarning()}this.close(),"function"==typeof i&&i()}},{key:"_removeMember",value:function(e){var t=this.props.onRemoveMember;if(e.type&&"remove"===e.type){var n=e.user;if(n.isGrand)return void g.default.alert({title:"<b>"+n.name+"</b> 属于文件夹的协作人，无法移除",type:"error"});"function"==typeof t&&t(e.user)}}},{key:"_showOutCountWarning",value:function(){var e={title:"达到上限",description:"最多添加"+this.props.maxShareCount+"个协作者，升级<b>石墨高级版</b>无此限制",buttons:[{type:"link-button",buttonLabel:"了解详情",href:"/payment",target:"_blank",customClass:"btn-ok",closeAfterClick:!0},{type:"button",buttonLabel:"取消",customClass:"",closeAfterClick:!0}]};["personal_premium","enterprise_standard","enterprise_expired"].indexOf(cow.currentUser.accountType)>-1&&(e.description="协作者不能超过"+this.props.maxShareCount+"人",e.buttons=[{type:"button",buttonLabel:"确定",customClass:"btn-ok",closeAfterClick:!0}]),(0,h.default)(e)}},{key:"render",value:function(){var e=[{customClass:"teamworker-btn btn btn-ok",onTap:this._showAddPanel.bind(this),label:"添加成员"}];return u.default.createElement(c.Dialog,{ref:"target",title:"共享",customClass:"teamworker-sharelist-inner",open:this.props.open,headTpl:this._headTpl.bind(this),bodyTpl:this._bodyTpl.bind(this),actions:e,onShow:this._onShow.bind(this),onClose:this._onClose.bind(this)})}}]),t}(l.Component));t.default=w,w.propTypes={fileUserId:l.PropTypes.number,disableAddUser:l.PropTypes.bool,onRemoveMember:l.PropTypes.func,fileTeamId:l.PropTypes.number,shareList:l.PropTypes.array,maxShareCount:l.PropTypes.number,showAddPanel:l.PropTypes.func,open:l.PropTypes.bool,onCancel:l.PropTypes.func.isRequired,onClose:l.PropTypes.func},e.exports=t.default},function(e,t,n){(function(o){function i(e){return new o(function(t,n){(0,u.ajaxGet)("/smapi/files/"+e).then(function(e){0===e.code?t(e.data):n(new Error(e.message))},function(e){n(e)})})}function r(){return new o(function(e,t){(0,u.ajaxGet)("/smapi/teams/mine/invite_state").then(function(n){if(0===n.code){var o=n.data.inviteGuid||"";if(o){var i=window.location.protocol+"//"+window.location.host+"/company/invite/"+o;e(i)}else e("")}else t()},function(e){t(e)})})}function a(){return new o(function(e,t){(0,u.ajaxDelete)("/smapi/teams/mine/invite_state").then(function(){e("")},function(e){t(e)})})}function s(){return new o(function(e,t){(0,u.ajaxPost)("/smapi/teams/mine/invite_state",{}).then(function(n){if(0===n.code){var o=n.data.inviteGuid;if(o){var i=window.location.protocol+"//"+window.location.host+"/company/invite/"+o;e(i)}else e("")}else t()},function(e){t(e)})})}function l(e){return new o(function(t,n){(0,u.ajaxPost)("/teams/invite_members",{users:e.join(",")}).then(function(e){var n=0,o=0,i=[],r=[];for(var a in e.data.data)"string"==typeof e.data.data[a]?(o+=1,i.push(a),r.push(e.data.data[a])):n+=1;t({successedCount:n,failedCount:o,failedUsers:i,failedMessages:r})},function(e){n(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(231);t.default={getFileTeamInfo:i,getInviteLink:r,inviteMembers:l,closeInviteLink:a,openInviteLink:s},e.exports=t.default}).call(t,n(170))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(688),r=o(i),a=n(1007),s=o(a),l=n(1008),u=o(l),c={AddUserDialog:u.default,SharedUsersDialog:s.default,Popover:r.default};t.default=c,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i),a=n(235),s=n(689),l=o(s),u=n(715),c=function(){return r.default.createElement(a.Provider,{store:l.default},r.default.createElement(u.TeamworkPopoverContainer,null))};t.default=c,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(242),r=n(690),a=o(r),s=n(697),l=o(s),u=n(710),c={storage:{}},d=(0,i.combineReducers)({modals:u.reducer,storage:l.default});t.default=(0,a.default)(d,c),e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(242),r=n(254),a=o(r),s=n(691),l=(o(s),n(255)),u=o(l),c=[a.default,u.default],d=i.applyMiddleware.apply(void 0,c)(i.createStore);t.default=function(e,t){return d(e,t)},e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=r({},u.default,e),n=t.logger,o=t.transformer,i=t.stateTransformer,l=t.errorTransformer,c=t.predicate,d=t.logErrors,p=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};o&&console.error("Option 'transformer' is deprecated, use 'stateTransformer' instead!");var f=[];return function(e){var n=e.getState;return function(e){return function(o){if("function"==typeof c&&!c(n,o))return e(o);var u={};f.push(u),u.started=s.timer.now(),u.startedTime=new Date,u.prevState=i(n()),u.action=o;var h=void 0;if(d)try{h=e(o)}catch(e){u.error=l(e)}else h=e(o);u.took=s.timer.now()-u.started,u.nextState=i(n());var m=t.diff&&"function"==typeof p?p(n,o):t.diff;if((0,a.printBuffer)(f,r({},t,{diff:m})),f.length=0,u.error)throw u.error;return h}}}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(692),s=n(693),l=n(696),u=o(l);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function a(e,t,n,o){switch("undefined"==typeof e?"undefined":r(e)){case"object":return"function"==typeof e[o]?e[o].apply(e,i(n)):e[o];case"function":return e(t);default:return e}}function s(e){var t=e.timestamp,n=e.duration;return function(e,o,i){var r=["action"];return t&&r.push("@ "+o),r.push(e.type),n&&r.push("(in "+i.toFixed(2)+" ms)"),r.join(" ")}}function l(e,t){var n=t.logger,o=t.actionTransformer,i=t.titleFormatter,r=void 0===i?s(t):i,l=t.collapsed,c=t.colors,p=t.level,f=t.diff;e.forEach(function(t,i){var s=t.started,h=t.startedTime,m=t.action,v=t.prevState,y=t.error,g=t.took,b=t.nextState,w=e[i+1];w&&(b=w.prevState,g=w.started-s);var C=o(m),E="function"==typeof l?l(function(){return b},m):l,T=(0,u.formatTime)(h),P=c.title?"color: "+c.title(C)+";":null,k=r(C,T,g);try{E?c.title?n.groupCollapsed("%c "+k,P):n.groupCollapsed(k):c.title?n.group("%c "+k,P):n.group(k)}catch(e){n.log(k)}var _=a(p,C,[v],"prevState"),O=a(p,C,[C],"action"),S=a(p,C,[y,v],"error"),x=a(p,C,[b],"nextState");_&&(c.prevState?n[_]("%c prev state","color: "+c.prevState(v)+"; font-weight: bold",v):n[_]("prev state",v)),O&&(c.action?n[O]("%c action","color: "+c.action(C)+"; font-weight: bold",C):n[O]("action",C)),y&&S&&(c.error?n[S]("%c error","color: "+c.error(y,v)+"; font-weight: bold",y):n[S]("error",y)),x&&(c.nextState?n[x]("%c next state","color: "+c.nextState(b)+"; font-weight: bold",b):n[x]("next state",b)),f&&(0,d.default)(v,b,n,E);try{n.groupEnd()}catch(e){n.log("—— log end ——")}})}Object.defineProperty(t,"__esModule",{value:!0}),t.printBuffer=l;var u=n(693),c=n(694),d=o(c)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.repeat=function(e,t){return new Array(t+1).join(e)},o=t.pad=function(e,t){return n("0",t-e.toString().length)+e};t.formatTime=function(e){return o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return"color: "+u[e].color+"; font-weight: bold"}function r(e){var t=e.kind,n=e.path,o=e.lhs,i=e.rhs,r=e.index,a=e.item;switch(t){case"E":return n.join(".")+" "+o+" → "+i;case"N":return n.join(".")+" "+i;case"D":return""+n.join(".");case"A":return[n.join(".")+"["+r+"]",a];default:return null}}function a(e,t,n,o){var a=(0,l.default)(e,t);try{o?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}a?a.forEach(function(e){var t=e.kind,o=r(e);n.log("%c "+u[t].text,i(t),o)}):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=n(695),l=o(s),u={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};e.exports=t.default},function(e,t,n){var o,i;(function(n){!function(n,r){"use strict";o=[],i=function(){return r()}.apply(t,o),!(void 0!==i&&(e.exports=i))}(this,function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function o(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function r(e,t){r.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(e,t,n){var o=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,o),e}function u(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"undefined"!=typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(t,n,o,d,p,f,h){p=p||[];var m=p.slice(0);if("undefined"!=typeof f){if(d){if("function"==typeof d&&d(m,f))return;if("object"==typeof d){if(d.prefilter&&d.prefilter(m,f))return;if(d.normalize){var v=d.normalize(m,f,t,n);v&&(t=v[0],n=v[1])}}}m.push(f)}"regexp"===u(t)&&"regexp"===u(n)&&(t=t.toString(),n=n.toString());var y=typeof t,g=typeof n;if("undefined"===y)"undefined"!==g&&o(new r(m,n));else if("undefined"===g)o(new a(m,t));else if(u(t)!==u(n))o(new i(m,t,n));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(n)&&t-n!==0)o(new i(m,t,n));else if("object"===y&&null!==t&&null!==n){if(h=h||[],h.indexOf(t)<0){if(h.push(t),Array.isArray(t)){var b;t.length;for(b=0;b<t.length;b++)b>=n.length?o(new s(m,b,new a(e,t[b]))):c(t[b],n[b],o,d,m,b,h);for(;b<n.length;)o(new s(m,b,new r(e,n[b++])))}else{var w=Object.keys(t),C=Object.keys(n);w.forEach(function(i,r){var a=C.indexOf(i);a>=0?(c(t[i],n[i],o,d,m,i,h),C=l(C,a)):c(t[i],e,o,d,m,i,h)}),C.forEach(function(t){c(e,n[t],o,d,m,t,h)})}h.length=h.length-1}}else t!==n&&("number"===y&&isNaN(t)&&isNaN(n)||o(new i(m,t,n)))}function d(t,n,o,i){return i=i||[],c(t,n,function(e){e&&i.push(e)},o),i.length?i:e}function p(e,t,n){if(n.path&&n.path.length){var o,i=e[t],r=n.path.length-1;for(o=0;o<r;o++)i=i[n.path[o]];switch(n.kind){case"A":p(i[n.path[o]],n.index,n.item);break;case"D":delete i[n.path[o]];break;case"E":case"N":i[n.path[o]]=n.rhs}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":e=l(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function f(e,t,n){if(e&&t&&n&&n.kind){for(var o=e,i=-1,r=n.path?n.path.length-1:0;++i<r;)"undefined"==typeof o[n.path[i]]&&(o[n.path[i]]="number"==typeof n.path[i]?[]:{}),o=o[n.path[i]];switch(n.kind){case"A":p(n.path?o[n.path[i]]:o,n.index,n.item);break;case"D":delete o[n.path[i]];break;case"E":case"N":o[n.path[i]]=n.rhs}}}function h(e,t,n){if(n.path&&n.path.length){var o,i=e[t],r=n.path.length-1;for(o=0;o<r;o++)i=i[n.path[o]];switch(n.kind){case"A":h(i[n.path[o]],n.index,n.item);break;case"D":i[n.path[o]]=n.lhs;break;case"E":i[n.path[o]]=n.lhs;break;case"N":delete i[n.path[o]]}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e[t]=n.lhs;break;case"E":e[t]=n.lhs;break;case"N":e=l(e,t)}return e}function m(e,t,n){if(e&&t&&n&&n.kind){var o,i,r=e;for(i=n.path.length-1,o=0;o<i;o++)"undefined"==typeof r[n.path[o]]&&(r[n.path[o]]={}),r=r[n.path[o]];switch(n.kind){case"A":h(r[n.path[o]],n.index,n.item);break;case"D":r[n.path[o]]=n.lhs;break;case"E":r[n.path[o]]=n.lhs;break;case"N":delete r[n.path[o]]}}}function v(e,t,n){if(e&&t){var o=function(o){n&&!n(e,t,o)||f(e,t,o)};c(e,t,o)}}var y,g,b=[];return y="object"==typeof n&&n?n:"undefined"!=typeof window?window:{},g=y.DeepDiff,g&&b.push(function(){"undefined"!=typeof g&&y.DeepDiff===d&&(y.DeepDiff=g,g=e)}),t(i,o),t(r,o),t(a,o),t(s,o),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof g},enumerable:!0},noConflict:{value:function(){return b&&(b.forEach(function(e){e()}),b=null),d},enumerable:!0}}),d})}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){switch(void 0===e&&(e={}),t.type){case"PATCH_USERS":return(0,d.default)({},e,t.payload);default:return e}}function r(e,t){switch(void 0===e&&(e={}),t.type){case"PATCH_FILES":return(0,d.default)({},e,t.payload);default:return e}}function a(e,t){switch(void 0===e&&(e={}),t.type){case"UPDATE_PERMISSIONS":return(0,d.default)({},e,t.payload);case"PATCH_PERMISSIONS":var n=t.payload,o=n.fileGuid,i=n.userId,r=n.permission;return e[o][i]=r,(0,d.default)({},e);default:return e}}function s(e,t){switch(void 0===e&&(e={}),t.type){case"PATCH_SHARED_USERS":return(0,d.default)({},e,t.payload);default:return e}}function l(e,t){switch(void 0===e&&(e=[]),t.type){case"PATCH_RECENT_CONTACTS":return t.payload;default:return e}}function u(e,t){switch(void 0===e&&(e=[]),t.type){case"UPDATE_TEAM_MEMBER":return t.payload;default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(698),d=o(c),p=n(242);t.default=(0,p.combineReducers)({users:i,files:r,permissions:a,filePermissions:s,recentContacts:l,teamMembers:u}),e.exports=t.default},function(e,t,n){var o=n(699),i=n(700),r=n(701),a=n(466),s=n(463),l=n(447),u=Object.prototype,c=u.hasOwnProperty,d=r(function(e,t){if(s(t)||a(t))return void i(t,l(t),e);for(var n in t)c.call(t,n)&&o(e,n,t[n])});e.exports=d},function(e,t,n){function o(e,t,n){var o=e[t];s.call(e,t)&&r(o,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=n(424),r=n(476),a=Object.prototype,s=a.hasOwnProperty;e.exports=o},function(e,t,n){function o(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?r(n,u,c):i(n,u,c)}return n}var i=n(699),r=n(424);e.exports=o},function(e,t,n){function o(e){return i(function(t,n){var o=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&r(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++o<i;){var l=n[o];l&&e(t,l,o,a)}return t})}var i=n(702),r=n(709);e.exports=o},function(e,t,n){function o(e,t){return a(r(e,t,i),e+"")}var i=n(544),r=n(703),a=n(705);e.exports=o},function(e,t,n){function o(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=r(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(l),i(e,this,u)}}var i=n(704),r=Math.max;e.exports=o},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var o=n(706),i=n(708),r=i(o);e.exports=r},function(e,t,n){var o=n(707),i=n(425),r=n(544),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:o(t),writable:!0})}:r;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=r(),s=i-(a-n);if(n=a,s>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,i=16,r=Date.now;e.exports=n},function(e,t,n){function o(e,t,n){if(!s(n))return!1;var o=typeof t;return!!("number"==o?r(n)&&a(t,n.length):"string"==o&&t in n)&&i(n[t],e)}var i=n(476),r=n(466),a=n(456),s=n(435);e.exports=o},function(e,t,n){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(711),a=i(r),s=n(712),l=i(s),u=n(713),c=o(u),d=n(714),p=i(d);t.Modal=l.default,t.ModalRoot=a.default,t.actions=c,t.reducer=p.default,t.register=r.register},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return t._name=e,h[e]=t,t}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}};t.register=a;var c=n(7),d=o(c),p=n(698),f=o(p),h={},m=function(e){function t(e){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleCloseClick=this.handleCloseClick.bind(this)}return r(t,e),l(t,null,[{key:"propTypes",get:function(){return{popModal:c.PropTypes.func.isRequired,cleanModals:c.PropTypes.func.isRequired,modals:c.PropTypes.arrayOf(c.PropTypes.shape({name:c.PropTypes.string,params:c.PropTypes.object})).isRequired}}}]),l(t,[{key:"handleCloseClick",value:function(e){var t=e.target.dataset.modal;"clean"===t?this.props.cleanModals():"pop"===t&&this.props.popModal()}},{key:"renderModalComponent",value:function(){if(0!==this.props.modals.length){var e=this.props.modals[0],t=e.name,n=e.params,o=h[t],i=(0,f.default)({},this.props,n);return d.default.createElement("div",{className:"shimo-modal-overlay","data-modal":"clean"},d.default.createElement(o,s({},i,{params:n})))}}},{key:"render",value:function(){return d.default.createElement("div",{className:"modal-root",onClick:this.handleCloseClick},this.renderModalComponent())}}]),t}(c.Component);t.default=m},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],o=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=o(u),d=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.refs.modal,t=e.offsetWidth,n=e.offsetHeight;this.refs.modal.style.marginLeft=-(t/2)+"px",this.refs.modal.style.marginTop=-(n/2)+"px"}},{key:"render",value:function(){var e=this.props,t=c.default.Children.toArray(e.children),n=a(t,2),o=n[0],i=n[1];return c.default.createElement("div",{className:"shimo-modal",style:e.style,ref:"modal"},c.default.createElement("div",{className:"shimo-modal-header"},c.default.createElement("span",null,e.title),c.default.createElement("span",{className:"hicon icon-close","data-modal":"clean"})),c.default.createElement("div",{className:"shimo-modal-content",style:e.contentStyle},o),i&&c.default.createElement("div",{className:"shimo-modal-footer"},i))}}],[{key:"propTypes",get:function(){return{title:u.PropTypes.string.isRequired,style:u.PropTypes.object,contentStyle:u.PropTypes.object}}}]),t}(u.Component);t.default=d,e.exports=t.default},function(e,t){function n(e,t){return"string"!=typeof e&&(e=e._name),{type:"@@modal/PUSH_MODAL",payload:{name:e,params:t}}}function o(){return{type:"@@modal/POP_MODAL"}}function i(){return{type:"@@modal/CLEAN_MODALS"}}Object.defineProperty(t,"__esModule",{value:!0}),t.pushModal=n,t.popModal=o,t.cleanModals=i},function(e,t){function n(e,t){switch(void 0===e&&(e=[]),t.type){case"@@modal/PUSH_MODAL":return[].concat(e,t.payload);case"@@modal/POP_MODAL":return[].concat(e.slice(0,-1));case"@@modal/CLEAN_MODALS":return[];default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=i(c),p=n(235),f=n(242),h=n(716),m=o(h),v=n(718),y=i(v),g=n(803),b=i(g),w=n(1004),C=i(w),E=n(1006),T=i(E),P=n(266),k=i(P),_=n(166),O=i(_),S=function(e){function t(e){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleVisibleChange=this.handleVisibleChange.bind(this),this.handleContentSwitch=this.handleContentSwitch.bind(this),this.handleTriggerClick=this.handleTriggerClick.bind(this),this.state={visible:!1,content:"show"}}return a(t,e),l(t,null,[{key:"propTypes",get:function(){return{fileGuid:c.PropTypes.string,storage:c.PropTypes.object,maxShareCount:c.PropTypes.number,getSharedUsers:c.PropTypes.func,setPermission:c.PropTypes.func,cleanModals:c.PropTypes.func,pushModal:c.PropTypes.func,popModal:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid}}}]),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(m.getFile(this.props.fileGuid)),this.props.dispatch(m.getSharedUsers(this.props.fileGuid)),window.onpopstate=function(){return e.setState({visible:!1})}}},{key:"handleVisibleChange",value:function(e){e===!1?(k.default.checkIsWelcomeFile()&&O.default.notify("guideTip:visible",{index:4,value:!1}),this.setState({visible:e,content:"show"})):this.setState({visible:e})}},{key:"handleContentSwitch",value:function(e){this.setState({content:e})}},{key:"handleTriggerClick",value:function(){k.default.checkIsWelcomeFile()&&O.default.notify("guideTip:visible",{index:4,value:!1})}},{key:"renderContent",value:function(){var e=this,t=void 0;if(!this.state.visible)return t;var n=(0,f.bindActionCreators)(m,this.props.dispatch);switch(this.state.content){case"show":t=d.default.createElement(b.default,s({},this.props,n,{showButton:!0,onButtonClick:this.handleContentSwitch,fileGuid:cow.currentFile.guid,overflow:[0,25]}));break;case"add":t=d.default.createElement(C.default,s({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},fileGuid:cow.currentFile.guid,overflow:[0,25]}));break;case"transfer":t=d.default.createElement(T.default,s({},this.props,n,{showButton:!0,onButtonClick:function(){return e.handleContentSwitch("show")},fileGuid:cow.currentFile.guid,overflow:[0,25]}))}return t}},{key:"render",value:function(){return d.default.createElement(y.default,{overlayClassName:"teamwork-popover",visible:this.state.visible,onVisibleChange:this.handleVisibleChange,content:this.renderContent()},d.default.createElement("div",{className:"teamwork-popover-trigger",onClick:this.handleTriggerClick},"协作"))}}]),t}(c.Component);t.default=S;var x=(0,p.connect)(function(e){return e})(S);t.TeamworkPopoverContainer=x},function(e,t,n){(function(e){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n={};return(0,T.forEach)(t,function(e){n[e.id]={permission:e.permission,role:e.role}}),{type:"UPDATE_PERMISSIONS",payload:o({},e,n)}}function r(e,t,n){return{type:"PATCH_PERMISSIONS",payload:{fileGuid:e,userId:t,permission:{role:n}}}}function a(t,n){return function(o){return 0!==+n.code?o((0,P.error)("GET_SHARED_USERS",n)):e.all([o(p(n.data)),o(i(t,n.data)),o(s(t,n.data))])}}function s(e,t){var n=(0,T.map)(t,"id");return{type:"PATCH_SHARED_USERS",payload:o({},e,n)}}function l(e){return function(t){return t({type:"GET_SHARED_USERS"}),(0,E.ajaxGet)("/smapi/files/"+e+"/collaborators").then(function(n){return t(a(e,n))},function(e){return t((0,P.error)("GET_SHARED_USERS",e))})}}function u(){var e="GET_RECENT_CONTACTS";return function(t){return t({type:e}),(0,E.ajaxGet)("/smapi/users/mine/recent_contacts").then(function(e){return t(c(e))},function(n){return t((0,P.error)(e,n))})}}function c(t){return function(n){return 0!==+t.code?n((0,P.error)("GET_RECENT_CONTACTS",t)):e.all([n(p(t.data)),n(d(t.data))])}}function d(e){var t=(0,T.map)(e,"id");return{type:"PATCH_RECENT_CONTACTS",payload:t}}function p(e){var t=(0,T.map)(e,"id"),n=(0,T.zipObject)(t,e);return{type:"PATCH_USERS",payload:n}}function f(e,t){var n=arguments.length<=2||void 0===arguments[2]?"editor":arguments[2],o="SET_PERMISSION";return function(i){switch(n){case"remove":return(0,E.ajaxDelete)("/smapi/files/"+e+"/collaborators/"+t).then(function(t){return i(h(t,e))},function(e){return i((0,P.error)(o,e))});case"add":return(0,E.ajaxPost)("/smapi/files/"+e+"/collaborators",{userId:t,role:"editor"}).then(function(t){return i(h(t,e))},function(e){return i((0,P.error)(o,e))});default:return(0,E.ajaxPatch)("/smapi/files/"+e+"/collaborators/"+t,{role:n}).then(function(o){return i(h(o,e,t,n))},function(e){return i((0,P.error)(o,e))})}}}function h(e,t,n,o){return function(i){return 0!==+e.code?i((0,P.error)("SET_PERMISSION",e)):o?o?i(r(t,n,e.data.role)):void 0:i(l(t))}}function m(){var e="GET_TEAM_MEMBERS";return function(t){return(0,E.ajaxGet)("/smapi/teams/mine/members").then(function(e){return t(v(e))},function(n){return t(n(e,n))})}}function v(t){return function(n){return 0!==+t.code?n((0,P.error)("GET_TEAM_MEMBERS",t)):e.all([n(p(t.data)),n(y(t.data))])}}function y(e){var t=(0,T.map)(e,"id");return{type:"UPDATE_TEAM_MEMBER",payload:t}}function g(e){var t="GET_FILE";return function(n){return(0,E.ajaxGet)("/smapi/files/"+e).then(function(e){
return n(b(e))},function(e){return n((0,P.error)(t,e))})}}function b(e){return function(t){return t(0!==+e.code?(0,P.error)("GET_FILE",e):w(e.data))}}function w(e){return{type:"PATCH_FILES",payload:o({},e.guid,e)}}function C(t,n){var o="UPDATE_FILE";return function(i,r){var a=r(),s=a.storage,u=s.files[t],c=function(r){return 0!==r.code?i((0,P.error)(o,r)):e.all([i(w((0,T.assign)({},u,n))),i(l(t))])};return(0,E.ajaxPatch)("/smapi/files/"+t,n).then(function(e){return c(e)},function(e){return i((0,P.error)(o,e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedUsers=l,t.getRecentContacts=u,t.getRecentContactsSuccess=c,t.updateRecentContacts=d,t.updateUserStorage=p,t.setPermission=f,t.setPermissionSuccess=h,t.getTeamMembers=m,t.getTeamMembersSuccess=v,t.getFile=g,t.getFileSuccess=b,t.updateFileStorage=w,t.patchFile=C;var E=n(231),T=n(4),P=n(717)}).call(t,n(170))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return a.default.alert({title:t.message,type:"error"}),{type:e+"_FAILED",error:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=i;var r=n(175),a=o(r)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(4),d=n(804),p=o(d),f=n(161),h=n(998),m=o(h),v=n(175),y=o(v),g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleUserListClick=this.handleUserListClick.bind(this),this.renderActionComponent=this.renderActionComponent.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{fileGuid:l.PropTypes.string,storage:l.PropTypes.object,maxShareCount:l.PropTypes.number,getSharedUsers:l.PropTypes.func,getFile:l.PropTypes.func,setPermission:l.PropTypes.func,showButton:l.PropTypes.bool,onButtonClick:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func,overflow:l.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},fileGuid:cow.currentFile.guid}}}]),a(t,[{key:"componentDidMount",value:function(){this.props.getFile(this.props.fileGuid),this.props.getSharedUsers(this.props.fileGuid)}},{key:"handleUserListClick",value:function(e,t){var n=this;"transfer"===t?this.onButtonClick("transfer"):this.props.setPermission(this.props.fileGuid,e.id,t).then(function(o){return o&&"SET_PERMISSION_FAILED"===o.type?y.default.alert({title:o.error.message,type:"error"}):void("add"===t?y.default.alert({title:"添加成功"}):"remove"===t?y.default.alert({title:"移除成功"}):"remove"===t&&e.id===cow.currentUser.id&&n.props.cleanModals())})}},{key:"onButtonClick",value:function(e){this.props.onButtonClick(e)}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.fileGuid,o=t.filePermissions[n],i=t.permissions[n],r=(0,c.map)(o,function(e){var n=t.users[e],o=i[e]||"editable";return(0,c.assign)({},n,{permission:o})});return r}},{key:"getGroupedUsers",value:function(e){var t=[],n=[],o=this.getFileTeamId();return(0,c.forEach)(e,function(e){e.team_id&&e.team_id===o?t.push(e):n.push(e)}),{teamMembers:t,otherMembers:n}}},{key:"getFileTeamId",value:function(){var e=void 0,t=this.props,n=t.storage,o=t.fileGuid,i=n.files[o];return i&&(e=i.teamId||0),e}},{key:"renderActionComponent",value:function(e){var t=this.props.storage.files[this.props.fileGuid];return u.default.createElement(p.default,{ownDropdown:!0,userId:e.id,file:t,permission:e.permission,getPopupContainer:function(){return document.querySelector(".teamwork-shared-users")},handleActionClick:this.handleUserListClick})}},{key:"render",value:function(){var e=this,t=void 0,n=this.props,o=n.storage,i=n.fileGuid,r=o.files[i]||{},a=this.getFileTeamId(),s=this.getSharedUsers(),l=a===cow.currentUser.team_id;if(l){var c=this.getGroupedUsers(s),d=c.teamMembers,p=c.otherMembers;t=[u.default.createElement(f.TabItem,{key:"1",title:"企业协作者 ("+d.length+")"},u.default.createElement(m.default,{overflow:this.props.overflow,data:d,renderAction:this.renderActionComponent})),u.default.createElement(f.TabItem,{key:"2",title:"外部协作者 ("+p.length+")"},u.default.createElement(m.default,{overflow:this.props.overflow,data:p,renderAction:this.renderActionComponent}))]}else 0!==a&&l||(t=u.default.createElement(f.TabItem,{key:"3",title:"协作者 ("+s.length+")"},u.default.createElement(m.default,{overflow:this.props.overflow,data:s,renderAction:this.renderActionComponent})));return u.default.createElement("div",{className:"teamwork-shared-users"},u.default.createElement(f.Tab,{customClass:"sm-tab",disableSetWidth:!0},t),this.props.showButton&&r.permissions&&r.permissions.collaboratorManageable&&u.default.createElement("button",{className:"btn btn-ok",onClick:function(){return e.onButtonClick("add")}},"添加协作者"))}}]),t}(l.Component);t.default=g,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(805),d=o(c),p=n(915),f=n(285),h=o(f),m={empty:"添加",editor:"可以编辑",commentator:"可以评论",reader:"只能阅读"},v=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleActionClick=this.handleActionClick.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{userId:l.PropTypes.number,email:l.PropTypes.string,permission:l.PropTypes.shape({permission:l.PropTypes.string,isCreator:l.PropTypes.bool,isOutsider:l.PropTypes.bool,fromParent:l.PropTypes.bool}),file:l.PropTypes.object,ownDropdown:l.PropTypes.bool,handleActionClick:l.PropTypes.func,getPopupContainer:l.PropTypes.func,classPrefix:l.PropTypes.string}}},{key:"defaultProps",get:function(){return{permission:{permission:"empty"},file:{teamId:void 0},ownDropdown:!1,getPopupContainer:function(){return document.body}}}}]),a(t,[{key:"handleActionClick",value:function(e){var t=e.key;switch(t){case"commentator":case"reader":if(!cow.currentUser.teamId)return;default:var n={id:this.props.userId,email:this.props.email};this.props.handleActionClick(n,t)}}},{key:"renderTransferOverlay",value:function(){return u.default.createElement(d.default,{className:"roles-menu",onClick:this.handleActionClick},u.default.createElement(d.default.Item,{key:"transfer"},u.default.createElement("span",null,"转让所有权")))}},{key:"renderPermissionOverlay",value:function(){var e=(0,h.default)("roles-menu",{personal:!cow.currentUser.teamId});return u.default.createElement(d.default,{className:e,onClick:this.handleActionClick},u.default.createElement(d.default.Item,{className:"item-editable",key:"editor"},u.default.createElement("span",null,"可以编辑"),u.default.createElement("span",null,"可以编辑、评论、分享文件")),u.default.createElement(d.default.Item,{className:"item-commentable",key:"commentator"},u.default.createElement("span",null,"可以评论"),u.default.createElement("span",null,"可以评论、不能编辑、分享文件"),u.default.createElement("div",{className:"tooltip s-tooltip right"},"企业版选项")),u.default.createElement(d.default.Item,{className:"item-readonly",key:"reader"},u.default.createElement("span",null,"只能阅读"),u.default.createElement("span",null,"不能编辑、评论、分享文件"),u.default.createElement("div",{className:"tooltip s-tooltip right"},"企业版选项")),u.default.createElement(d.default.Divider,null),u.default.createElement(d.default.Item,{className:"danger",key:"remove"},"移除"))}},{key:"render",value:function(){var e=this,t=void 0,n=this.props,o=n.permission,i=n.getPopupContainer;if("owner"===o.role){var r=this.props.userId===cow.currentUser.id,a=cow.currentUser.teamId===this.props.file.teamId&&("admin"===cow.currentUser.teamRole||"creator"===cow.currentUser.teamRole);t=r||a?u.default.createElement(p.Button,{mask:!0,getPopupContainer:i,overlay:this.renderTransferOverlay()},"所有者"):u.default.createElement("div",{className:"sm-dropdown-button no-overlay ownship"},"所有者")}else t="empty"===o.permission?u.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(){return e.handleActionClick({key:"add"})}},m[o.permission]):u.default.createElement(p.Button,{mask:!0,getPopupContainer:i,overlay:this.renderPermissionOverlay()},m[o.role]);return t}}]),t}(l.Component);t.default=v,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(806),r=o(i);t.default=r.default,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=o(c),p=n(807),f=o(p),h=function(e){function t(e){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={openKeys:[]},this.handleClick=this.handleClick.bind(this),this.handleOpenChange=this.handleOpenChange.bind(this)}return r(t,e),l(t,null,[{key:"propTypes",get:function(){return{mode:c.PropTypes.oneOf(["vertical","horizontal","inline"]),selectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultSelectedKeys:c.PropTypes.arrayOf(c.PropTypes.string),openKeys:c.PropTypes.arrayOf(c.PropTypes.string),defaultOpenKeys:c.PropTypes.arrayOf(c.PropTypes.string),onClick:c.PropTypes.func,className:c.PropTypes.string,prefixCls:c.PropTypes.string,onOpenChange:c.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-menu",onClick:a,onOpenChange:a,className:""}}}]),l(t,[{key:"componentWillReceiveProps",value:function(e){"inline"===this.props.mode&&"inline"!==e.mode&&(this.switchModeFromInline=!0),"openKeys"in e&&this.setOpenKeys(e.openKeys)}},{key:"handleClick",value:function(e){this.setOpenKeys([]),this.props.onClick(e)}},{key:"handleOpenChange",value:function(e){this.setOpenKeys(e),this.props.onOpenChange(e)}},{key:"setOpenKeys",value:function(e){"openKeys"in this.props||this.setState({openKeys:e})}},{key:"render",value:function(){var e={};return"inline"!==this.props.mode&&(e={openKeys:this.state.openKeys,onClick:this.handleClick,onOpenChange:this.handleOpenChange}),d.default.createElement(f.default,s({},this.props,e))}}]),t}(c.Component);t.default=h,h.Divider=p.Divider,h.Item=p.Item,h.SubMenu=p.SubMenu,h.ItemGroup=p.ItemGroup,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Divider=t.ItemGroup=t.MenuItemGroup=t.MenuItem=t.Item=t.SubMenu=void 0;var i=n(808),r=o(i),a=n(859),s=o(a),l=n(912),u=o(l),c=n(913),d=o(c),p=n(914),f=o(p);t.SubMenu=s.default,t.Item=u.default,t.MenuItem=u.default,t.MenuItemGroup=d.default,t.ItemGroup=d.default,t.Divider=f.default,t.default=r.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(809),r=o(i),a=n(7),s=o(a),l=n(847),u=o(l),c=n(857),d=s.default.createClass({displayName:"Menu",propTypes:{openSubMenuOnMouseEnter:a.PropTypes.bool,closeSubMenuOnMouseLeave:a.PropTypes.bool,selectedKeys:a.PropTypes.arrayOf(a.PropTypes.string),defaultSelectedKeys:a.PropTypes.arrayOf(a.PropTypes.string),defaultOpenKeys:a.PropTypes.arrayOf(a.PropTypes.string),openKeys:a.PropTypes.arrayOf(a.PropTypes.string),mode:a.PropTypes.string,onClick:a.PropTypes.func,onSelect:a.PropTypes.func,onDeselect:a.PropTypes.func,onDestroy:a.PropTypes.func,openTransitionName:a.PropTypes.string,openAnimation:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.object]),level:a.PropTypes.number,eventKey:a.PropTypes.string,selectable:a.PropTypes.bool,children:a.PropTypes.any},mixins:[u.default],getDefaultProps:function(){return{openSubMenuOnMouseEnter:!0,closeSubMenuOnMouseLeave:!0,selectable:!0,onClick:c.noop,onSelect:c.noop,onOpenChange:c.noop,onDeselect:c.noop,defaultSelectedKeys:[],defaultOpenKeys:[]}},getInitialState:function(){var e=this.props,t=e.defaultSelectedKeys,n=e.defaultOpenKeys;return"selectedKeys"in e&&(t=e.selectedKeys||[]),"openKeys"in e&&(n=e.openKeys||[]),{selectedKeys:t,openKeys:n}},componentWillReceiveProps:function(e){var t={};"selectedKeys"in e&&(t.selectedKeys=e.selectedKeys||[]),"openKeys"in e&&(t.openKeys=e.openKeys||[]),this.setState(t)},onDestroy:function(e){var t=this.state,n=this.props,o=t.selectedKeys,i=t.openKeys,r=o.indexOf(e);"selectedKeys"in n||r===-1||o.splice(r,1),r=i.indexOf(e),"openKeys"in n||r===-1||i.splice(r,1)},onItemHover:function(e){var t=this,n=e.item,o=this.props,i=o.mode,r=o.closeSubMenuOnMouseLeave,a=e.openChanges,s=void 0===a?[]:a;"inline"!==i&&!r&&n.isSubMenu&&!function(){var o=t.state.activeKey,i=t.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===o})[0];i&&i.props.open&&(s=s.concat({key:n.props.eventKey,item:n,originalEvent:e,open:!0}))}(),s=s.concat(this.getOpenChangesOnItemHover(e)),s.length&&this.onOpenChange(s)},onSelect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys,o=e.key;n=t.multiple?n.concat([o]):[o],"selectedKeys"in t||this.setState({selectedKeys:n}),t.onSelect((0,r.default)({},e,{selectedKeys:n}))}},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){var t=this.props,n=this.state.openKeys.concat(),o=!1,i=function(e){var t=!1;if(e.open)t=n.indexOf(e.key)===-1,t&&n.push(e.key);else{var i=n.indexOf(e.key);t=i!==-1,t&&n.splice(i,1)}o=o||t};Array.isArray(e)?e.forEach(i):i(e),o&&("openKeys"in this.props||this.setState({openKeys:n}),t.onOpenChange(n))},onDeselect:function(e){var t=this.props;if(t.selectable){var n=this.state.selectedKeys.concat(),o=e.key,i=n.indexOf(o);i!==-1&&n.splice(i,1),"selectedKeys"in t||this.setState({selectedKeys:n}),t.onDeselect((0,r.default)({},e,{selectedKeys:n}))}},getOpenTransitionName:function(){var e=this.props,t=e.openTransitionName,n=e.openAnimation;return t||"string"!=typeof n||(t=e.prefixCls+"-open-"+n),t},isInlineMode:function(){return"inline"===this.props.mode},lastOpenSubMenu:function(){var e=[],t=this.state.openKeys;return t.length&&(e=this.getFlatInstanceArray().filter(function(e){return e&&t.indexOf(e.props.eventKey)!==-1})),e[0]},renderMenuItem:function(e,t,n){if(!e)return null;var o=this.state,i={openKeys:o.openKeys,selectedKeys:o.selectedKeys,openSubMenuOnMouseEnter:this.props.openSubMenuOnMouseEnter};return this.renderCommonMenuItem(e,t,n,i)},render:function(){var e=(0,r.default)({},this.props);return e.className+=" "+e.prefixCls+"-root",this.renderRoot(e)}});t.default=d,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(810),r=o(i);t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}},function(e,t,n){e.exports={default:n(811),__esModule:!0}},function(e,t,n){n(812),e.exports=n(815).Object.assign},function(e,t,n){var o=n(813);o(o.S+o.F,"Object",{assign:n(828)})},function(e,t,n){var o=n(814),i=n(815),r=n(816),a=n(818),s="prototype",l=function(e,t,n){var u,c,d,p=e&l.F,f=e&l.G,h=e&l.S,m=e&l.P,v=e&l.B,y=e&l.W,g=f?i:i[t]||(i[t]={}),b=g[s],w=f?o:h?o[t]:(o[t]||{})[s];f&&(n=t);for(u in n)c=!p&&w&&void 0!==w[u],c&&u in g||(d=c?w[u]:n[u],g[u]=f&&"function"!=typeof w[u]?n[u]:v&&c?r(d,o):y&&w[u]==d?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[u]=d,e&l.R&&b&&!b[u]&&a(b,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var o=n(817);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(819),i=n(827);e.exports=n(823)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(820),i=n(822),r=n(826),a=Object.defineProperty;t.f=n(823)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(821);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(823)&&!n(824)(function(){return 7!=Object.defineProperty(n(825)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(824)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var o=n(821),i=n(814).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){var o=n(821);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var o=n(829),i=n(844),r=n(845),a=n(846),s=n(833),l=Object.assign;e.exports=!l||n(824)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=i.f,d=r.f;l>u;)for(var p,f=s(arguments[u++]),h=c?o(f).concat(c(f)):o(f),m=h.length,v=0;m>v;)d.call(f,p=h[v++])&&(n[p]=f[p]);return n}:l},function(e,t,n){var o=n(830),i=n(843);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){var o=n(831),i=n(832),r=n(836)(!1),a=n(840)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&o(s,n)&&u.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~r(u,n)||u.push(n));return u}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(833),i=n(835);e.exports=function(e){return o(i(e))}},function(e,t,n){var o=n(834);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(832),i=n(837),r=n(839);e.exports=function(e){return function(t,n,a){var s,l=o(t),u=i(l.length),c=r(a,u);if(e&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var o=n(838),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){var o=n(838),i=Math.max,r=Math.min;e.exports=function(e,t){return e=o(e),e<0?i(e+t,0):r(e,t)}},function(e,t,n){var o=n(841)("keys"),i=n(842);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var o=n(814),i="__core-js_shared__",r=o[i]||(o[i]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var o=n(835);e.exports=function(e){return Object(o(e))}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return!e.length||e.every(function(e){return!!e.props.disabled})}function r(e,t){var n=t,o=e.children,i=e.eventKey;if(n){var r=void 0;if((0,T.loopMenuItem)(o,function(e,t){e&&!e.props.disabled&&n===(0,T.getKeyFromChildrenIndex)(e,i,t)&&(r=!0)}),r)return n}return n=null,e.defaultActiveFirst?((0,T.loopMenuItem)(o,function(e,t){n||!e||e.props.disabled||(n=(0,T.getKeyFromChildrenIndex)(e,i,t))}),n):n}function a(e,t,n){n&&(void 0!==t?(this.instanceArray[e]=this.instanceArray[e]||[],this.instanceArray[e][t]=n):this.instanceArray[e]=n)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(848),l=o(s),u=n(809),c=o(u),d=n(7),p=o(d),f=n(162),h=o(f),m=n(852),v=o(m),y=n(853),g=o(y),b=n(285),w=o(b),C=n(854),E=o(C),T=n(857),P=n(858),k=o(P),_={propTypes:{focusable:d.PropTypes.bool,multiple:d.PropTypes.bool,style:d.PropTypes.object,defaultActiveFirst:d.PropTypes.bool,visible:d.PropTypes.bool,activeKey:d.PropTypes.string,selectedKeys:d.PropTypes.arrayOf(d.PropTypes.string),defaultSelectedKeys:d.PropTypes.arrayOf(d.PropTypes.string),defaultOpenKeys:d.PropTypes.arrayOf(d.PropTypes.string),openKeys:d.PropTypes.arrayOf(d.PropTypes.string),children:d.PropTypes.any},getDefaultProps:function(){return{prefixCls:"rc-menu",className:"",mode:"vertical",level:1,inlineIndent:24,visible:!0,focusable:!0,style:{}}},getInitialState:function(){var e=this.props;return{activeKey:r(e,e.activeKey)}},componentWillReceiveProps:function(e){var t=void 0;if("activeKey"in e)t={activeKey:r(e,e.activeKey)};else{var n=this.state.activeKey,o=r(e,n);o!==n&&(t={activeKey:o})}t&&this.setState(t)},shouldComponentUpdate:function(e){return this.props.visible||e.visible},componentWillMount:function(){this.instanceArray=[]},onKeyDown:function(e){var t=this,n=e.keyCode,o=void 0;if(this.getFlatInstanceArray().forEach(function(t){t&&t.props.active&&(o=t.onKeyDown(e))}),o)return 1;var i=null;return n!==v.default.UP&&n!==v.default.DOWN||(i=this.step(n===v.default.UP?-1:1)),i?(e.preventDefault(),this.setState({activeKey:i.props.eventKey},function(){(0,E.default)(h.default.findDOMNode(i),h.default.findDOMNode(t),{onlyScrollIfNeeded:!0})}),1):void 0===i?(e.preventDefault(),this.setState({activeKey:null}),1):void 0},getOpenChangesOnItemHover:function(e){var t=this.props.mode,n=e.key,o=e.hover,i=e.trigger,r=this.state.activeKey;if(i&&!o&&!this.props.closeSubMenuOnMouseLeave&&e.item.isSubMenu&&"inline"!==t||this.setState({activeKey:o?n:null}),o&&"inline"!==t){var a=this.getFlatInstanceArray().filter(function(e){return e&&e.props.eventKey===r})[0];if(a&&a.isSubMenu&&a.props.eventKey!==n)return{item:a,originalEvent:e,key:a.props.eventKey,open:!1}}return[]},getFlatInstanceArray:function(){var e=this.instanceArray,t=e.some(function(e){return Array.isArray(e)});return t&&(e=[],this.instanceArray.forEach(function(t){Array.isArray(t)?e.push.apply(e,t):e.push(t)}),this.instanceArray=e),e},renderCommonMenuItem:function(e,t,n,o){var i=this.state,r=this.props,s=(0,T.getKeyFromChildrenIndex)(e,r.eventKey,t),l=e.props,u=s===i.activeKey,d=(0,c.default)({mode:r.mode,level:r.level,inlineIndent:r.inlineIndent,renderMenuItem:this.renderMenuItem,rootPrefixCls:r.prefixCls,index:t,parentMenu:this,ref:l.disabled?void 0:(0,g.default)(e.ref,a.bind(this,t,n)),eventKey:s,closeSubMenuOnMouseLeave:r.closeSubMenuOnMouseLeave,onItemHover:this.onItemHover,active:!l.disabled&&u,multiple:r.multiple,onClick:this.onClick,openTransitionName:this.getOpenTransitionName(),openAnimation:r.openAnimation,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onDestroy:this.onDestroy,onSelect:this.onSelect},o);return"inline"===r.mode&&(d.closeSubMenuOnMouseLeave=d.openSubMenuOnMouseEnter=!1),p.default.cloneElement(e,d)},renderRoot:function(e){var t;this.instanceArray=[];var n=(t={},(0,l.default)(t,e.prefixCls,1),(0,l.default)(t,e.prefixCls+"-"+e.mode,1),(0,l.default)(t,e.className,!!e.className),t),o={className:(0,w.default)(n),role:"menu","aria-activedescendant":""};return e.id&&(o.id=e.id),e.focusable&&(o.tabIndex="0",o.onKeyDown=this.onKeyDown),p.default.createElement(k.default,(0,c.default)({style:e.style,tag:"ul",hiddenClassName:e.prefixCls+"-hidden",visible:e.visible},o),p.default.Children.map(e.children,this.renderMenuItem))},step:function(e){var t=this.getFlatInstanceArray(),n=this.state.activeKey,o=t.length;if(!o)return null;e<0&&(t=t.concat().reverse());var r=-1;if(t.every(function(e,t){return!e||e.props.eventKey!==n||(r=t,!1)}),this.props.defaultActiveFirst||r===-1||!i(t.slice(r,o-1)))for(var a=(r+1)%o,s=a;;){var l=t[s];if(l&&!l.props.disabled)return l;if(s=(s+1+o)%o,s===a)return null}}};t.default=_,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(849),r=o(i);t.default=function(e,t,n){return t in e?(0,r.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports={default:n(850),__esModule:!0}},function(e,t,n){n(851);var o=n(815).Object;e.exports=function(e,t,n){return o.defineProperty(e,t,n)}},function(e,t,n){var o=n(813);o(o.S+o.F*!n(823),"Object",{defineProperty:n(819).f})},function(e,t){"use strict";var n={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};n.isTextModifyingKeyEvent=function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=n.F1&&t<=n.F12)return!1;switch(t){case n.ALT:case n.CAPS_LOCK:case n.CONTEXT_MENU:case n.CTRL:case n.DOWN:case n.END:case n.ESC:case n.HOME:case n.INSERT:case n.LEFT:case n.MAC_FF_META:case n.META:case n.NUMLOCK:case n.NUM_CENTER:case n.PAGE_DOWN:case n.PAGE_UP:case n.PAUSE:case n.PRINT_SCREEN:case n.RIGHT:case n.SHIFT:case n.UP:case n.WIN_KEY:case n.WIN_KEY_RIGHT:return!1;default:return!0}},n.isCharacterKey=function(e){if(e>=n.ZERO&&e<=n.NINE)return!0;if(e>=n.NUM_ZERO&&e<=n.NUM_MULTIPLY)return!0;if(e>=n.A&&e<=n.Z)return!0;if(window.navigation.userAgent.indexOf("WebKit")!==-1&&0===e)return!0;switch(e){case n.SPACE:case n.QUESTION_MARK:case n.NUM_PLUS:case n.NUM_MINUS:case n.NUM_PERIOD:case n.NUM_DIVISION:case n.SEMICOLON:case n.DASH:case n.EQUALS:case n.COMMA:case n.PERIOD:case n.SLASH:case n.APOSTROPHE:case n.SINGLE_QUOTE:case n.OPEN_SQUARE_BRACKET:case n.BACKSLASH:case n.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},e.exports=n},function(e,t){"use strict";function n(){var e=arguments;return function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}e.exports=n},function(e,t,n){"use strict";e.exports=n(855)},function(e,t,n){"use strict";function o(e,t,n){n=n||{},9===t.nodeType&&(t=i.getWindow(t));var o=n.allowHorizontalScroll,r=n.onlyScrollIfNeeded,a=n.alignWithTop,s=n.alignWithLeft,l=n.offsetTop||0,u=n.offsetLeft||0,c=n.offsetBottom||0,d=n.offsetRight||0;o=void 0===o||o;var p=i.isWindow(t),f=i.offset(e),h=i.outerHeight(e),m=i.outerWidth(e),v=void 0,y=void 0,g=void 0,b=void 0,w=void 0,C=void 0,E=void 0,T=void 0,P=void 0,k=void 0;p?(E=t,k=i.height(E),P=i.width(E),T={left:i.scrollLeft(E),top:i.scrollTop(E)},w={left:f.left-T.left-u,top:f.top-T.top-l},C={left:f.left+m-(T.left+P)+d,top:f.top+h-(T.top+k)+c},b=T):(v=i.offset(t),y=t.clientHeight,g=t.clientWidth,b={left:t.scrollLeft,top:t.scrollTop},w={left:f.left-(v.left+(parseFloat(i.css(t,"borderLeftWidth"))||0))-u,top:f.top-(v.top+(parseFloat(i.css(t,"borderTopWidth"))||0))-l},C={left:f.left+m-(v.left+g+(parseFloat(i.css(t,"borderRightWidth"))||0))+d,top:f.top+h-(v.top+y+(parseFloat(i.css(t,"borderBottomWidth"))||0))+c}),w.top<0||C.top>0?a===!0?i.scrollTop(t,b.top+w.top):a===!1?i.scrollTop(t,b.top+C.top):w.top<0?i.scrollTop(t,b.top+w.top):i.scrollTop(t,b.top+C.top):r||(a=void 0===a||!!a,a?i.scrollTop(t,b.top+w.top):i.scrollTop(t,b.top+C.top)),o&&(w.left<0||C.left>0?s===!0?i.scrollLeft(t,b.left+w.left):s===!1?i.scrollLeft(t,b.left+C.left):w.left<0?i.scrollLeft(t,b.left+w.left):i.scrollLeft(t,b.left+C.left):r||(s=void 0===s||!!s,
s?i.scrollLeft(t,b.left+w.left):i.scrollLeft(t,b.left+C.left)))}var i=n(856);e.exports=o},function(e,t){"use strict";function n(e){var t=void 0,n=void 0,o=void 0,i=e.ownerDocument,r=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=t.left,o=t.top,n-=a.clientLeft||r.clientLeft||0,o-=a.clientTop||r.clientTop||0,{left:n,top:o}}function o(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],o="scroll"+(t?"Top":"Left");if("number"!=typeof n){var i=e.document;n=i.documentElement[o],"number"!=typeof n&&(n=i.body[o])}return n}function i(e){return o(e)}function r(e){return o(e,!0)}function a(e){var t=n(e),o=e.ownerDocument,a=o.defaultView||o.parentWindow;return t.left+=i(a),t.top+=r(a),t}function s(e,t,n){var o="",i=e.ownerDocument,r=n||i.defaultView.getComputedStyle(e,null);return r&&(o=r.getPropertyValue(t)||r[t]),o}function l(e,t){var n=e[T]&&e[T][t];if(C.test(n)&&!E.test(t)){var o=e.style,i=o[k],r=e[P][k];e[P][k]=e[T][k],o[k]="fontSize"===t?"1em":n||0,n=o.pixelLeft+_,o[k]=i,e[P][k]=r}return""===n?"auto":n}function u(e,t){for(var n=0;n<e.length;n++)t(e[n])}function c(e){return"border-box"===O(e,"boxSizing")}function d(e,t,n){var o={},i=e.style,r=void 0;for(r in t)t.hasOwnProperty(r)&&(o[r]=i[r],i[r]=t[r]);n.call(e);for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r])}function p(e,t,n){var o=0,i=void 0,r=void 0,a=void 0;for(r=0;r<t.length;r++)if(i=t[r])for(a=0;a<n.length;a++){var s=void 0;s="border"===i?i+n[a]+"Width":i+n[a],o+=parseFloat(O(e,s))||0}return o}function f(e){return null!=e&&e==e.window}function h(e,t,n){if(f(e))return"width"===t?I.viewportWidth(e):I.viewportHeight(e);if(9===e.nodeType)return"width"===t?I.docWidth(e):I.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?e.offsetWidth:e.offsetHeight,r=O(e),a=c(e,r),s=0;(null==i||i<=0)&&(i=void 0,s=O(e,t),(null==s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===n&&(n=a?N:x);var l=void 0!==i||a,u=i||s;if(n===x)return l?u-p(e,["border","padding"],o,r):s;if(l){var d=n===M?-p(e,["border"],o,r):p(e,["margin"],o,r);return u+(n===N?0:d)}return s+p(e,S.slice(n),o,r)}function m(e){var t=void 0,n=arguments;return 0!==e.offsetWidth?t=h.apply(void 0,n):d(e,L,function(){t=h.apply(void 0,n)}),t}function v(e,t,n){var o=n;{if("object"!==("undefined"==typeof t?"undefined":b(t)))return"undefined"!=typeof o?("number"==typeof o&&(o+="px"),void(e.style[t]=o)):O(e,t);for(var i in t)t.hasOwnProperty(i)&&v(e,i,t[i])}}function y(e,t){"static"===v(e,"position")&&(e.style.position="relative");var n=a(e),o={},i=void 0,r=void 0;for(r in t)t.hasOwnProperty(r)&&(i=parseFloat(v(e,r))||0,o[r]=i+t[r]-n[r]);v(e,o)}var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},w=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,C=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),E=/^(top|right|bottom|left)$/,T="currentStyle",P="runtimeStyle",k="left",_="px",O=void 0;"undefined"!=typeof window&&(O=window.getComputedStyle?s:l);var S=["margin","border","padding"],x=-1,M=2,N=1,j=0,I={};u(["Width","Height"],function(e){I["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],I["viewport"+e](n))},I["viewport"+e]=function(t){var n="client"+e,o=t.document,i=o.body,r=o.documentElement,a=r[n];return"CSS1Compat"===o.compatMode&&a||i&&i[n]||a}});var L={position:"absolute",visibility:"hidden",display:"block"};u(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);I["outer"+t]=function(t,n){return t&&m(t,e,n?j:N)};var n="width"===e?["Left","Right"]:["Top","Bottom"];I[e]=function(t,o){if(void 0===o)return t&&m(t,e,x);if(t){var i=O(t),r=c(t);return r&&(o+=p(t,["padding","border"],n,i)),v(t,e,o)}}}),e.exports=g({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){return"undefined"==typeof t?a(e):void y(e,t)},isWindow:f,each:u,css:v,clone:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var o=e.overflow;if(o)for(var n in e)e.hasOwnProperty(n)&&(t.overflow[n]=e.overflow[n]);return t},scrollLeft:function(e,t){if(f(e)){if(void 0===t)return i(e);window.scrollTo(t,r(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(f(e)){if(void 0===t)return r(e);window.scrollTo(i(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},I)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){}function r(e,t,n){var o=t||"";return e.key||o+"item_"+n}function a(e,t){var n=-1;u.default.Children.forEach(e,function(e){n++,e&&e.type&&e.type.isMenuItemGroup?u.default.Children.forEach(e.props.children,function(e){n++,t(e,n)}):t(e,n)})}function s(e,t,n){e&&!n.find&&u.default.Children.forEach(e,function(e){if(!n.find&&e){var o=e.type;if(!o||!(o.isSubMenu||o.isMenuItem||o.isMenuItemGroup))return;t.indexOf(e.key)!==-1?n.find=!0:e.props.children&&s(e.props.children,t,n)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=i,t.getKeyFromChildrenIndex=r,t.loopMenuItem=a,t.loopMenuItemRecusively=s;var l=n(7),u=o(l)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(809),r=o(i),a=n(7),s=o(a),l=s.default.createClass({displayName:"DOMWrap",propTypes:{tag:a.PropTypes.string,hiddenClassName:a.PropTypes.string,visible:a.PropTypes.bool},getDefaultProps:function(){return{tag:"div"}},render:function(){var e=(0,r.default)({},this.props);e.visible||(e.className=e.className||"",e.className+=" "+e.hiddenClassName);var t=e.tag;return delete e.tag,delete e.hiddenClassName,delete e.visible,s.default.createElement(t,e)}});t.default=l,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(848),r=o(i),a=n(809),s=o(a),l=n(860),u=o(l),c=n(7),d=o(c),p=n(852),f=o(p),h=n(285),m=o(h),v=n(857),y=0,g=d.default.createClass({displayName:"SubMenu",propTypes:{parentMenu:c.PropTypes.object,title:c.PropTypes.node,children:c.PropTypes.any,selectedKeys:c.PropTypes.array,openKeys:c.PropTypes.array,onClick:c.PropTypes.func,onOpenChange:c.PropTypes.func,rootPrefixCls:c.PropTypes.string,eventKey:c.PropTypes.string,multiple:c.PropTypes.bool,active:c.PropTypes.bool,onSelect:c.PropTypes.func,closeSubMenuOnMouseLeave:c.PropTypes.bool,openSubMenuOnMouseEnter:c.PropTypes.bool,onDeselect:c.PropTypes.func,onDestroy:c.PropTypes.func,onItemHover:c.PropTypes.func,onMouseEnter:c.PropTypes.func,onMouseLeave:c.PropTypes.func,onTitleMouseEnter:c.PropTypes.func,onTitleMouseLeave:c.PropTypes.func,onTitleClick:c.PropTypes.func},mixins:[n(905)],getDefaultProps:function(){return{onMouseEnter:v.noop,onMouseLeave:v.noop,onTitleMouseEnter:v.noop,onTitleMouseLeave:v.noop,onTitleClick:v.noop,title:""}},getInitialState:function(){return this.isSubMenu=1,{defaultActiveFirst:!1}},componentWillUnmount:function(){var e=this.props,t=e.onDestroy,n=e.eventKey,o=e.parentMenu;t&&t(n),o.subMenuInstance===this&&this.clearSubMenuTimers()},onDestroy:function(e){this.props.onDestroy(e)},onKeyDown:function(e){var t=e.keyCode,n=this.menuInstance,o=this.isOpen();if(t===f.default.ENTER)return this.onTitleClick(e),this.setState({defaultActiveFirst:!0}),!0;if(t===f.default.RIGHT)return o?n.onKeyDown(e):(this.triggerOpenChange(!0),this.setState({defaultActiveFirst:!0})),!0;if(t===f.default.LEFT){var i=void 0;if(!o)return;return i=n.onKeyDown(e),i||(this.triggerOpenChange(!1),i=!0),i}return!o||t!==f.default.UP&&t!==f.default.DOWN?void 0:n.onKeyDown(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onMouseEnter:function(e){var t=this.props;this.clearSubMenuLeaveTimer(t.parentMenu.subMenuInstance!==this),t.onMouseEnter({key:t.eventKey,domEvent:e})},onTitleMouseEnter:function(e){var t=this.props,n=t.parentMenu,o=t.eventKey,i=this;this.clearSubMenuTitleLeaveTimer(n.subMenuInstance!==i),n.menuItemInstance&&n.menuItemInstance.clearMenuItemMouseLeaveTimer(!0);var r=[];t.openSubMenuOnMouseEnter&&r.push({key:o,item:i,trigger:"mouseenter",open:!0}),t.onItemHover({key:o,item:i,hover:!0,trigger:"mouseenter",openChanges:r}),this.setState({defaultActiveFirst:!1}),t.onTitleMouseEnter({key:o,domEvent:e})},onTitleMouseLeave:function(e){var t=this,n=this.props,o=n.parentMenu,i=n.eventKey;o.subMenuInstance=this,o.subMenuTitleLeaveFn=function(){t.isMounted()&&("inline"===n.mode&&n.active&&n.onItemHover({key:i,item:t,hover:!1,trigger:"mouseleave"}),n.onTitleMouseLeave({key:n.eventKey,domEvent:e}))},o.subMenuTitleLeaveTimer=setTimeout(o.subMenuTitleLeaveFn,100)},onMouseLeave:function(e){var t=this,n=this.props,o=n.parentMenu,i=n.eventKey;o.subMenuInstance=this,o.subMenuLeaveFn=function(){if(t.isMounted()){if("inline"!==n.mode){var o=t.isOpen();o&&n.closeSubMenuOnMouseLeave&&n.active?n.onItemHover({key:i,item:t,hover:!1,trigger:"mouseleave",openChanges:[{key:i,item:t,trigger:"mouseleave",open:!1}]}):(n.active&&n.onItemHover({key:i,item:t,hover:!1,trigger:"mouseleave"}),o&&n.closeSubMenuOnMouseLeave&&t.triggerOpenChange(!1))}n.onMouseLeave({key:i,domEvent:e})}},o.subMenuLeaveTimer=setTimeout(o.subMenuLeaveFn,100)},onTitleClick:function(e){var t=this.props;t.onTitleClick({key:t.eventKey,domEvent:e}),t.openSubMenuOnMouseEnter||(this.triggerOpenChange(!this.isOpen(),"click"),this.setState({defaultActiveFirst:!1}))},onSubMenuClick:function(e){this.props.onClick(this.addKeyPath(e))},onSelect:function(e){this.props.onSelect(e)},onDeselect:function(e){this.props.onDeselect(e)},getPrefixCls:function(){return this.props.rootPrefixCls+"-submenu"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getOpenClassName:function(){return this.props.rootPrefixCls+"-submenu-open"},saveMenuInstance:function(e){this.menuInstance=e},addKeyPath:function(e){return(0,s.default)({},e,{keyPath:(e.keyPath||[]).concat(this.props.eventKey)})},triggerOpenChange:function(e,t){var n=this.props.eventKey;this.onOpenChange({key:n,item:this,trigger:t,open:e})},clearSubMenuTimers:function(){var e=void 0;this.clearSubMenuLeaveTimer(e),this.clearSubMenuTitleLeaveTimer(e)},clearSubMenuTitleLeaveTimer:function(){var e=void 0,t=this.props.parentMenu;t.subMenuTitleLeaveTimer&&(clearTimeout(t.subMenuTitleLeaveTimer),t.subMenuTitleLeaveTimer=null,e&&t.subMenuTitleLeaveFn&&t.subMenuTitleLeaveFn(),t.subMenuTitleLeaveFn=null)},clearSubMenuLeaveTimer:function(){var e=void 0,t=this.props.parentMenu;t.subMenuLeaveTimer&&(clearTimeout(t.subMenuLeaveTimer),t.subMenuLeaveTimer=null,e&&t.subMenuLeaveFn&&t.subMenuLeaveFn(),t.subMenuLeaveFn=null)},isChildrenSelected:function(){var e={find:!1};return(0,v.loopMenuItemRecusively)(this.props.children,this.props.selectedKeys,e),e.find},isOpen:function(){return this.props.openKeys.indexOf(this.props.eventKey)!==-1},renderChildren:function(e){var t=this.props,n={mode:"horizontal"===t.mode?"vertical":t.mode,visible:this.isOpen(),level:t.level+1,inlineIndent:t.inlineIndent,focusable:!1,onClick:this.onSubMenuClick,onSelect:this.onSelect,onDeselect:this.onDeselect,onDestroy:this.onDestroy,selectedKeys:t.selectedKeys,eventKey:t.eventKey+"-menu-",openKeys:t.openKeys,openTransitionName:t.openTransitionName,openAnimation:t.openAnimation,onOpenChange:this.onOpenChange,closeSubMenuOnMouseLeave:t.closeSubMenuOnMouseLeave,defaultActiveFirst:this.state.defaultActiveFirst,multiple:t.multiple,prefixCls:t.rootPrefixCls,id:this._menuId,ref:this.saveMenuInstance};return d.default.createElement(u.default,n,e)},render:function(){var e,t=this.isOpen();this.haveOpen=this.haveOpen||t;var n=this.props,o=this.getPrefixCls(),i=(e={},(0,r.default)(e,n.className,!!n.className),(0,r.default)(e,o+"-"+n.mode,1),e);i[this.getOpenClassName()]=t,i[this.getActiveClassName()]=n.active,i[this.getDisabledClassName()]=n.disabled,i[this.getSelectedClassName()]=this.isChildrenSelected(),this._menuId||(n.eventKey?this._menuId=n.eventKey+"$Menu":this._menuId="$__$"+ ++y+"$Menu"),i[o]=!0,i[o+"-"+n.mode]=1;var a={},l={},u={};n.disabled||(a={onClick:this.onTitleClick},l={onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter},u={onMouseEnter:this.onTitleMouseEnter,onMouseLeave:this.onTitleMouseLeave});var c={};return"inline"===n.mode&&(c.paddingLeft=n.inlineIndent*n.level),d.default.createElement("li",(0,s.default)({className:(0,m.default)(i)},l),d.default.createElement("div",(0,s.default)({style:c,className:o+"-title"},u,a,{"aria-expanded":t,"aria-owns":this._menuId,"aria-haspopup":"true"}),n.title),this.renderChildren(n.children))}});g.isSubMenu=1,t.default=g,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(861),r=o(i),a=n(809),s=o(a),l=n(7),u=o(l),c=n(847),d=o(c),p=n(896),f=o(p),h=u.default.createClass({displayName:"SubPopupMenu",propTypes:{onSelect:l.PropTypes.func,onClick:l.PropTypes.func,onDeselect:l.PropTypes.func,onOpenChange:l.PropTypes.func,onDestroy:l.PropTypes.func,openTransitionName:l.PropTypes.string,openAnimation:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.object]),openKeys:l.PropTypes.arrayOf(l.PropTypes.string),closeSubMenuOnMouseLeave:l.PropTypes.bool,visible:l.PropTypes.bool,children:l.PropTypes.any},mixins:[d.default],onDeselect:function(e){this.props.onDeselect(e)},onSelect:function(e){this.props.onSelect(e)},onClick:function(e){this.props.onClick(e)},onOpenChange:function(e){this.props.onOpenChange(e)},onDestroy:function(e){this.props.onDestroy(e)},onItemHover:function(e){var t=e.openChanges,n=void 0===t?[]:t;n=n.concat(this.getOpenChangesOnItemHover(e)),n.length&&this.onOpenChange(n)},getOpenTransitionName:function(){return this.props.openTransitionName},renderMenuItem:function(e,t,n){if(!e)return null;var o=this.props,i={openKeys:o.openKeys,selectedKeys:o.selectedKeys,openSubMenuOnMouseEnter:!0};return this.renderCommonMenuItem(e,t,n,i)},render:function(){var e=this.renderFirst;if(this.renderFirst=1,this.haveOpened=this.haveOpened||this.props.visible,!this.haveOpened)return null;var t=!0;!e&&this.props.visible&&(t=!1);var n=(0,s.default)({},this.props);n.className+=" "+n.prefixCls+"-sub";var o={};return n.openTransitionName?o.transitionName=n.openTransitionName:"object"===(0,r.default)(n.openAnimation)&&(o.animation=(0,s.default)({},n.openAnimation),t||delete o.animation.appear),u.default.createElement(f.default,(0,s.default)({},o,{showProp:"visible",component:"",transitionAppear:t}),this.renderRoot(n))}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(862),r=o(i),a=n(882),s=o(a),l="function"==typeof s.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(r.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"==typeof e?"undefined":l(e)}},function(e,t,n){e.exports={default:n(863),__esModule:!0}},function(e,t,n){n(864),n(877),e.exports=n(881).f("iterator")},function(e,t,n){"use strict";var o=n(865)(!0);n(866)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=o(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var o=n(838),i=n(835);e.exports=function(e){return function(t,n){var r,a,s=String(i(t)),l=o(n),u=s.length;return l<0||l>=u?e?"":void 0:(r=s.charCodeAt(l),r<55296||r>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):r:e?s.slice(l,l+2):(r-55296<<10)+(a-56320)+65536)}}},function(e,t,n){"use strict";var o=n(867),i=n(813),r=n(868),a=n(818),s=n(831),l=n(869),u=n(870),c=n(874),d=n(876),p=n(875)("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",v="values",y=function(){return this};e.exports=function(e,t,n,g,b,w,C){u(n,t,g);var E,T,P,k=function(e){if(!f&&e in x)return x[e];switch(e){case m:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",O=b==v,S=!1,x=e.prototype,M=x[p]||x[h]||b&&x[b],N=M||k(b),j=b?O?k("entries"):N:void 0,I="Array"==t?x.entries||M:M;if(I&&(P=d(I.call(new e)),P!==Object.prototype&&(c(P,_,!0),o||s(P,p)||a(P,p,y))),O&&M&&M.name!==v&&(S=!0,N=function(){return M.call(this)}),o&&!C||!f&&!S&&x[p]||a(x,p,N),l[t]=N,l[_]=y,b)if(E={values:O?N:k(v),keys:w?N:k(m),entries:j},C)for(T in E)T in x||r(x,T,E[T]);else i(i.P+i.F*(f||S),t,E);return E}},function(e,t){e.exports=!0},function(e,t,n){e.exports=n(818)},function(e,t){e.exports={}},function(e,t,n){"use strict";var o=n(871),i=n(827),r=n(874),a={};n(818)(a,n(875)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=o(a,{next:i(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var o=n(820),i=n(872),r=n(843),a=n(840)("IE_PROTO"),s=function(){},l="prototype",u=function(){var e,t=n(825)("iframe"),o=r.length,i="<",a=">";for(t.style.display="none",n(873).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(i+"script"+a+"document.F=Object"+i+"/script"+a),e.close(),u=e.F;o--;)delete u[l][r[o]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=o(e),n=new s,s[l]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var o=n(819),i=n(820),r=n(829);e.exports=n(823)?Object.defineProperties:function(e,t){i(e);for(var n,a=r(t),s=a.length,l=0;s>l;)o.f(e,n=a[l++],t[n]);return e}},function(e,t,n){e.exports=n(814).document&&document.documentElement},function(e,t,n){var o=n(819).f,i=n(831),r=n(875)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,r)&&o(e,r,{configurable:!0,value:t})}},function(e,t,n){var o=n(841)("wks"),i=n(842),r=n(814).Symbol,a="function"==typeof r,s=e.exports=function(e){return o[e]||(o[e]=a&&r[e]||(a?r:i)("Symbol."+e))};s.store=o},function(e,t,n){var o=n(831),i=n(846),r=n(840)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),o(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){n(878);for(var o=n(814),i=n(818),r=n(869),a=n(875)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=o[u],d=c&&c.prototype;d&&!d[a]&&i(d,a,u),r[u]=r.Array}},function(e,t,n){"use strict";var o=n(879),i=n(880),r=n(869),a=n(832);e.exports=n(866)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),r.Arguments=r.Array,o("keys"),o("values"),o("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){t.f=n(875)},function(e,t,n){e.exports={default:n(883),__esModule:!0}},function(e,t,n){n(884),n(893),n(894),n(895),e.exports=n(815).Symbol},function(e,t,n){"use strict";var o=n(814),i=n(831),r=n(823),a=n(813),s=n(868),l=n(885).KEY,u=n(824),c=n(841),d=n(874),p=n(842),f=n(875),h=n(881),m=n(886),v=n(887),y=n(888),g=n(889),b=n(820),w=n(832),C=n(826),E=n(827),T=n(871),P=n(890),k=n(892),_=n(819),O=n(829),S=k.f,x=_.f,M=P.f,N=o.Symbol,j=o.JSON,I=j&&j.stringify,L="prototype",A=f("_hidden"),D=f("toPrimitive"),U={}.propertyIsEnumerable,R=c("symbol-registry"),F=c("symbols"),B=c("op-symbols"),W=Object[L],z="function"==typeof N,H=o.QObject,K=!H||!H[L]||!H[L].findChild,V=r&&u(function(){return 7!=T(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(e,t,n){var o=S(W,t);o&&delete W[t],x(e,t,n),o&&e!==W&&x(W,t,o)}:x,G=function(e){var t=F[e]=T(N[L]);return t._k=e,t},q=z&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},$=function(e,t,n){return e===W&&$(B,t,n),b(e),t=C(t,!0),b(n),i(F,t)?(n.enumerable?(i(e,A)&&e[A][t]&&(e[A][t]=!1),n=T(n,{enumerable:E(0,!1)})):(i(e,A)||x(e,A,E(1,{})),e[A][t]=!0),V(e,t,n)):x(e,t,n)},Y=function(e,t){b(e);for(var n,o=y(t=w(t)),i=0,r=o.length;r>i;)$(e,n=o[i++],t[n]);return e},X=function(e,t){return void 0===t?T(e):Y(T(e),t)},Z=function(e){var t=U.call(this,e=C(e,!0));return!(this===W&&i(F,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,A)&&this[A][e])||t)},J=function(e,t){if(e=w(e),t=C(t,!0),e!==W||!i(F,t)||i(B,t)){var n=S(e,t);return!n||!i(F,t)||i(e,A)&&e[A][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=M(w(e)),o=[],r=0;n.length>r;)i(F,t=n[r++])||t==A||t==l||o.push(t);return o},ee=function(e){for(var t,n=e===W,o=M(n?B:w(e)),r=[],a=0;o.length>a;)!i(F,t=o[a++])||n&&!i(W,t)||r.push(F[t]);return r};z||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===W&&t.call(B,n),i(this,A)&&i(this[A],e)&&(this[A][e]=!1),V(this,e,E(1,n))};return r&&K&&V(W,e,{configurable:!0,set:t}),G(e)},s(N[L],"toString",function(){return this._k}),k.f=J,_.f=$,n(891).f=P.f=Q,n(845).f=Z,n(844).f=ee,r&&!n(867)&&s(W,"propertyIsEnumerable",Z,!0),h.f=function(e){return G(f(e))}),a(a.G+a.W+a.F*!z,{Symbol:N});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var te=O(f.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(R,e+="")?R[e]:R[e]=N(e)},keyFor:function(e){if(q(e))return v(R,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!z,"Object",{create:X,defineProperty:$,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),j&&a(a.S+a.F*(!z||u(function(){var e=N();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);return t=o[1],"function"==typeof t&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!q(t))return t}),o[1]=t,I.apply(j,o)}}}),N[L][D]||n(818)(N[L],D,N[L].valueOf),d(N,"Symbol"),d(Math,"Math",!0),d(o.JSON,"JSON",!0)},function(e,t,n){var o=n(842)("meta"),i=n(821),r=n(831),a=n(819).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(824)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,o,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[o].i},p=function(e,t){if(!r(e,o)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[o].w},f=function(e){return u&&h.NEED&&l(e)&&!r(e,o)&&c(e),e},h=e.exports={KEY:o,NEED:!1,fastKey:d,getWeak:p,onFreeze:f}},function(e,t,n){var o=n(814),i=n(815),r=n(867),a=n(881),s=n(819).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var o=n(829),i=n(832);e.exports=function(e,t){for(var n,r=i(e),a=o(r),s=a.length,l=0;s>l;)if(r[n=a[l++]]===t)return n}},function(e,t,n){var o=n(829),i=n(844),r=n(845);e.exports=function(e){var t=o(e),n=i.f;if(n)for(var a,s=n(e),l=r.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var o=n(834);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,n){var o=n(832),i=n(891).f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?s(e):i(o(e))}},function(e,t,n){var o=n(830),i=n(843).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,i)}},function(e,t,n){var o=n(845),i=n(827),r=n(832),a=n(826),s=n(831),l=n(822),u=Object.getOwnPropertyDescriptor;t.f=n(823)?u:function(e,t){if(e=r(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(886)("asyncIterator")},function(e,t,n){n(886)("observable")},function(e,t,n){"use strict";e.exports=n(897)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.children;return l.default.isValidElement(t)&&!t.key?l.default.cloneElement(t,{key:h}):t}function a(){}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),l=o(s),u=n(898),c=n(899),d=o(c),p=n(904),f=o(p),h="rc_animate_"+Date.now(),m=l.default.createClass({displayName:"Animate",propTypes:{component:l.default.PropTypes.any,animation:l.default.PropTypes.object,transitionName:l.default.PropTypes.oneOfType([l.default.PropTypes.string,l.default.PropTypes.object]),transitionEnter:l.default.PropTypes.bool,transitionAppear:l.default.PropTypes.bool,exclusive:l.default.PropTypes.bool,transitionLeave:l.default.PropTypes.bool,onEnd:l.default.PropTypes.func,onEnter:l.default.PropTypes.func,onLeave:l.default.PropTypes.func,onAppear:l.default.PropTypes.func,showProp:l.default.PropTypes.string},getDefaultProps:function(){return{animation:{},component:"span",transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:a,onEnter:a,onLeave:a,onAppear:a}},getInitialState:function(){return this.currentlyAnimatingKeys={},this.keysToEnter=[],this.keysToLeave=[],{children:(0,u.toArrayChildren)(r(this.props))}},componentDidMount:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter(function(e){return!!e.props[t]})),n.forEach(function(t){t&&e.performAppear(t.key)})},componentWillReceiveProps:function(e){var t=this;this.nextProps=e;var n=(0,u.toArrayChildren)(r(e)),o=this.props;o.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){t.stop(e)});var a=o.showProp,s=this.currentlyAnimatingKeys,c=o.exclusive?(0,u.toArrayChildren)(r(o)):this.state.children,d=[];a?(c.forEach(function(e){var t=e&&(0,u.findChildInChildrenByKey)(n,e.key),o=void 0;o=t&&t.props[a]||!e.props[a]?t:l.default.cloneElement(t||e,i({},a,!0)),o&&d.push(o)}),n.forEach(function(e){e&&(0,u.findChildInChildrenByKey)(c,e.key)||d.push(e)})):d=(0,u.mergeChildren)(c,n),this.setState({children:d}),n.forEach(function(e){var n=e&&e.key;if(!e||!s[n]){var o=e&&(0,u.findChildInChildrenByKey)(c,n);if(a){var i=e.props[a];if(o){var r=(0,u.findShownChildInChildrenByKey)(c,n,a);!r&&i&&t.keysToEnter.push(n)}else i&&t.keysToEnter.push(n)}else o||t.keysToEnter.push(n)}}),c.forEach(function(e){var o=e&&e.key;if(!e||!s[o]){var i=e&&(0,u.findChildInChildrenByKey)(n,o);if(a){var r=e.props[a];if(i){var l=(0,u.findShownChildInChildrenByKey)(n,o,a);!l&&r&&t.keysToLeave.push(o)}else r&&t.keysToLeave.push(o)}else i||t.keysToLeave.push(o)}})},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillEnter(this.handleDoneAdding.bind(this,e,"enter")))},performAppear:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillAppear(this.handleDoneAdding.bind(this,e,"appear")))},handleDoneAdding:function(e,t){var n=this.props;if(delete this.currentlyAnimatingKeys[e],!n.exclusive||n===this.nextProps){var o=(0,u.toArrayChildren)(r(n));this.isValidChildByKey(o,e)?"appear"===t?f.default.allowAppearCallback(n)&&(n.onAppear(e),n.onEnd(e,!0)):f.default.allowEnterCallback(n)&&(n.onEnter(e),n.onEnd(e,!0)):this.performLeave(e)}},performLeave:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillLeave(this.handleDoneLeaving.bind(this,e)))},handleDoneLeaving:function(e){var t=this.props;if(delete this.currentlyAnimatingKeys[e],!t.exclusive||t===this.nextProps){var n=(0,u.toArrayChildren)(r(t));if(this.isValidChildByKey(n,e))this.performEnter(e);else{var o=function(){f.default.allowLeaveCallback(t)&&(t.onLeave(e),t.onEnd(e,!1))};this.isMounted()&&!(0,u.isSameChildren)(this.state.children,n,t.showProp)?this.setState({children:n},o):o()}}},isValidChildByKey:function(e,t){var n=this.props.showProp;return n?(0,u.findShownChildInChildrenByKey)(e,t,n):(0,u.findChildInChildrenByKey)(e,t)},stop:function(e){delete this.currentlyAnimatingKeys[e];var t=this.refs[e];t&&t.stop()},render:function(){var e=this.props;this.nextProps=e;var t=this.state.children,n=null;t&&(n=t.map(function(t){if(null===t||void 0===t)return t;if(!t.key)throw new Error("must set key for <rc-animate> children");return l.default.createElement(d.default,{key:t.key,ref:t.key,animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},t)}));var o=e.component;if(o){var i=e;return"string"==typeof o&&(i={className:e.className,style:e.style}),l.default.createElement(o,i,n)}return n[0]||null}});t.default=m,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=[];return d.default.Children.forEach(e,function(e){t.push(e)}),t}function r(e,t){var n=null;return e&&e.forEach(function(e){n||e&&e.key===t&&(n=e)}),n}function a(e,t,n){var o=null;return e&&e.forEach(function(e){if(e&&e.key===t&&e.props[n]){if(o)throw new Error("two child with same key for <rc-animate> children");o=e}}),o}function s(e,t,n){var o=0;return e&&e.forEach(function(e){o||(o=e&&e.key===t&&!e.props[n])}),o}function l(e,t,n){var o=e.length===t.length;return o&&e.forEach(function(e,i){var r=t[i];e&&r&&(e&&!r||!e&&r?o=!1:e.key!==r.key?o=!1:n&&e.props[n]!==r.props[n]&&(o=!1))}),o}function u(e,t){var n=[],o={},i=[];return e.forEach(function(e){e&&r(t,e.key)?i.length&&(o[e.key]=i,i=[]):i.push(e)}),t.forEach(function(e){e&&o.hasOwnProperty(e.key)&&(n=n.concat(o[e.key])),n.push(e)}),n=n.concat(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.toArrayChildren=i,t.findChildInChildrenByKey=r,t.findShownChildInChildrenByKey=a,t.findHiddenChildInChildrenByKey=s,t.isSameChildren=l,t.mergeChildren=u;var c=n(7),d=o(c)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=n(7),a=o(r),s=n(162),l=o(s),u=n(900),c=o(u),d=n(904),p=o(d),f={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},h=a.default.createClass({displayName:"AnimateChild",propTypes:{children:a.default.PropTypes.any},componentWillUnmount:function(){this.stop()},componentWillEnter:function(e){p.default.isEnterSupported(this.props)?this.transition("enter",e):e()},componentWillAppear:function(e){p.default.isAppearSupported(this.props)?this.transition("appear",e):e()},componentWillLeave:function(e){p.default.isLeaveSupported(this.props)?this.transition("leave",e):e()},transition:function(e,t){var n=this,o=l.default.findDOMNode(this),r=this.props,a=r.transitionName,s="object"===("undefined"==typeof a?"undefined":i(a));this.stop();var d=function(){n.stopper=null,t()};if((u.isCssAnimationSupported||!r.animation[e])&&a&&r[f[e]]){var p=s?a[e]:a+"-"+e,h=p+"-active";s&&a[e+"Active"]&&(h=a[e+"Active"]),this.stopper=(0,c.default)(o,{name:p,active:h},d)}else this.stopper=r.animation[e](o,d)},
stop:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())},render:function(){return this.props.children}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=window.getComputedStyle(e),o="",i=0;i<h.length&&!(o=n.getPropertyValue(h[i]+t));i++);return o}function r(e){if(p){var t=parseFloat(i(e,"transition-delay"))||0,n=parseFloat(i(e,"transition-duration"))||0,o=parseFloat(i(e,"animation-delay"))||0,r=parseFloat(i(e,"animation-duration"))||0,a=Math.max(n+t,r+o);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},1e3*a+200)}}function a(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(901),u=o(l),c=n(902),d=o(c),p=0!==u.default.endEvents.length,f=["Webkit","Moz","O","ms"],h=["-webkit-","-moz-","-o-","ms-",""],m=function(e,t,n){var o="object"===("undefined"==typeof t?"undefined":s(t)),i=o?t.name:t,l=o?t.active:t+"-active",c=n,p=void 0,f=void 0,h=(0,d.default)(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(c=n.end,p=n.start,f=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),h.remove(i),h.remove(l),u.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,c&&c())},u.default.addEndEventListener(e,e.rcEndListener),p&&p(),h.add(i),e.rcAnimTimeout=setTimeout(function(){e.rcAnimTimeout=null,h.add(l),f&&setTimeout(f,0),r(e)},30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};m.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),u.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},u.default.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,r(e)},0)},m.setTransition=function(e,t,n){var o=t,i=n;void 0===n&&(i=o,o=""),o=o||"",f.forEach(function(t){e.style[t+"Transition"+o]=i})},m.isCssAnimationSupported=p,t.default=m,e.exports=t.default},function(e,t){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete r.animationend.animation,"TransitionEvent"in window||delete r.transitionend.transition;for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];for(var i in o)if(i in t){a.push(o[i]);break}}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}Object.defineProperty(t,"__esModule",{value:!0});var r={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},a=[];"undefined"!=typeof window&&"undefined"!=typeof document&&n();var s={addEndEventListener:function(e,t){return 0===a.length?void window.setTimeout(t,0):void a.forEach(function(n){o(e,n,t)})},endEvents:a,removeEndEventListener:function(e,t){0!==a.length&&a.forEach(function(n){i(e,n,t)})}};t.default=s,e.exports=t.default},function(e,t,n){function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var i=n(903)}catch(e){var i=n(903)}var r=/\s+/,a=Object.prototype.toString;e.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=i(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(r);return""===n[0]&&n.shift(),n},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}};t.default=n,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(852),r=o(i),a=n(906),s=o(a),l=n(911),u=o(l),c=n(162),d=o(c);t.default={componentDidMount:function(){this.componentDidUpdate()},componentDidUpdate:function(){"inline"!==this.props.mode&&(this.props.open?this.bindRootCloseHandlers():this.unbindRootCloseHandlers())},handleDocumentKeyUp:function(e){e.keyCode===r.default.ESC&&this.props.onItemHover({key:this.props.eventKey,item:this,hover:!1})},handleDocumentClick:function(e){if(!(0,u.default)(d.default.findDOMNode(this),e.target)){var t=this.props;t.onItemHover({hover:!1,item:this,key:this.props.eventKey}),this.triggerOpenChange(!1)}},bindRootCloseHandlers:function(){this._onDocumentClickListener||(this._onDocumentClickListener=(0,s.default)(document,"click",this.handleDocumentClick),this._onDocumentKeyupListener=(0,s.default)(document,"keyup",this.handleDocumentKeyUp))},unbindRootCloseHandlers:function(){this._onDocumentClickListener&&(this._onDocumentClickListener.remove(),this._onDocumentClickListener=null),this._onDocumentKeyupListener&&(this._onDocumentKeyupListener.remove(),this._onDocumentKeyupListener=null)},componentWillUnmount:function(){this.unbindRootCloseHandlers()}},e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=l.default.unstable_batchedUpdates?function(e){l.default.unstable_batchedUpdates(n,e)}:n;return(0,a.default)(e,t,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(907),a=o(r),s=n(162),l=o(s);e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){function o(t){var o=new a.default(t);n.call(e,o)}return e.addEventListener?(e.addEventListener(t,o,!1),{remove:function(){e.removeEventListener(t,o,!1)}}):e.attachEvent?(e.attachEvent("on"+t,o),{remove:function(){e.detachEvent("on"+t,o)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(908),a=o(r);e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return null===e||void 0===e}function r(){return p}function a(){return f}function s(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;u.default.call(this),this.nativeEvent=e;var o=a;"defaultPrevented"in e?o=e.defaultPrevented?r:a:"getPreventDefault"in e?o=e.getPreventDefault()?r:a:"returnValue"in e&&(o=e.returnValue===f?r:a),this.isDefaultPrevented=o;var i=[],s=void 0,l=void 0,c=void 0,d=h.concat();for(m.forEach(function(e){t.match(e.reg)&&(d=d.concat(e.props),e.fix&&i.push(e.fix))}),l=d.length;l;)c=d[--l],this[c]=e[c];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),l=i.length;l;)(s=i[--l])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var l=n(909),u=o(l),c=n(910),d=o(c),p=!0,f=!1,h=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],m=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){i(e.which)&&(e.which=i(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,o=void 0,i=void 0,r=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,l=t.wheelDeltaX,u=t.detail;r&&(i=r/120),u&&(i=0-(u%3===0?u/3:u)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(o=0,n=0-i):a===e.VERTICAL_AXIS&&(n=0,o=i)),void 0!==s&&(o=s/120),void 0!==l&&(n=-1*l/120),n||o||(o=i),void 0!==n&&(e.deltaX=n),void 0!==o&&(e.deltaY=o),void 0!==i&&(e.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,o=void 0,r=void 0,a=e.target,s=t.button;return a&&i(e.pageX)&&!i(t.clientX)&&(n=a.ownerDocument||document,o=n.documentElement,r=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(1&s?e.which=1:2&s?e.which=3:4&s?e.which=2:e.which=0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===a?e.toElement:e.fromElement),e}}],v=u.default.prototype;(0,d.default)(s.prototype,v,{constructor:s,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=f,v.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=p,v.stopPropagation.call(this)}}),t.default=s,e.exports=t.default},function(e,t){"use strict";function n(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==o.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,t){for(var o,s,l=n(e),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var c in o)r.call(o,c)&&(l[c]=o[c]);if(i){s=i(o);for(var d=0;d<s.length;d++)a.call(o,s[d])&&(l[s[d]]=o[s[d]])}}return l}},function(e,t){"use strict";e.exports=function(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(809),r=o(i),a=n(7),s=o(a),l=n(852),u=o(l),c=n(285),d=o(c),p=n(857),f=s.default.createClass({displayName:"MenuItem",propTypes:{rootPrefixCls:a.PropTypes.string,eventKey:a.PropTypes.string,active:a.PropTypes.bool,children:a.PropTypes.any,selectedKeys:a.PropTypes.array,disabled:a.PropTypes.bool,title:a.PropTypes.string,onSelect:a.PropTypes.func,onClick:a.PropTypes.func,onDeselect:a.PropTypes.func,parentMenu:a.PropTypes.object,onItemHover:a.PropTypes.func,onDestroy:a.PropTypes.func,onMouseEnter:a.PropTypes.func,onMouseLeave:a.PropTypes.func},getDefaultProps:function(){return{onSelect:p.noop,onMouseEnter:p.noop,onMouseLeave:p.noop}},componentWillUnmount:function(){var e=this.props;e.onDestroy&&e.onDestroy(e.eventKey),e.parentMenu.menuItemInstance===this&&this.clearMenuItemMouseLeaveTimer()},onKeyDown:function(e){var t=e.keyCode;if(t===u.default.ENTER)return this.onClick(e),!0},onMouseLeave:function(e){var t=this,n=this.props,o=n.eventKey,i=n.parentMenu;i.menuItemInstance=this,i.menuItemMouseLeaveFn=function(){t.isMounted()&&n.active&&n.onItemHover({key:o,item:t,hover:!1,domEvent:e,trigger:"mouseleave"})},i.menuItemMouseLeaveTimer=setTimeout(i.menuItemMouseLeaveFn,30),n.onMouseLeave({key:o,domEvent:e})},onMouseEnter:function(e){var t=this.props,n=t.eventKey,o=t.parentMenu;this.clearMenuItemMouseLeaveTimer(o.menuItemInstance!==this),o.subMenuInstance&&o.subMenuInstance.clearSubMenuTimers(),t.onItemHover({key:n,item:this,hover:!0,domEvent:e,trigger:"mouseenter"}),t.onMouseEnter({key:n,domEvent:e})},onClick:function(e){var t=this.props,n=this.isSelected(),o=t.eventKey,i={key:o,keyPath:[o],item:this,domEvent:e};t.onClick(i),t.multiple?n?t.onDeselect(i):t.onSelect(i):n||t.onSelect(i)},getPrefixCls:function(){return this.props.rootPrefixCls+"-item"},getActiveClassName:function(){return this.getPrefixCls()+"-active"},getSelectedClassName:function(){return this.getPrefixCls()+"-selected"},getDisabledClassName:function(){return this.getPrefixCls()+"-disabled"},clearMenuItemMouseLeaveTimer:function(){var e=this.props,t=void 0,n=e.parentMenu;n.menuItemMouseLeaveTimer&&(clearTimeout(n.menuItemMouseLeaveTimer),n.menuItemMouseLeaveTimer=null,t&&n.menuItemMouseLeaveFn&&n.menuItemMouseLeaveFn(),n.menuItemMouseLeaveFn=null)},isSelected:function(){return this.props.selectedKeys.indexOf(this.props.eventKey)!==-1},render:function(){var e=this.props,t=this.isSelected(),n={};n[this.getActiveClassName()]=!e.disabled&&e.active,n[this.getSelectedClassName()]=t,n[this.getDisabledClassName()]=e.disabled,n[this.getPrefixCls()]=!0,n[e.className]=!!e.className;var o=(0,r.default)({},e.attribute,{title:e.title,className:(0,d.default)(n),role:"menuitem","aria-selected":t,"aria-disabled":e.disabled}),i={};e.disabled||(i={onClick:this.onClick,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter});var a=(0,r.default)({},e.style);return"inline"===e.mode&&(a.paddingLeft=e.inlineIndent*e.level),s.default.createElement("li",(0,r.default)({style:a},o,i),e.children)}});f.isMenuItem=1,t.default=f,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i),a=r.default.createClass({displayName:"MenuItemGroup",propTypes:{renderMenuItem:i.PropTypes.func,index:i.PropTypes.number,className:i.PropTypes.string,rootPrefixCls:i.PropTypes.string},getDefaultProps:function(){return{disabled:!0}},renderInnerMenuItem:function(e,t){var n=this.props,o=n.renderMenuItem,i=n.index;return o(e,i,t)},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,o=e.rootPrefixCls,i=o+"-item-group-title",a=o+"-item-group-list";return r.default.createElement("li",{className:n+" "+o+"-item-group"},r.default.createElement("div",{className:i},e.title),r.default.createElement("ul",{className:a},r.default.Children.map(e.children,this.renderInnerMenuItem)))}});a.isMenuItemGroup=!0,t.default=a,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i),a=r.default.createClass({displayName:"Divider",propTypes:{disabled:i.PropTypes.bool,className:i.PropTypes.string,rootPrefixCls:i.PropTypes.string},getDefaultProps:function(){return{disabled:!0}},render:function(){var e=this.props,t=e.className,n=void 0===t?"":t,o=e.rootPrefixCls;return r.default.createElement("li",{className:n+" "+o+"-item-divider"})}});t.default=a,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(916),r=o(i),a=n(997),s=o(a);r.default.Button=s.default,t.default=r.default,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=o(u),d=n(917),p=o(d),f=n(993),h=o(f),m=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleDocumentScroll=this.handleDocumentScroll.bind(this)}return r(t,e),s(t,null,[{key:"propTypes",get:function(){return{trigger:u.PropTypes.array,overlay:u.PropTypes.element,style:u.PropTypes.object,onVisibleChange:u.PropTypes.func,visible:u.PropTypes.bool,align:u.PropTypes.object,mask:u.PropTypes.bool,getPopupContainer:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown",trigger:["click"],mask:!1}}}]),s(t,[{key:"componentDidMount",value:function(){this.mousewheelHandler=this.handleDocumentScroll(),document.addEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousewheel",this.mousewheelHandler,!1)}},{key:"handleDocumentScroll",value:function(){var e=this;return(0,h.default)(function(t){"sm-dropdown-mask"===t.target.className&&e.refs.dropdown.refs.trigger.setPopupVisible(!1)},200)}},{key:"render",value:function(){return c.default.createElement(p.default,a({ref:"dropdown",overlayClassName:this.props.className},this.props))}}]),t}(u.Component);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(918),r=o(i);t.default=r.default,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(7),s=o(a),l=n(162),u=o(l),c=n(919),d=o(c),p=n(992),f=o(p),h=s.default.createClass({displayName:"Dropdown",propTypes:{minOverlayWidthMatchTrigger:a.PropTypes.bool,onVisibleChange:a.PropTypes.func,prefixCls:a.PropTypes.string,children:a.PropTypes.any,transitionName:a.PropTypes.string,overlayClassName:a.PropTypes.string,animation:a.PropTypes.any,align:a.PropTypes.object,overlayStyle:a.PropTypes.object,placement:a.PropTypes.string,trigger:a.PropTypes.array,showAction:a.PropTypes.array,hideAction:a.PropTypes.array,getPopupContainer:a.PropTypes.func},getDefaultProps:function(){return{minOverlayWidthMatchTrigger:!0,prefixCls:"rc-dropdown",trigger:["hover"],showAction:[],hideAction:[],overlayClassName:"",overlayStyle:{},defaultVisible:!1,onVisibleChange:function(){},placement:"bottomLeft"}},getInitialState:function(){var e=this.props;return"visible"in e?{visible:e.visible}:{visible:e.defaultVisible}},componentWillReceiveProps:function(e){var t=e.visible;void 0!==t&&this.setState({visible:t})},onClick:function(e){var t=this.props,n=t.overlay.props;"visible"in t||this.setState({visible:!1}),n.onClick&&n.onClick(e)},onVisibleChange:function(e){var t=this.props;"visible"in t||this.setState({visible:e}),t.onVisibleChange(e)},getMenuElement:function(){var e=this.props;return s.default.cloneElement(e.overlay,{prefixCls:e.prefixCls+"-menu",onClick:this.onClick})},getPopupDomNode:function(){return this.refs.trigger.getPopupDomNode()},afterVisibleChange:function(e){if(e&&this.props.minOverlayWidthMatchTrigger){var t=this.getPopupDomNode(),n=u.default.findDOMNode(this);n.offsetWidth>t.offsetWidth&&(t.style.width=n.offsetWidth+"px")}},render:function(){var e=this.props,t=e.prefixCls,n=e.children,o=e.transitionName,a=e.animation,l=e.align,u=e.placement,c=e.getPopupContainer,p=e.showAction,h=e.hideAction,m=e.overlayClassName,v=e.overlayStyle,y=e.trigger,g=i(e,["prefixCls","children","transitionName","animation","align","placement","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","trigger"]);return s.default.createElement(d.default,r({},g,{prefixCls:t,ref:"trigger",popupClassName:m,popupStyle:v,builtinPlacements:f.default,action:y,showAction:p,hideAction:h,popupPlacement:u,popupAlign:l,popupTransitionName:o,popupAnimation:a,popupVisible:this.state.visible,afterPopupVisibleChange:this.afterVisibleChange,popup:this.getMenuElement(),onPopupVisibleChange:this.onVisibleChange,getPopupContainer:c}),n)}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(920)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){}function r(){return""}Object.defineProperty(t,"__esModule",{value:!0});var a=n(921),s=o(a),l=n(7),u=o(l),c=n(162),d=o(c),p=n(959),f=o(p),h=n(960),m=o(h),v=n(965),y=o(v),g=n(990),b=n(991),w=o(b),C=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"],E=u.default.createClass({displayName:"Trigger",propTypes:{children:l.PropTypes.any,action:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.arrayOf(l.PropTypes.string)]),showAction:l.PropTypes.any,hideAction:l.PropTypes.any,getPopupClassNameFromAlign:l.PropTypes.any,onPopupVisibleChange:l.PropTypes.func,afterPopupVisibleChange:l.PropTypes.func,popup:l.PropTypes.oneOfType([l.PropTypes.node,l.PropTypes.func]).isRequired,popupStyle:l.PropTypes.object,prefixCls:l.PropTypes.string,popupClassName:l.PropTypes.string,popupPlacement:l.PropTypes.string,builtinPlacements:l.PropTypes.object,popupTransitionName:l.PropTypes.string,popupAnimation:l.PropTypes.any,mouseEnterDelay:l.PropTypes.number,mouseLeaveDelay:l.PropTypes.number,zIndex:l.PropTypes.number,focusDelay:l.PropTypes.number,blurDelay:l.PropTypes.number,getPopupContainer:l.PropTypes.func,destroyPopupOnHide:l.PropTypes.bool,mask:l.PropTypes.bool,maskClosable:l.PropTypes.bool,onPopupAlign:l.PropTypes.func,popupAlign:l.PropTypes.object,popupVisible:l.PropTypes.bool,maskTransitionName:l.PropTypes.string,maskAnimation:l.PropTypes.string},mixins:[(0,w.default)({autoMount:!1,isVisible:function(e){return e.state.popupVisible},getContainer:function(e){var t=document.createElement("div"),n=e.props.getPopupContainer?e.props.getPopupContainer((0,c.findDOMNode)(e)):document.body;return n.appendChild(t),t}})],getDefaultProps:function(){return{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:r,onPopupVisibleChange:i,afterPopupVisibleChange:i,onPopupAlign:i,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]}},getInitialState:function(){var e=this.props,t=void 0;return t="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,{popupVisible:t}},componentWillMount:function(){var e=this;C.forEach(function(t){e["fire"+t]=function(n){e.fireEvents(t,n)}})},componentDidMount:function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},componentWillReceiveProps:function(e){var t=e.popupVisible;void 0!==t&&this.setState({popupVisible:t})},componentDidUpdate:function(e,t){var n=this.props,o=this.state;return this.renderComponent(null,function(){t.popupVisible!==o.popupVisible&&n.afterPopupVisibleChange(o.popupVisible)}),this.isClickToHide()&&o.popupVisible?void(this.clickOutsideHandler||(this.clickOutsideHandler=(0,m.default)(document,"mousedown",this.onDocumentClick),this.touchOutsideHandler=(0,m.default)(document,"touchstart",this.onDocumentClick))):void(this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.touchOutsideHandler.remove(),this.clickOutsideHandler=null,this.touchOutsideHandler=null))},componentWillUnmount:function(){this.clearDelayTimer(),this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.touchOutsideHandler.remove(),this.clickOutsideHandler=null,this.touchOutsideHandler=null)},onMouseEnter:function(e){this.fireEvents("onMouseEnter",e),this.delaySetPopupVisible(!0,this.props.mouseEnterDelay)},onMouseLeave:function(e){this.fireEvents("onMouseLeave",e),this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onPopupMouseEnter:function(){this.clearDelayTimer()},onPopupMouseLeave:function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&this._component&&(0,f.default)(this._component.getPopupDomNode(),e.relatedTarget)||this.delaySetPopupVisible(!1,this.props.mouseLeaveDelay)},onFocus:function(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.props.focusDelay))},onMouseDown:function(e){this.fireEvents("onMouseDown",e),this.preClickTime=Date.now()},onTouchStart:function(e){this.fireEvents("onTouchStart",e),this.preTouchTime=Date.now()},onBlur:function(e){this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.props.blurDelay)},onClick:function(e){if(this.fireEvents("onClick",e),this.focusTime){var t=void 0;if(this.preClickTime&&this.preTouchTime?t=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?t=this.preClickTime:this.preTouchTime&&(t=this.preTouchTime),Math.abs(t-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,e.preventDefault();var n=!this.state.popupVisible;(this.isClickToHide()&&!n||n&&this.isClickToShow())&&this.setPopupVisible(!this.state.popupVisible)},onDocumentClick:function(e){if(!this.props.mask||this.props.maskClosable){var t=e.target,n=(0,c.findDOMNode)(this),o=this.getPopupDomNode();(0,f.default)(n,t)||(0,f.default)(o,t)||this.close()}},getPopupDomNode:function(){return this._component&&this._component.isMounted()?this._component.getPopupDomNode():null},getRootDomNode:function(){return d.default.findDOMNode(this)},getPopupClassNameFromAlign:function(e){var t=[],n=this.props,o=n.popupPlacement,i=n.builtinPlacements,r=n.prefixCls;return o&&i&&t.push((0,g.getPopupClassNameFromAlign)(i,r,e)),n.getPopupClassNameFromAlign&&t.push(n.getPopupClassNameFromAlign(e)),t.join(" ")},getPopupAlign:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,o=e.builtinPlacements;return t&&o?(0,g.getAlignFromPlacement)(o,t,n):n},getComponent:function(){var e=this.props,t=this.state,n={};return this.isMouseEnterToShow()&&(n.onMouseEnter=this.onPopupMouseEnter),this.isMouseLeaveToHide()&&(n.onMouseLeave=this.onPopupMouseLeave),u.default.createElement(y.default,(0,s.default)({prefixCls:e.prefixCls,destroyPopupOnHide:e.destroyPopupOnHide,visible:t.popupVisible,className:e.popupClassName,action:e.action,align:this.getPopupAlign(),onAlign:e.onPopupAlign,animation:e.popupAnimation,getClassNameFromAlign:this.getPopupClassNameFromAlign},n,{getRootDomNode:this.getRootDomNode,style:e.popupStyle,mask:e.mask,zIndex:e.zIndex,transitionName:e.popupTransitionName,maskAnimation:e.maskAnimation,maskTransitionName:e.maskTransitionName}),"function"==typeof e.popup?e.popup():e.popup)},setPopupVisible:function(e){this.clearDelayTimer(),this.state.popupVisible!==e&&("popupVisible"in this.props||this.setState({popupVisible:e}),this.props.onPopupVisibleChange(e))},delaySetPopupVisible:function(e,t){var n=this,o=1e3*t;this.clearDelayTimer(),o?this.delayTimer=setTimeout(function(){n.setPopupVisible(e),n.clearDelayTimer()},o):this.setPopupVisible(e)},clearDelayTimer:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},createTwoChains:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},isClickToShow:function(){var e=this.props,t=e.action,n=e.showAction;return t.indexOf("click")!==-1||n.indexOf("click")!==-1},isClickToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return t.indexOf("click")!==-1||n.indexOf("click")!==-1},isMouseEnterToShow:function(){var e=this.props,t=e.action,n=e.showAction;return t.indexOf("hover")!==-1||n.indexOf("mouseEnter")!==-1},isMouseLeaveToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return t.indexOf("hover")!==-1||n.indexOf("mouseLeave")!==-1},isFocusToShow:function(){var e=this.props,t=e.action,n=e.showAction;return t.indexOf("focus")!==-1||n.indexOf("focus")!==-1},isBlurToHide:function(){var e=this.props,t=e.action,n=e.hideAction;return t.indexOf("focus")!==-1||n.indexOf("blur")!==-1},forcePopupAlign:function(){this.state.popupVisible&&this.popupInstance&&this.popupInstance.alignInstance&&this.popupInstance.alignInstance.forceAlign()},fireEvents:function(e,t){var n=this.props.children.props[e];n&&n(t);var o=this.props[e];o&&o(t)},close:function(){this.setPopupVisible(!1)},render:function(){var e=this.props,t=e.children,n=u.default.Children.only(t),o={};return this.isClickToHide()||this.isClickToShow()?(o.onClick=this.onClick,o.onMouseDown=this.onMouseDown,o.onTouchStart=this.onTouchStart):(o.onClick=this.createTwoChains("onClick"),o.onMouseDown=this.createTwoChains("onMouseDown"),o.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?o.onMouseEnter=this.onMouseEnter:o.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?o.onMouseLeave=this.onMouseLeave:o.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(o.onFocus=this.onFocus,o.onBlur=this.onBlur):(o.onFocus=this.createTwoChains("onFocus"),o.onBlur=this.createTwoChains("onBlur")),u.default.cloneElement(n,o)}});t.default=E,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(922),r=o(i);t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);
}return e}},function(e,t,n){e.exports={default:n(923),__esModule:!0}},function(e,t,n){n(924),e.exports=n(927).Object.assign},function(e,t,n){var o=n(925);o(o.S+o.F,"Object",{assign:n(940)})},function(e,t,n){var o=n(926),i=n(927),r=n(928),a=n(930),s="prototype",l=function(e,t,n){var u,c,d,p=e&l.F,f=e&l.G,h=e&l.S,m=e&l.P,v=e&l.B,y=e&l.W,g=f?i:i[t]||(i[t]={}),b=g[s],w=f?o:h?o[t]:(o[t]||{})[s];f&&(n=t);for(u in n)c=!p&&w&&void 0!==w[u],c&&u in g||(d=c?w[u]:n[u],g[u]=f&&"function"!=typeof w[u]?n[u]:v&&c?r(d,o):y&&w[u]==d?function(e){var t=function(t,n,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,o)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[u]=d,e&l.R&&b&&!b[u]&&a(b,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var o=n(929);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(931),i=n(939);e.exports=n(935)?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(932),i=n(934),r=n(938),a=Object.defineProperty;t.f=n(935)?Object.defineProperty:function(e,t,n){if(o(e),t=r(t,!0),o(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var o=n(933);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(935)&&!n(936)(function(){return 7!=Object.defineProperty(n(937)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(936)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var o=n(933),i=n(926).document,r=o(i)&&o(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){var o=n(933);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var o=n(941),i=n(956),r=n(957),a=n(958),s=n(945),l=Object.assign;e.exports=!l||n(936)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=o})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=i.f,d=r.f;l>u;)for(var p,f=s(arguments[u++]),h=c?o(f).concat(c(f)):o(f),m=h.length,v=0;m>v;)d.call(f,p=h[v++])&&(n[p]=f[p]);return n}:l},function(e,t,n){var o=n(942),i=n(955);e.exports=Object.keys||function(e){return o(e,i)}},function(e,t,n){var o=n(943),i=n(944),r=n(948)(!1),a=n(952)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&o(s,n)&&u.push(n);for(;t.length>l;)o(s,n=t[l++])&&(~r(u,n)||u.push(n));return u}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(945),i=n(947);e.exports=function(e){return o(i(e))}},function(e,t,n){var o=n(946);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(944),i=n(949),r=n(951);e.exports=function(e){return function(t,n,a){var s,l=o(t),u=i(l.length),c=r(a,u);if(e&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var o=n(950),i=Math.min;e.exports=function(e){return e>0?i(o(e),9007199254740991):0}},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t,n){var o=n(950),i=Math.max,r=Math.min;e.exports=function(e,t){return e=o(e),e<0?i(e+t,0):r(e,t)}},function(e,t,n){var o=n(953)("keys"),i=n(954);e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var o=n(926),i="__core-js_shared__",r=o[i]||(o[i]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var o=n(947);e.exports=function(e){return Object(o(e))}},function(e,t){"use strict";function n(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var o=l.default.unstable_batchedUpdates?function(e){l.default.unstable_batchedUpdates(n,e)}:n;return(0,a.default)(e,t,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(961),a=o(r),s=n(162),l=o(s);e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){function o(t){var o=new a.default(t);n.call(e,o)}return e.addEventListener?(e.addEventListener(t,o,!1),{remove:function(){e.removeEventListener(t,o,!1)}}):e.attachEvent?(e.attachEvent("on"+t,o),{remove:function(){e.detachEvent("on"+t,o)}}):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(962),a=o(r);e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return null===e||void 0===e}function r(){return p}function a(){return f}function s(e){var t=e.type,n="function"==typeof e.stopPropagation||"boolean"==typeof e.cancelBubble;u.default.call(this),this.nativeEvent=e;var o=a;"defaultPrevented"in e?o=e.defaultPrevented?r:a:"getPreventDefault"in e?o=e.getPreventDefault()?r:a:"returnValue"in e&&(o=e.returnValue===f?r:a),this.isDefaultPrevented=o;var i=[],s=void 0,l=void 0,c=void 0,d=h.concat();for(m.forEach(function(e){t.match(e.reg)&&(d=d.concat(e.props),e.fix&&i.push(e.fix))}),l=d.length;l;)c=d[--l],this[c]=e[c];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),l=i.length;l;)(s=i[--l])(this,e);this.timeStamp=e.timeStamp||Date.now()}Object.defineProperty(t,"__esModule",{value:!0});var l=n(963),u=o(l),c=n(964),d=o(c),p=!0,f=!1,h=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"],m=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){i(e.which)&&(e.which=i(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,o=void 0,i=void 0,r=t.wheelDelta,a=t.axis,s=t.wheelDeltaY,l=t.wheelDeltaX,u=t.detail;r&&(i=r/120),u&&(i=0-(u%3===0?u/3:u)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(o=0,n=0-i):a===e.VERTICAL_AXIS&&(n=0,o=i)),void 0!==s&&(o=s/120),void 0!==l&&(n=-1*l/120),n||o||(o=i),void 0!==n&&(e.deltaX=n),void 0!==o&&(e.deltaY=o),void 0!==i&&(e.delta=i)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,o=void 0,r=void 0,a=e.target,s=t.button;return a&&i(e.pageX)&&!i(t.clientX)&&(n=a.ownerDocument||document,o=n.documentElement,r=n.body,e.pageX=t.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(1&s?e.which=1:2&s?e.which=3:4&s?e.which=2:e.which=0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===a?e.toElement:e.fromElement),e}}],v=u.default.prototype;(0,d.default)(s.prototype,v,{constructor:s,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=f,v.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=p,v.stopPropagation.call(this)}}),t.default=s,e.exports=t.default},function(e,t){"use strict";function n(){return!1}function o(){return!0}function i(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={isEventObject:1,constructor:i,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=o},stopPropagation:function(){this.isPropagationStopped=o},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=i,e.exports=t.default},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==o.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(e,t){for(var o,s,l=n(e),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var c in o)r.call(o,c)&&(l[c]=o[c]);if(i){s=i(o);for(var d=0;d<s.length;d++)a.call(o,s[d])&&(l[s[d]]=o[s[d]])}}return l}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(921),r=o(i),a=n(7),s=o(a),l=n(162),u=o(l),c=n(966),d=o(c),p=n(978),f=o(p),h=n(987),m=o(h),v=n(988),y=o(v),g=s.default.createClass({displayName:"Popup",propTypes:{visible:a.PropTypes.bool,style:a.PropTypes.object,getClassNameFromAlign:a.PropTypes.func,onAlign:a.PropTypes.func,getRootDomNode:a.PropTypes.func,onMouseEnter:a.PropTypes.func,align:a.PropTypes.any,destroyPopupOnHide:a.PropTypes.bool,className:a.PropTypes.string,prefixCls:a.PropTypes.string,onMouseLeave:a.PropTypes.func},componentDidMount:function(){this.rootNode=this.getPopupDomNode()},onAlign:function(e,t){var n=this.props,o=n.getClassNameFromAlign(n.align),i=n.getClassNameFromAlign(t);o!==i&&(this.currentAlignClassName=i,e.className=this.getClassName(i)),n.onAlign(e,t)},getPopupDomNode:function(){return u.default.findDOMNode(this.refs.popup)},getTarget:function(){return this.props.getRootDomNode()},getMaskTransitionName:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},getTransitionName:function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t},getClassName:function(e){return this.props.prefixCls+" "+this.props.className+" "+e},getPopupElement:function(){var e=this.props,t=e.align,n=e.style,o=e.visible,i=e.prefixCls,a=e.destroyPopupOnHide,l=this.getClassName(this.currentAlignClassName||e.getClassNameFromAlign(t)),u=i+"-hidden";o||(this.currentAlignClassName=null);var c=(0,r.default)({},n,this.getZIndexStyle()),p={className:l,prefixCls:i,ref:"popup",onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:c};return a?s.default.createElement(f.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},o?s.default.createElement(d.default,{target:this.getTarget,key:"popup",ref:this.saveAlign,monitorWindowResize:!0,align:t,onAlign:this.onAlign},s.default.createElement(m.default,(0,r.default)({visible:!0},p),e.children)):null):s.default.createElement(f.default,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},s.default.createElement(d.default,{target:this.getTarget,key:"popup",ref:this.saveAlign,monitorWindowResize:!0,xVisible:o,childrenProps:{visible:"xVisible"},disabled:!o,align:t,onAlign:this.onAlign},s.default.createElement(m.default,(0,r.default)({hiddenClassName:u},p),e.children)))},getZIndexStyle:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},getMaskElement:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=s.default.createElement(y.default,{style:this.getZIndexStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible}),n&&(t=s.default.createElement(f.default,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t},saveAlign:function(e){this.alignInstance=e},render:function(){return s.default.createElement("div",null,this.getMaskElement(),this.getPopupElement())}});t.default=g,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(967),r=o(i);t.default=r.default,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(){i&&(clearTimeout(i),i=null)}function o(){n(),i=setTimeout(e,t)}var i=void 0;return o.clear=n,o}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),a=o(r),s=n(162),l=o(s),u=n(968),c=o(u),d=n(960),p=o(d),f=n(977),h=o(f),m=a.default.createClass({displayName:"Align",propTypes:{childrenProps:r.PropTypes.object,align:r.PropTypes.object.isRequired,target:r.PropTypes.func,onAlign:r.PropTypes.func,monitorBufferTime:r.PropTypes.number,monitorWindowResize:r.PropTypes.bool,disabled:r.PropTypes.bool,children:r.PropTypes.any},getDefaultProps:function(){return{target:function(){return window},onAlign:function(){},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1}},componentDidMount:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()},componentDidUpdate:function(e){var t=!1,n=this.props;if(!n.disabled)if(e.disabled||e.align!==n.align)t=!0;else{var o=e.target(),i=n.target();(0,h.default)(o)&&(0,h.default)(i)?t=!1:o!==i&&(t=!0)}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()},componentWillUnmount:function(){this.stopMonitorWindowResize()},startMonitorWindowResize:function(){this.resizeHandler||(this.bufferMonitor=i(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=(0,p.default)(window,"resize",this.bufferMonitor))},stopMonitorWindowResize:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)},forceAlign:function(){var e=this.props;if(!e.disabled){var t=l.default.findDOMNode(this);e.onAlign(t,(0,c.default)(t,e.target(),e.align))}},render:function(){var e=this.props,t=e.childrenProps,n=e.children,o=a.default.Children.only(n);if(t){var i={};for(var r in t)t.hasOwnProperty(r)&&(i[r]=this.props[t[r]]);return a.default.cloneElement(o,i)}return o}});t.default=m,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return e.left<n.left||e.left+t.width>n.right}function r(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function a(e,t,n){return e.left>n.right||e.left+t.width<n.left}function s(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function l(e,t,n){var o=[];return h.default.each(e,function(e){o.push(e.replace(t,function(e){return n[e]}))}),o}function u(e,t){return e[t]=-e[t],e}function c(e,t){var n=void 0;return n=/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10),n||0}function d(e,t){e[0]=c(e[0],t.width),e[1]=c(e[1],t.height)}function p(e,t,n){var o=n.points,c=n.offset||[0,0],p=n.targetOffset||[0,0],f=n.overflow,m=n.target||t,v=n.source||e;c=[].concat(c),p=[].concat(p),f=f||{};var y={},b=0,C=(0,g.default)(v),T=(0,E.default)(v),k=(0,E.default)(m);d(c,T),d(p,k);var _=(0,P.default)(T,k,o,c,p),O=h.default.merge(T,_);if(C&&(f.adjustX||f.adjustY)){if(f.adjustX&&i(_,T,C)){var S=l(o,/[lr]/gi,{l:"r",r:"l"}),x=u(c,0),M=u(p,0),N=(0,P.default)(T,k,S,x,M);a(N,T,C)||(b=1,o=S,c=x,p=M)}if(f.adjustY&&r(_,T,C)){var j=l(o,/[tb]/gi,{t:"b",b:"t"}),I=u(c,1),L=u(p,1),A=(0,P.default)(T,k,j,I,L);s(A,T,C)||(b=1,o=j,c=I,p=L)}b&&(_=(0,P.default)(T,k,o,c,p),h.default.mix(O,_)),y.adjustX=f.adjustX&&i(_,T,C),y.adjustY=f.adjustY&&r(_,T,C),(y.adjustX||y.adjustY)&&(O=(0,w.default)(_,T,C,y))}return O.width!==T.width&&h.default.css(v,"width",h.default.width(v)+O.width-T.width),O.height!==T.height&&h.default.css(v,"height",h.default.height(v)+O.height-T.height),h.default.offset(v,{left:O.left,top:O.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform}),{points:o,offset:c,targetOffset:p,overflow:y}}Object.defineProperty(t,"__esModule",{value:!0});var f=n(969),h=o(f),m=n(971),v=o(m),y=n(972),g=o(y),b=n(973),w=o(b),C=n(974),E=o(C),T=n(975),P=o(T);p.__getOffsetParent=v.default,p.__getVisibleRectForElement=g.default,t.default=p,e.exports=t.default},function(e,t,n){"use strict";function o(e,t){return e+t}function i(e,t,n){var o=n;{if("object"!==("undefined"==typeof t?"undefined":k(t)))return"undefined"!=typeof o?("number"==typeof o&&(o+="px"),void(e.style[t]=o)):S(e,t);for(var r in t)t.hasOwnProperty(r)&&i(e,r,t[r])}}function r(e){var t=void 0,n=void 0,o=void 0,i=e.ownerDocument,r=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=t.left,o=t.top,n-=a.clientLeft||r.clientLeft||0,o-=a.clientTop||r.clientTop||0,{left:n,top:o}}function a(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],o="scroll"+(t?"Top":"Left");if("number"!=typeof n){var i=e.document;n=i.documentElement[o],"number"!=typeof n&&(n=i.body[o])}return n}function s(e){return a(e)}function l(e){return a(e,!0)}function u(e){var t=r(e),n=e.ownerDocument,o=n.defaultView||n.parentWindow;return t.left+=s(o),t.top+=l(o),t}function c(e,t,n){var o=n,i="",r=e.ownerDocument;return o=o||r.defaultView.getComputedStyle(e,null),o&&(i=o.getPropertyValue(t)||o[t]),i}function d(e,t){var n=e[N]&&e[N][t];if(x.test(n)&&!M.test(t)){var o=e.style,i=o[I],r=e[j][I];e[j][I]=e[N][I],o[I]="fontSize"===t?"1em":n||0,n=o.pixelLeft+L,o[I]=i,e[j][I]=r}return""===n?"auto":n}function p(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function f(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function h(e,t,n){"static"===i(e,"position")&&(e.style.position="relative");var r=-999,a=-999,s=p("left",n),l=p("top",n),c=f(s),d=f(l);"left"!==s&&(r=999),"top"!==l&&(a=999);var h="",m=u(e);("left"in t||"top"in t)&&(h=(0,_.getTransitionProperty)(e)||"",(0,_.setTransitionProperty)(e,"none")),"left"in t&&(e.style[c]="",e.style[s]=r+"px"),"top"in t&&(e.style[d]="",e.style[l]=a+"px");var v=u(e),y={};for(var g in t)if(t.hasOwnProperty(g)){var b=p(g,n),w="left"===g?r:a,C=m[g]-v[g];b===g?y[b]=w+C:y[b]=w-C}i(e,y),o(e.offsetTop,e.offsetLeft),("left"in t||"top"in t)&&(0,_.setTransitionProperty)(e,h);var E={};for(var T in t)if(t.hasOwnProperty(T)){var P=p(T,n),k=t[T]-m[T];T===P?E[P]=y[P]+k:E[P]=y[P]-k}i(e,E)}function m(e,t){var n=u(e),o=(0,_.getTransformXY)(e),i={x:o.x,y:o.y};"left"in t&&(i.x=o.x+t.left-n.left),"top"in t&&(i.y=o.y+t.top-n.top),(0,_.setTransformXY)(e,i)}function v(e,t,n){n.useCssRight||n.useCssBottom?h(e,t,n):n.useCssTransform&&(0,_.getTransformName)()in document.body.style?m(e,t,n):h(e,t,n)}function y(e,t){for(var n=0;n<e.length;n++)t(e[n])}function g(e){return"border-box"===S(e,"boxSizing")}function b(e,t,n){var o={},i=e.style,r=void 0;for(r in t)t.hasOwnProperty(r)&&(o[r]=i[r],i[r]=t[r]);n.call(e);for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r])}function w(e,t,n){var o=0,i=void 0,r=void 0,a=void 0;for(r=0;r<t.length;r++)if(i=t[r])for(a=0;a<n.length;a++){var s=void 0;s="border"===i?""+i+n[a]+"Width":i+n[a],o+=parseFloat(S(e,s))||0}return o}function C(e){return null!==e&&void 0!==e&&e==e.window}function E(e,t,n){var o=n;if(C(e))return"width"===t?B.viewportWidth(e):B.viewportHeight(e);if(9===e.nodeType)return"width"===t?B.docWidth(e):B.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],r="width"===t?e.offsetWidth:e.offsetHeight,a=S(e),s=g(e,a),l=0;(null===r||void 0===r||r<=0)&&(r=void 0,l=S(e,t),(null===l||void 0===l||Number(l)<0)&&(l=e.style[t]||0),l=parseFloat(l)||0),void 0===o&&(o=s?R:D);var u=void 0!==r||s,c=r||l;return o===D?u?c-w(e,["border","padding"],i,a):l:u?o===R?c:c+(o===U?-w(e,["border"],i,a):w(e,["margin"],i,a)):l+w(e,A.slice(o),i,a)}function T(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=void 0,i=t[0];return 0!==i.offsetWidth?o=E.apply(void 0,t):b(i,W,function(){o=E.apply(void 0,t)}),o}function P(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Object.defineProperty(t,"__esModule",{value:!0});var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=n(970),O=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,S=void 0,x=new RegExp("^("+O+")(?!px)[a-z%]+$","i"),M=/^(top|right|bottom|left)$/,N="currentStyle",j="runtimeStyle",I="left",L="px";"undefined"!=typeof window&&(S=window.getComputedStyle?c:d);var A=["margin","border","padding"],D=-1,U=2,R=1,F=0,B={};y(["Width","Height"],function(e){B["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],B["viewport"+e](n))},B["viewport"+e]=function(t){var n="client"+e,o=t.document,i=o.body,r=o.documentElement,a=r[n];return"CSS1Compat"===o.compatMode&&a||i&&i[n]||a}});var W={position:"absolute",visibility:"hidden",display:"block"};y(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);B["outer"+t]=function(t,n){return t&&T(t,e,n?F:R)};var n="width"===e?["Left","Right"]:["Top","Bottom"];B[e]=function(t,o){var r=o;{if(void 0===r)return t&&T(t,e,D);if(t){var a=S(t),s=g(t);return s&&(r+=w(t,["padding","border"],n,a)),i(t,e,r)}}}});var z={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t,n){return"undefined"==typeof t?u(e):void v(e,t,n||{})},isWindow:C,each:y,css:i,clone:function(e){var t=void 0,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);var o=e.overflow;if(o)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:P,getWindowScrollLeft:function(e){return s(e)},getWindowScrollTop:function(e){return l(e)},merge:function(){for(var e={},t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var i=0;i<n.length;i++)z.mix(e,n[i]);return e},viewportWidth:0,viewportHeight:0};P(z,B),t.default=z,e.exports=t.default},function(e,t){"use strict";function n(){if(void 0!==c)return c;c="";var e=document.createElement("p").style,t="Transform";for(var n in d)n+t in e&&(c=n);return c}function o(){return n()?n()+"TransitionProperty":"transitionProperty"}function i(){return n()?n()+"Transform":"transform"}function r(e,t){var n=o();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function a(e,t){var n=i();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}function s(e){return e.style.transitionProperty||e.style[o()]}function l(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(i());if(n&&"none"!==n){var o=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(o[12]||o[4],0),y:parseFloat(o[13]||o[5],0)}}return{x:0,y:0}}function u(e,t){var n=window.getComputedStyle(e,null),o=n.getPropertyValue("transform")||n.getPropertyValue(i());if(o&&"none"!==o){var r=void 0,s=o.match(p);if(s)s=s[1],r=s.split(",").map(function(e){return parseFloat(e,10)}),r[4]=t.x,r[5]=t.y,a(e,"matrix("+r.join(",")+")");else{var l=o.match(f)[1];r=l.split(",").map(function(e){return parseFloat(e,10)}),r[12]=t.x,r[13]=t.y,a(e,"matrix3d("+r.join(",")+")")}}else a(e,"translateX("+t.x+"px) translateY("+t.y+"px) translateZ(0)")}Object.defineProperty(t,"__esModule",{value:!0}),t.getTransformName=i,t.setTransitionProperty=r,t.getTransitionProperty=s,t.getTransformXY=l,t.setTransformXY=u;var c=void 0,d={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"},p=/matrix\((.*)\)/,f=/matrix3d\((.*)\)/},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.ownerDocument,n=t.body,o=void 0,i=a.default.css(e,"position"),r="fixed"===i||"absolute"===i;if(!r)return"html"===e.nodeName.toLowerCase()?null:e.parentNode;for(o=e.parentNode;o&&o!==n;o=o.parentNode)if(i=a.default.css(o,"position"),"static"!==i)return o;return null}Object.defineProperty(t,"__esModule",{value:!0});var r=n(969),a=o(r);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t={left:0,right:1/0,top:0,bottom:1/0},n=(0,l.default)(e),o=void 0,i=void 0,r=void 0,s=e.ownerDocument,u=s.defaultView||s.parentWindow,c=s.body,d=s.documentElement;n;){if(navigator.userAgent.indexOf("MSIE")!==-1&&0===n.clientWidth||n===c||n===d||"visible"===a.default.css(n,"overflow")){if(n===c||n===d)break}else{var p=a.default.offset(n);p.left+=n.clientLeft,p.top+=n.clientTop,t.top=Math.max(t.top,p.top),t.right=Math.min(t.right,p.left+n.clientWidth),t.bottom=Math.min(t.bottom,p.top+n.clientHeight),t.left=Math.max(t.left,p.left)}n=(0,l.default)(n)}return o=a.default.getWindowScrollLeft(u),i=a.default.getWindowScrollTop(u),t.left=Math.max(t.left,o),t.top=Math.max(t.top,i),r={width:a.default.viewportWidth(u),height:a.default.viewportHeight(u)},t.right=Math.min(t.right,o+r.width),t.bottom=Math.min(t.bottom,i+r.height),t.top>=0&&t.left>=0&&t.bottom>t.top&&t.right>t.left?t:null}Object.defineProperty(t,"__esModule",{value:!0});var r=n(969),a=o(r),s=n(971),l=o(s);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o){var i=a.default.clone(e),r={width:t.width,height:t.height};return o.adjustX&&i.left<n.left&&(i.left=n.left),o.resizeWidth&&i.left>=n.left&&i.left+r.width>n.right&&(r.width-=i.left+r.width-n.right),o.adjustX&&i.left+r.width>n.right&&(i.left=Math.max(n.right-r.width,n.left)),o.adjustY&&i.top<n.top&&(i.top=n.top),o.resizeHeight&&i.top>=n.top&&i.top+r.height>n.bottom&&(r.height-=i.top+r.height-n.bottom),o.adjustY&&i.top+r.height>n.bottom&&(i.top=Math.max(n.bottom-r.height,n.top)),a.default.mix(i,r)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(969),a=o(r);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=void 0,n=void 0,o=void 0;if(a.default.isWindow(e)||9===e.nodeType){var i=a.default.getWindow(e);t={left:a.default.getWindowScrollLeft(i),top:a.default.getWindowScrollTop(i)},n=a.default.viewportWidth(i),o=a.default.viewportHeight(i)}else t=a.default.offset(e),n=a.default.outerWidth(e),o=a.default.outerHeight(e);return t.width=n,t.height=o,t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(969),a=o(r);t.default=i,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o,i){var r=void 0,s=void 0,l=void 0,u=void 0;return r={left:e.left,top:e.top},l=(0,a.default)(t,n[1]),u=(0,a.default)(e,n[0]),s=[u.left-l.left,u.top-l.top],{left:r.left-s[0]+o[0]-i[0],top:r.top-s[1]+o[1]-i[1]}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(976),a=o(r);t.default=i,e.exports=t.default},function(e,t){"use strict";function n(e,t){var n=t.charAt(0),o=t.charAt(1),i=e.width,r=e.height,a=void 0,s=void 0;return a=e.left,s=e.top,"c"===n?s+=r/2:"b"===n&&(s+=r),"c"===o?a+=i/2:"r"===o&&(a+=i),{left:a,top:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t){"use strict";function n(e){return null!=e&&e==e.window}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";e.exports=n(979)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=e.children;return l.default.isValidElement(t)&&!t.key?l.default.cloneElement(t,{key:h}):t}function a(){}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),l=o(s),u=n(980),c=n(981),d=o(c),p=n(986),f=o(p),h="rc_animate_"+Date.now(),m=l.default.createClass({displayName:"Animate",propTypes:{component:l.default.PropTypes.any,animation:l.default.PropTypes.object,transitionName:l.default.PropTypes.oneOfType([l.default.PropTypes.string,l.default.PropTypes.object]),transitionEnter:l.default.PropTypes.bool,transitionAppear:l.default.PropTypes.bool,exclusive:l.default.PropTypes.bool,transitionLeave:l.default.PropTypes.bool,onEnd:l.default.PropTypes.func,onEnter:l.default.PropTypes.func,onLeave:l.default.PropTypes.func,onAppear:l.default.PropTypes.func,showProp:l.default.PropTypes.string},getDefaultProps:function(){return{animation:{},component:"span",transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:a,onEnter:a,onLeave:a,onAppear:a}},getInitialState:function(){return this.currentlyAnimatingKeys={},this.keysToEnter=[],this.keysToLeave=[],{children:(0,u.toArrayChildren)(r(this.props))}},componentDidMount:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter(function(e){return!!e.props[t]})),n.forEach(function(t){t&&e.performAppear(t.key)})},componentWillReceiveProps:function(e){var t=this;this.nextProps=e;var n=(0,u.toArrayChildren)(r(e)),o=this.props;o.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(e){t.stop(e)});var a=o.showProp,s=this.currentlyAnimatingKeys,c=o.exclusive?(0,u.toArrayChildren)(r(o)):this.state.children,d=[];a?(c.forEach(function(e){var t=e&&(0,u.findChildInChildrenByKey)(n,e.key),o=void 0;o=t&&t.props[a]||!e.props[a]?t:l.default.cloneElement(t||e,i({},a,!0)),o&&d.push(o)}),n.forEach(function(e){e&&(0,u.findChildInChildrenByKey)(c,e.key)||d.push(e)})):d=(0,u.mergeChildren)(c,n),this.setState({children:d}),n.forEach(function(e){var n=e&&e.key;if(!e||!s[n]){var o=e&&(0,u.findChildInChildrenByKey)(c,n);if(a){var i=e.props[a];if(o){var r=(0,u.findShownChildInChildrenByKey)(c,n,a);!r&&i&&t.keysToEnter.push(n)}else i&&t.keysToEnter.push(n)}else o||t.keysToEnter.push(n)}}),c.forEach(function(e){var o=e&&e.key;if(!e||!s[o]){var i=e&&(0,u.findChildInChildrenByKey)(n,o);if(a){var r=e.props[a];
if(i){var l=(0,u.findShownChildInChildrenByKey)(n,o,a);!l&&r&&t.keysToLeave.push(o)}else r&&t.keysToLeave.push(o)}else i||t.keysToLeave.push(o)}})},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillEnter(this.handleDoneAdding.bind(this,e,"enter")))},performAppear:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillAppear(this.handleDoneAdding.bind(this,e,"appear")))},handleDoneAdding:function(e,t){var n=this.props;if(delete this.currentlyAnimatingKeys[e],!n.exclusive||n===this.nextProps){var o=(0,u.toArrayChildren)(r(n));this.isValidChildByKey(o,e)?"appear"===t?f.default.allowAppearCallback(n)&&(n.onAppear(e),n.onEnd(e,!0)):f.default.allowEnterCallback(n)&&(n.onEnter(e),n.onEnd(e,!0)):this.performLeave(e)}},performLeave:function(e){this.refs[e]&&(this.currentlyAnimatingKeys[e]=!0,this.refs[e].componentWillLeave(this.handleDoneLeaving.bind(this,e)))},handleDoneLeaving:function(e){var t=this.props;if(delete this.currentlyAnimatingKeys[e],!t.exclusive||t===this.nextProps){var n=(0,u.toArrayChildren)(r(t));if(this.isValidChildByKey(n,e))this.performEnter(e);else{var o=function(){f.default.allowLeaveCallback(t)&&(t.onLeave(e),t.onEnd(e,!1))};this.isMounted()&&!(0,u.isSameChildren)(this.state.children,n,t.showProp)?this.setState({children:n},o):o()}}},isValidChildByKey:function(e,t){var n=this.props.showProp;return n?(0,u.findShownChildInChildrenByKey)(e,t,n):(0,u.findChildInChildrenByKey)(e,t)},stop:function(e){delete this.currentlyAnimatingKeys[e];var t=this.refs[e];t&&t.stop()},render:function(){var e=this.props;this.nextProps=e;var t=this.state.children,n=null;t&&(n=t.map(function(t){if(null===t||void 0===t)return t;if(!t.key)throw new Error("must set key for <rc-animate> children");return l.default.createElement(d.default,{key:t.key,ref:t.key,animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},t)}));var o=e.component;if(o){var i=e;return"string"==typeof o&&(i={className:e.className,style:e.style}),l.default.createElement(o,i,n)}return n[0]||null}});t.default=m,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=[];return d.default.Children.forEach(e,function(e){t.push(e)}),t}function r(e,t){var n=null;return e&&e.forEach(function(e){n||e&&e.key===t&&(n=e)}),n}function a(e,t,n){var o=null;return e&&e.forEach(function(e){if(e&&e.key===t&&e.props[n]){if(o)throw new Error("two child with same key for <rc-animate> children");o=e}}),o}function s(e,t,n){var o=0;return e&&e.forEach(function(e){o||(o=e&&e.key===t&&!e.props[n])}),o}function l(e,t,n){var o=e.length===t.length;return o&&e.forEach(function(e,i){var r=t[i];e&&r&&(e&&!r||!e&&r?o=!1:e.key!==r.key?o=!1:n&&e.props[n]!==r.props[n]&&(o=!1))}),o}function u(e,t){var n=[],o={},i=[];return e.forEach(function(e){e&&r(t,e.key)?i.length&&(o[e.key]=i,i=[]):i.push(e)}),t.forEach(function(e){e&&o.hasOwnProperty(e.key)&&(n=n.concat(o[e.key])),n.push(e)}),n=n.concat(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.toArrayChildren=i,t.findChildInChildrenByKey=r,t.findShownChildInChildrenByKey=a,t.findHiddenChildInChildrenByKey=s,t.isSameChildren=l,t.mergeChildren=u;var c=n(7),d=o(c)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=n(7),a=o(r),s=n(162),l=o(s),u=n(982),c=o(u),d=n(986),p=o(d),f={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},h=a.default.createClass({displayName:"AnimateChild",propTypes:{children:a.default.PropTypes.any},componentWillUnmount:function(){this.stop()},componentWillEnter:function(e){p.default.isEnterSupported(this.props)?this.transition("enter",e):e()},componentWillAppear:function(e){p.default.isAppearSupported(this.props)?this.transition("appear",e):e()},componentWillLeave:function(e){p.default.isLeaveSupported(this.props)?this.transition("leave",e):e()},transition:function(e,t){var n=this,o=l.default.findDOMNode(this),r=this.props,a=r.transitionName,s="object"===("undefined"==typeof a?"undefined":i(a));this.stop();var d=function(){n.stopper=null,t()};if((u.isCssAnimationSupported||!r.animation[e])&&a&&r[f[e]]){var p=s?a[e]:a+"-"+e,h=p+"-active";s&&a[e+"Active"]&&(h=a[e+"Active"]),this.stopper=(0,c.default)(o,{name:p,active:h},d)}else this.stopper=r.animation[e](o,d)},stop:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())},render:function(){return this.props.children}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=window.getComputedStyle(e),o="",i=0;i<h.length&&!(o=n.getPropertyValue(h[i]+t));i++);return o}function r(e){if(p){var t=parseFloat(i(e,"transition-delay"))||0,n=parseFloat(i(e,"transition-duration"))||0,o=parseFloat(i(e,"animation-delay"))||0,r=parseFloat(i(e,"animation-duration"))||0,a=Math.max(n+t,r+o);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},1e3*a+200)}}function a(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(983),u=o(l),c=n(984),d=o(c),p=0!==u.default.endEvents.length,f=["Webkit","Moz","O","ms"],h=["-webkit-","-moz-","-o-","ms-",""],m=function(e,t,n){var o="object"===("undefined"==typeof t?"undefined":s(t)),i=o?t.name:t,l=o?t.active:t+"-active",c=n,p=void 0,f=void 0,h=(0,d.default)(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(c=n.end,p=n.start,f=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),h.remove(i),h.remove(l),u.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,c&&c())},u.default.addEndEventListener(e,e.rcEndListener),p&&p(),h.add(i),e.rcAnimTimeout=setTimeout(function(){e.rcAnimTimeout=null,h.add(l),f&&setTimeout(f,0),r(e)},30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};m.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),a(e),u.default.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},u.default.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,r(e)},0)},m.setTransition=function(e,t,n){var o=t,i=n;void 0===n&&(i=o,o=""),o=o||"",f.forEach(function(t){e.style[t+"Transition"+o]=i})},m.isCssAnimationSupported=p,t.default=m,e.exports=t.default},function(e,t){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete r.animationend.animation,"TransitionEvent"in window||delete r.transitionend.transition;for(var n in r)if(r.hasOwnProperty(n)){var o=r[n];for(var i in o)if(i in t){a.push(o[i]);break}}}function o(e,t,n){e.addEventListener(t,n,!1)}function i(e,t,n){e.removeEventListener(t,n,!1)}Object.defineProperty(t,"__esModule",{value:!0});var r={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},a=[];"undefined"!=typeof window&&"undefined"!=typeof document&&n();var s={addEndEventListener:function(e,t){return 0===a.length?void window.setTimeout(t,0):void a.forEach(function(n){o(e,n,t)})},endEvents:a,removeEndEventListener:function(e,t){0!==a.length&&a.forEach(function(n){i(e,n,t)})}};t.default=s,e.exports=t.default},function(e,t,n){function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var i=n(985)}catch(e){var i=n(985)}var r=/\s+/,a=Object.prototype.toString;e.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=i(t,e);return~n||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=i(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!=typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(r);return""===n[0]&&n.shift(),n},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~i(this.array(),e)}},function(e,t){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}};t.default=n,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=o(i),a=n(988),s=o(a),l=r.default.createClass({displayName:"PopupInner",propTypes:{hiddenClassName:i.PropTypes.string,className:i.PropTypes.string,prefixCls:i.PropTypes.string,onMouseEnter:i.PropTypes.func,onMouseLeave:i.PropTypes.func,children:i.PropTypes.any},render:function(){var e=this.props,t=e.className;return e.visible||(t+=" "+e.hiddenClassName),r.default.createElement("div",{className:t,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:e.style},r.default.createElement(s.default,{className:e.prefixCls+"-content",visible:e.visible},e.children))}});t.default=l,e.exports=t.default},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(989),r=o(i),a=n(7),s=o(a),l=s.default.createClass({displayName:"LazyRenderBox",propTypes:{children:a.PropTypes.any,className:a.PropTypes.string,visible:a.PropTypes.bool,hiddenClassName:a.PropTypes.string},shouldComponentUpdate:function(e){return e.hiddenClassName||e.visible},render:function(){var e=this.props,t=e.hiddenClassName,n=e.visible,o=(0,r.default)(e,["hiddenClassName","visible"]);return t||s.default.Children.count(o.children)>1?(!n&&t&&(o.className+=" "+t),s.default.createElement("div",o)):s.default.Children.only(o.children)}});t.default=l,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e[0]===t[0]&&e[1]===t[1]}function r(e,t,n){var o=e[t]||{};return(0,l.default)({},o,n)}function a(e,t,n){var o=n.points;for(var r in e)if(e.hasOwnProperty(r)&&i(e[r].points,o))return t+"-placement-"+r;return""}Object.defineProperty(t,"__esModule",{value:!0});var s=n(921),l=o(s);t.getAlignFromPlacement=r,t.getPopupClassNameFromAlign=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e=document.createElement("div");return document.body.appendChild(e),e}function r(e){function t(e,t,n){if(!c||e._component||c(e)){e._container||(e._container=f(e));var o=void 0;o=e.getComponent?e.getComponent(t):d(e,t),l.default.unstable_renderSubtreeIntoContainer(e,o,e._container,function(){e._component=this,n&&n.call(this)})}}function n(e){if(e._container){var t=e._container;l.default.unmountComponentAtNode(t),t.parentNode.removeChild(t),e._container=null}}var o=e.autoMount,r=void 0===o||o,s=e.autoDestroy,u=void 0===s||s,c=e.isVisible,d=e.getComponent,p=e.getContainer,f=void 0===p?i:p,h=void 0;return r&&(h=a({},h,{componentDidMount:function(){t(this)},componentDidUpdate:function(){t(this)}})),r&&u||(h=a({},h,{renderComponent:function(e,n){t(this,e,n)}})),h=u?a({},h,{componentWillUnmount:function(){n(this)}}):a({},h,{removeContainer:function(){n(this)}})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=r;var s=n(162),l=o(s);e.exports=t.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={adjustX:1,adjustY:1},o=[0,0],i=t.placements={topLeft:{points:["bl","tl"],overflow:n,offset:[0,-4],targetOffset:o},topCenter:{points:["bc","tc"],overflow:n,offset:[0,-4],targetOffset:o},topRight:{points:["br","tr"],overflow:n,offset:[0,-4],targetOffset:o},bottomLeft:{points:["tl","bl"],overflow:n,offset:[0,4],targetOffset:o},bottomCenter:{points:["tc","bc"],overflow:n,offset:[0,4],targetOffset:o},bottomRight:{points:["tr","br"],overflow:n,offset:[0,4],targetOffset:o}};t.default=i},function(e,t,n){function o(e,t,n){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return r(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:o,maxWait:t,trailing:s})}var i=n(994),r=n(435),a="Expected a function";e.exports=o},function(e,t,n){function o(e,t,n){function o(t){var n=g,o=b;return g=b=void 0,P=t,C=e.apply(o,n)}function c(e){return P=e,E=setTimeout(f,t),k?o(e):C}function d(e){var n=e-T,o=e-P,i=t-n;return _?u(i,w-o):i}function p(e){var n=e-T,o=e-P;return void 0===T||n>=t||n<0||_&&o>=w}function f(){var e=r();return p(e)?h(e):void(E=setTimeout(f,d(e)))}function h(e){return E=void 0,O&&g?o(e):(g=b=void 0,C)}function m(){void 0!==E&&clearTimeout(E),P=0,g=T=b=E=void 0}function v(){return void 0===E?C:h(r())}function y(){var e=r(),n=p(e);if(g=arguments,b=this,T=e,n){if(void 0===E)return c(T);if(_)return E=setTimeout(f,t),o(T)}return void 0===E&&(E=setTimeout(f,t)),C}var g,b,w,C,E,T,P=0,k=!1,_=!1,O=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,i(n)&&(k=!!n.leading,_="maxWait"in n,w=_?l(a(n.maxWait)||0,t):w,O="trailing"in n?!!n.trailing:O),y.cancel=m,y.flush=v,y}var i=n(435),r=n(995),a=n(996),s="Expected a function",l=Math.max,u=Math.min;e.exports=o},function(e,t,n){var o=n(431),i=function(){return o.Date.now()};e.exports=i},function(e,t,n){function o(e){if("number"==typeof e)return e;if(r(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):l.test(e)?a:+e}var i=n(435),r=n(533),a=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=o},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(916),d=o(c),p=n(285),f=o(p),h=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={active:!1},this.handleVisibleChange=this.handleVisibleChange.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{type:l.PropTypes.string,onClick:l.PropTypes.func,trigger:l.PropTypes.string,overlay:l.PropTypes.element,visible:l.PropTypes.bool,disabled:l.PropTypes.bool,onVisibleChange:l.PropTypes.func,style:l.PropTypes.object,prefixCls:l.PropTypes.string,getPopupContainer:l.PropTypes.func}}},{key:"defaultProps",get:function(){return{prefixCls:"sm-dropdown-button",type:"default",mask:!1,disabled:!1,align:{points:["tr","br"],overlay:{adjustX:1,adjustY:1},offset:[0,5],targetOffset:[0,0]}}}}]),a(t,[{key:"handleVisibleChange",value:function(e){this.setState({active:e})}},{key:"render",value:function(){var e=(0,f.default)(this.props.prefixCls,this.props.className,{active:this.state.active});return u.default.createElement(d.default,{align:this.props.align,className:this.props.className,mask:this.props.mask,onVisibleChange:this.handleVisibleChange,overlay:this.props.overlay,trigger:this.props.trigger,getPopupContainer:this.props.getPopupContainer},u.default.createElement("div",{className:e,disabled:this.props.disabled,onClick:this.props.onClick},this.props.children))}}]),t}(l.Component);t.default=h,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(999),r=o(i),a=n(1e3),s=o(a);r.default.Item=s.default,t.default=r.default,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=o(u),d=n(1e3),p=o(d),f=n(1001),h=o(f),m=n(285),v=o(m),y=function(e){function t(){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.data;this.props.getListData&&(t=this.props.getListData());var n=this.props.renderItem;n||(n=function(t){return c.default.createElement(p.default,a({},t,{key:t.id||t.email,renderAction:e.props.renderAction}))});var o=(0,v.default)(this.props.classPrefix+"-list",{empty:0===t.length});return c.default.createElement(h.default,{className:o,overflow:this.props.overflow},t.map(n))}}],[{key:"propTypes",get:function(){return{classPrefix:u.PropTypes.string,data:u.PropTypes.array,getListData:u.PropTypes.func,renderItem:u.PropTypes.func,renderAction:u.PropTypes.func,overflow:u.PropTypes.array}}},{key:"defaultProps",get:function(){return{classPrefix:"user",overflow:[0,40]}}}]),t}(u.Component);t.default=y,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(161),d=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"render",value:function(){var e=cow.currentUser.id===this.props.id?this.props.name+" (我)":this.props.name;return u.default.createElement("div",{className:this.props.classPrefix+"-list-item"},u.default.createElement(c.ImageIcon,{customClass:"avatar",defaultImg:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",realImg:this.props.avatar}),u.default.createElement("span",{className:"name ellipsis"},e),u.default.createElement("span",{className:"email ellipsis"},this.props.email),this.props.renderAction&&this.props.renderAction(this.props))}}],[{key:"propTypes",get:function(){return{id:l.PropTypes.number,avatar:l.PropTypes.string,name:l.PropTypes.string,email:l.PropTypes.string,renderAction:l.PropTypes.func,classPrefix:l.PropTypes.string}}},{key:"defaultProps",get:function(){return{classPrefix:"user"}}}]),t}(l.Component);t.default=d,e.exports=t.default},,,,function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(161),d=n(998),p=o(d),f=n(311),h=o(f),m=n(4),v=n(804),y=o(v),g=n(175),b=n(231),w=o(g),C=n(1005),E=o(C),T=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={search:"",result:[]},this.getSearchResults=this.getSearchResults.bind(this),this.getUserInfoByEmail=this.getUserInfoByEmail,this.getRecentContacts=this.getRecentContacts.bind(this),this.getTeamMembers=this.getTeamMembers.bind(this),this.handleUserListClick=this.handleUserListClick.bind(this),this.renderActionComponent=this.renderActionComponent.bind(this),this.onSearchChange=this.onSearchChange.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{fileGuid:l.PropTypes.string,fileId:l.PropTypes.number,storage:l.PropTypes.object,maxShareCount:l.PropTypes.number,getTeamMembers:l.PropTypes.func,getRecentContacts:l.PropTypes.func,setPermission:l.PropTypes.func,showButton:l.PropTypes.bool,onButtonClick:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func,overflow:l.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},fileGuid:cow.currentFile.guid,fileId:cow.currentFile.id,maxShareCount:5}}}]),a(t,[{key:"componentDidMount",value:function(){this.props.getRecentContacts(),cow.currentUser.teamId&&this.props.getTeamMembers()}},{key:"getRecentContacts",value:function(){var e=this.props,t=e.storage,n=e.fileGuid,o=t.permissions[n],i=(0,m.map)(t.recentContacts,function(e){var n=t.users[e],i=o[e];return(0,m.assign)({},n,{permission:i})});return i}},{key:"getTeamMembers",value:function(){var e=this.props,t=e.storage,n=e.fileGuid,o=t.permissions[n],i=(0,m.map)(t.teamMembers,function(e){var n=t.users[e],i=o[e];return(0,m.assign)({},n,{permission:i})});return i}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.fileGuid,o=t.filePermissions[n],i=t.permissions[n],r=(0,m.map)(o,function(e){var n=t.users[e],o=i[e]||"editable";return(0,m.assign)({},n,{permission:o})});return r}},{key:"getSearchResults",value:function(){var e=this.state.search,t=this.getSharedUsers(),n=this.getRecentContacts(),o=this.getTeamMembers(),i=[].concat(t,n,o),r=h.default.searchByKeyword(e,i);if(this.setState({result:r}),0===r.length&&g.regs.email.test(e)){var a={name:"",email:e,avatar:"https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif"};r.push(a),this.setState({result:r}),this.getUserInfoByEmail(e)}}},{key:"getUserInfoByEmail",value:function(e){var t=this;h.default.searchByEmail(e).then(function(e){var n=t.state.result;1===n.length&&n[0].email===e.email&&(n[0].id=e.id,n[0].name=e.name,n[0].avatar=e.avatar),t.setState({result:n})},function(){var e=t.state.result;1===e.length&&(e[0].name="邮箱邀请",e[0].avatar="https://assets-cdn.shimo.im/assets/images/invited-f41924e412.png",t.setState({result:e}))})}},{key:"onSearchChange",value:function(e){var t=this;this.setState({search:e.target.value},function(){t.getSearchResults()})}},{key:"handleUserListClick",value:function(e,t){var n=this;e.id?this.props.setPermission(this.props.fileGuid,e.id,t).then(function(o){var i=o.error;i&&0!==i.code||("add"===t?w.default.alert({title:"添加成功"}):"remove"===t?w.default.alert({title:"移除成功"}):"remove"===t&&e.id===cow.currentUser.id&&n.props.cleanModals())}):(0,b.ajaxPost)("/api/invite",{file_id:this.props.fileId,users:e.email}).then(function(e){var t=e.data,o=t.success,i=t.detail;return o?(n.props.getSharedUsers(n.props.fileGuid),void n.forceUpdate()):void(i.length&&i[0].error?w.default.alert({title:i[0].error.message,type:"error"}):w.default.alert({title:"未知错误, 请稍后重试",type:"error"}))})}},{key:"renderActionComponent",value:function(e){var t=this.props.storage,n=t.files,o=t.permissions,i=n[this.props.fileGuid],r=e.permission;return r||(r=o[i.guid][e.id]),u.default.createElement(y.default,{userId:e.id,email:e.email,file:i,permission:r,getPopupContainer:function(){return document.querySelector(".teamwork-add-users")},handleActionClick:this.handleUserListClick})}},{key:"renderMemberList",value:function(){var e=[].concat(u.default.createElement(c.TabItem,{key:"1",title:"最近"},u.default.createElement(p.default,{overflow:this.props.overflow,getListData:this.getRecentContacts,renderAction:this.renderActionComponent})));return cow.currentUser.teamId&&e.push(u.default.createElement(c.TabItem,{key:"2",title:"企业成员"},u.default.createElement(p.default,{overflow:this.props.overflow,getListData:this.getTeamMembers,renderAction:this.renderActionComponent}))),u.default.createElement(c.Tab,{customClass:"sm-tab",disableSetWidth:!0},e)}},{key:"renderSearchResult",value:function(){var e=this;return u.default.createElement(p.default,{overflow:[0,25],classPrefix:"search-result-user",getListData:function(){return e.state.result},renderAction:this.renderActionComponent})}},{key:"render",value:function(){var e=this.state.search.length>0;return u.default.createElement("div",{className:"teamwork-add-users"},u.default.createElement("div",{className:"flex"},u.default.createElement("div",{className:"sm-form-control search-box"},u.default.createElement("span",{className:"team-sprite team-icon-search"}),u.default.createElement("input",{type:"text",placeholder:"输入邮箱、搜索姓名，添加协作者",value:this.state.search,onChange:this.onSearchChange}))),!e&&this.renderMemberList(),e&&this.renderSearchResult(),u.default.createElement(E.default,{fileGuid:this.props.fileGuid}),this.props.showButton&&u.default.createElement("div",{style:{textAlign:"right"}},u.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"确定")))}}]),t}(l.Component);t.default=T,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(175),d=o(c),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={inviteUrl:null}}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{fileGuid:l.PropTypes.string,fileType:l.PropTypes.string}}},{key:"defaultProps",get:function(){return{fileGuid:cow.currentFile.guid,fileType:cow.pageType}}}]),a(t,[{key:"componentDidMount",value:function(){var e=this;d.default.get("/api/file/"+this.props.fileGuid+"/invite_link").then(function(t){e.setState({inviteUrl:d.default.getQrImageUrl(114,t.data.link)})})}},{key:"render",value:function(){return u.default.createElement("div",{className:"wechat-invite"},u.default.createElement("span",{className:"btn"},"添加微信好友"),u.default.createElement("div",{className:"invite-link-popup"},u.default.createElement("p",null,"微信扫一扫"),u.default.createElement("img",{src:this.state.inviteUrl}),u.default.createElement("p",null,"把链接发送给好友",u.default.createElement("br",null),"邀请好友加入")))}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(4),d=n(161),p=n(998),f=o(p),h=n(167),m=o(h),v=n(175),y=o(v),g=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleUserListClick=this.handleUserListClick.bind(this),this.renderActionComponent=this.renderActionComponent.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{fileGuid:l.PropTypes.string,storage:l.PropTypes.object,maxShareCount:l.PropTypes.number,getSharedUsers:l.PropTypes.func,getFile:l.PropTypes.func,patchFile:l.PropTypes.func,setPermission:l.PropTypes.func,showButton:l.PropTypes.bool,onButtonClick:l.PropTypes.func,cleanModals:l.PropTypes.func,pushModal:l.PropTypes.func,popModal:l.PropTypes.func,overflow:l.PropTypes.array}}},{key:"defaultProps",get:function(){return{showButton:!1,onButtonClick:function(){},fileGuid:cow.currentFile.guid}}}]),a(t,[{key:"handleUserListClick",value:function(e){var t=this,n=document.querySelector(".modal-root");n&&(n.style.display="none"),(0,m.default)({title:"删除共享",description:"确定要将所有者角色转交给 "+e.name+"?",confirmFun:function(){n&&(n.style.display="block"),t.props.onButtonClick(),t.props.patchFile(t.props.fileGuid,{userId:e.id}).then(function(){y.default.alert({title:"移交所有权成功"})})}})}},{key:"getSharedUsers",value:function(){var e=this.props,t=e.storage,n=e.fileGuid,o=t.filePermissions[n],i=t.permissions[n],r=[];return(0,c.map)(o,function(e){var n=t.users[e];if(n.status>=0){var o=i[e]||"editable";r.push((0,c.assign)({},n,{permission:o}))}}),r}},{key:"getGroupedUsers",value:function(e){var t=[],n=[],o=this.getFileTeamId();return(0,c.forEach)(e,function(e){e.team_id&&e.team_id===o?t.push(e):n.push(e)}),{teamMembers:t,otherMembers:n}}},{key:"getFileTeamId",value:function(){var e=void 0,t=this.props,n=t.storage,o=t.fileGuid,i=n.files[o];return i&&(e=i.teamId||0),e}},{key:"renderActionComponent",value:function(e){var t=this,n=void 0,o=this.props.storage.files[this.props.fileGuid];return n=o.userId===e.id?u.default.createElement("div",{className:"sm-dropdown-button no-overlay"},"所有者"):u.default.createElement("div",{className:"sm-dropdown-button no-overlay",onClick:function(){return t.handleUserListClick(e)}},"选择")}},{key:"render",value:function(){var e=void 0,t=this.getFileTeamId(),n=this.getSharedUsers(),o=t===cow.currentUser.team_id;if(o){var i=this.getGroupedUsers(n),r=i.teamMembers;e=u.default.createElement(d.TabItem,{key:"1",title:"企业协作者 ("+r.length+")"},u.default.createElement(f.default,{overflow:this.props.overflow,data:r,renderAction:this.renderActionComponent}))}else 0!==t&&o||(e=u.default.createElement(d.TabItem,{key:"3",title:"协作者 ("+n.length+")"},u.default.createElement(f.default,{overflow:this.props.overflow,data:n,renderAction:this.renderActionComponent})));return u.default.createElement("div",{className:"teamwork-transfer-ownship"},u.default.createElement(d.Tab,{customClass:"sm-tab",disableSetWidth:!0},e),this.props.showButton&&u.default.createElement("button",{className:"btn btn-ok",onClick:this.props.onButtonClick},"返回"))}}]),t}(l.Component);t.default=g,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=o(u),d=n(161),p=n(710),f=n(803),h=o(f),m=n(1008),v=o(m),y=n(1009),g=o(y),b=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleAddPanelBtnClick=this.handleAddPanelBtnClick.bind(this),this.handleUserListClick=this.handleUserListClick.bind(this),this.handleTransferButtonClick=this.handleTransferButtonClick.bind(this),this.handleContentSwitch=this.handleContentSwitch.bind(this),this.renderBody=this.renderBody.bind(this),this.onClose=this.onClose.bind(this)}return r(t,e),s(t,null,[{key:"propTypes",get:function(){return{fileGuid:u.PropTypes.string,fileId:u.PropTypes.number,storage:u.PropTypes.object,maxShareCount:u.PropTypes.number,getSharedUsers:u.PropTypes.func,setPermission:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func}}},{key:"defaultProps",get:function(){return{disableAddUser:!1}}}]),s(t,[{key:"handleAddPanelBtnClick",value:function(){this.props.popModal(),this.props.pushModal(v.default,{fileGuid:this.props.fileGuid,fileId:this.props.fileId})}},{key:"handleUserListClick",value:function(e,t){this.props.setPermission(this.props.fileGuid,e,t)}},{key:"handleTransferButtonClick",value:function(){this.props.popModal(),this.props.pushModal(g.default,{fileGuid:this.props.fileGuid,fileId:this.props.fileId})}},{key:"handleContentSwitch",value:function(e){"add"===e&&this.handleAddPanelBtnClick(),"transfer"===e&&this.handleTransferButtonClick()}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(e){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(h.default,a({},this.props,{showButton:!0,onButtonClick:this.handleContentSwitch}))}},{key:"render",value:function(){var e=[];return c.default.createElement(d.Dialog,{open:!0,hasMask:!1,ref:"target",title:"协作",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(u.Component);t.default=(0,p.register)("SharedUsersDialog",b),e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(710),d=n(161),p=n(1007),f=o(p),h=n(1004),m=o(h),v=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.renderBody=this.renderBody.bind(this),this.onClose=this.onClose.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{storage:l.PropTypes.object,fileGuid:l.PropTypes.string,fileId:l.PropTypes.number,getRecentContacts:l.PropTypes.func,getTeamMembers:l.PropTypes.func,setPermission:l.PropTypes.func,popModal:l.PropTypes.func,pushModal:l.PropTypes.func}}}]),a(t,[{key:"onClose",value:function(){this.props.popModal(),this.props.pushModal(f.default,{fileGuid:this.props.fileGuid,fileId:this.props.fileId})}},{key:"renderBody",value:function(){return u.default.createElement(m.default,this.props)}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.onClose,label:"确定"}),u.default.createElement(d.Dialog,{open:!0,hasMask:!1,customClass:"teamworker-sharelist-inner button-right",bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(l.Component);t.default=(0,c.register)("AddUserDialog",v),e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},u=n(7),c=o(u),d=n(161),p=n(710),f=n(1006),h=o(f),m=n(1007),v=o(m),y=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleButtonClick=this.handleButtonClick.bind(this),this.renderBody=this.renderBody.bind(this),this.onClose=this.onClose.bind(this)}return r(t,e),s(t,null,[{key:"propTypes",get:function(){return{fileGuid:u.PropTypes.string,fileId:u.PropTypes.number,storage:u.PropTypes.object,getSharedUsers:u.PropTypes.func,setPermission:u.PropTypes.func,cleanModals:u.PropTypes.func,pushModal:u.PropTypes.func,popModal:u.PropTypes.func}}}]),s(t,[{key:"handleButtonClick",value:function(){this.props.popModal(),this.props.pushModal(v.default,{fileGuid:this.props.fileGuid,fileId:this.props.fileId})}},{key:"onClose",value:function(){this.props.cleanModals()}},{key:"renderHeader",value:function(e){return c.default.createElement("div",null,c.default.createElement("span",{className:"dialog-title"},e),c.default.createElement("span",{className:"hicon icon-close dialog-close-btn",onClick:this.onClose}))}},{key:"renderBody",value:function(){return c.default.createElement(h.default,a({},this.props,{onButtonClick:this.handleButtonClick}))}},{key:"render",value:function(){var e=[];return e.push({customClass:"btn btn-ok",onTap:this.handleButtonClick,label:"返回"}),c.default.createElement(d.Dialog,{open:!0,hasMask:!1,ref:"target",title:"转让所有权",customClass:"teamworker-sharelist-inner",headTpl:this.renderHeader,bodyTpl:this.renderBody,actions:e,onClose:this.onClose})}}]),t}(u.Component);t.default=(0,p.register)("TransferOwnshipDialog",y),e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(285),d=o(c),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleClick=this.handleClick.bind(this),this.reactive=this.reactive.bind(this),this.state={active:!0,activedChild:null}}return r(t,e),a(t,null,[{key:"propTypes",get:function(){}}]),a(t,[{key:"handleClick",value:function(e){this.setState({active:!1,activedChild:e})}},{key:"reactive",value:function(){this.setState({active:!0,activedChild:null})}},{key:"render",value:function(){var e=this,t=u.default.Children.map(this.props.children,function(t){var n=t.props.name;return u.default.cloneElement(t,{key:n,actived:e.state.activedChild===n,onBtnClick:e.handleClick.bind(e,n),onClose:e.reactive})}),n=(0,d.default)("fixed-box",{active:this.state.active});return u.default.createElement("div",{className:n},t)}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(1081),d=o(c),p=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleBtnClick=this.handleBtnClick.bind(this)}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{actived:l.PropTypes.bool,onClose:l.PropTypes.func,onBtnClick:l.PropTypes.func}}}]),a(t,[{key:"componentDidMount",value:function(){(0,d.default)()}},{key:"handleBtnClick",value:function(){this.props.onBtnClick()}},{key:"render",value:function(){return u.default.createElement("div",null,u.default.createElement("div",{className:"fixed-button meiqia-btn",onClick:this.handleBtnClick},"反馈"),u.default.createElement("div",{className:"meiqia-unread-msg"},u.default.createElement("span",{className:"meiqia-msg-count hide"},"10"),u.default.createElement("div",{className:"meiqia-msg-content hide"})))}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t,n){(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){v.cacheDom={feedbackWrap:n(".fixed-box"),feedbackBtn:n(".meiqia-btn"),meiqiaPanel:n(),unreadMsgCount:n(".meiqia-msg-count")},v.meiqiaInited=!1,v.meiqiaIsReady=!1,v.hasLoadedMeiqia=!1,v.wantShowMe=!1,v.veryMuchWantShowMe=!1,v.unreadMsgCount=0,v.clickedBtn=!1}function t(){v.cacheDom.feedbackBtn.on("click",function(){v.clickedBtn=!0,s()})}function o(){t();var e=12e4;r()&&(e=1e4),v.meiqiaLoadTimerId=setTimeout(function(){i()&&a()},e)}function i(){return v.cacheDom.feedbackWrap.length>0}function r(){var e=window.localStorage.getItem("shimo_last_feedback_time");if(e){e=+e;var t=(new Date).getTime(),n=t-e,o=864e5;if(n<o)return!0}return!1}function a(){!function(e,t,n,o,i,r,a){e[i]=e[i]||function(){(e[i].a=e[i].a||[]).push(arguments)},r=t.createElement(n),a=t.getElementsByTagName(n)[0],r.async=!0,r.charset="UTF-8",r.src=o+"?v="+(new Date).getUTCDate(),a.parentNode.insertBefore(r,a)}(window,document,"script","//static.meiqia.com/dist/meiqia.js","_MEIQIA"),window._MEIQIA("entId","12319"),window._MEIQIA("manualInit",!0),window._MEIQIA("withoutBtn",!0),window._MEIQIA("allSet",d),window._MEIQIA("getUnreadMsg",p),window._MEIQIA("getPanelVisibility",f);var e=setInterval(function(){"function"==typeof window._MEIQIA._INIT&&(window._MEIQIA._INIT(),v.meiqiaInited=!0,clearInterval(e))},200);v.hasLoadedMeiqia=!0}function s(){v.hasLoadedMeiqia?v.meiqiaInited||(window._MEIQIA._INIT(),v.wantShowMe=!0,v.meiqiaInited=!0):(clearTimeout(v.meiqiaLoadTimerId),a(),v.veryMuchWantShowMe=!0),v.meiqiaIsReady&&(window._MEIQIA._SHOWPANEL(),h(),u(),v.cacheDom.meiqiaPanel=n("#MEIQIA-PANEL-HOLDER")),window.localStorage.setItem("shimo_last_feedback_time",(new Date).getTime())}function l(){window._MEIQIA._HIDEPANEL()}function u(){v.cacheDom.feedbackWrap.removeClass("active")}function c(){v.cacheDom.feedbackWrap.addClass("active")}function d(){v.meiqiaIsReady=!0,window.cow&&cow.currentUser&&m(),(v.wantShowMe||v.veryMuchWantShowMe)&&(v.wantShowMe=!1,v.veryMuchWantShowMe=!1,s())}function p(e){"object"==typeof e&&e.length>0?(v.unreadMsgCount+=e.length,v.unreadMsgCount>0&&v.cacheDom.unreadMsgCount.removeClass("hide").text(v.unreadMsgCount)):"string"==typeof e&&"hasBeenRead"===e&&(v.cacheDom.unreadMsgCount.addClass("hide").text(v.unreadMsgCount),v.unreadMsgCount=0)}function f(e){"invisible"===e?(c(),v.cacheDom.meiqiaPanel.removeClass("active")):v.clickedBtn?v.cacheDom.meiqiaPanel.addClass("active"):window._MEIQIA._HIDEPANEL()}function h(){0===v.cacheDom.meiqiaPanel.length&&(v.cacheDom.meiqiaPanel=n("#MEIQIA-PANEL-HOLDER"));var e=v.cacheDom.meiqiaPanel,t=e.find("iframe").filter(function(){return n(this).hasClass("meiqia-iframe-hidebtn")});if(0===t.length){var o=document.createElement("iframe");o.className="meiqia-iframe-hidebtn",e.append(o),e.on("click",".meiqia-iframe-hidebtn",function(){e.removeClass("active"),setTimeout(function(){l()},300)})}}function m(){var e=new Date(window.cow.currentUser.created_at),t="",n=cow.currentUser.accountType;"personal_free"===n?t="基础免费":"personal_premium"===n?t="个人高级":"enterprise_dingding"===n?t="钉钉":"enterprise_standard"===n&&(t="企业"),window._MEIQIA._SENDMETADATA({avatar:window.cow.currentUser.avatar,name:window.cow.currentUser.name,"用户名":window.cow.currentUser.name,"邮箱":window.cow.currentUser.email,"注册时间":e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),"用户类型":t})}var v={};e(),o()},e.exports=t.default}).call(t,n(1))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(285),d=o(c),p=[{label:"@人，@文档",img:"https://dn-shimo-image.qbox.me/connect_people_and_document.gif",desc:"输入@，然后输入用户昵称或文件名"},{label:"任务列表",img:"https://dn-shimo-image.qbox.me/task_list.gif",desc:"点击工具栏的任务列表"},{label:"划词评论",img:"https://dn-shimo-image.qbox.me/word_review_comment.gif",desc:"选中想要评论的文字，点击右侧或工具栏的评论"},{label:"插入超链接",img:"https://dn-shimo-image.qbox.me/insert_link.gif",desc:"选中需要插入链接的文字，点击工具栏插入-超链接"},{label:"插入代码块",img:"https://dn-shimo-image.qbox.me/insert_code.gif",desc:"点击工具栏插入-代码块"},{label:"统计字数",img:"https://dn-shimo-image.qbox.me/statistical_word_count.gif",desc:"选中想要统计字数的文字，页面下方就会显示对应字数"},{label:"历史还原",img:"https://dn-shimo-image.qbox.me/history_reduction.gif",desc:"点击工具栏查看-历史，查看操作历史根据需要进行还原"},{label:"分享链接",img:"https://dn-shimo-image.qbox.me/share_link.gif",desc:"点击页面右上角的分享-点击开启，复制链接即可"},{label:"添加协作者",img:"https://dn-shimo-image.qbox.me/add_collaborator.gif",desc:"点击页面右上角的协作-添加协作成员"},{label:"导出文档",img:"https://dn-shimo-image.qbox.me/export_document.gif",desc:"点击页面右上角的操作-导出"}],f=function(e){function t(e){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleListClick=this.handleListClick.bind(this),this.state={step:0,imageLoaded:!1}}return r(t,e),a(t,null,[{key:"propTypes",get:function(){return{actived:l.PropTypes.bool,onBtnClick:l.PropTypes.func,onClose:l.PropTypes.func}}}]),a(t,[{key:"handleListClick",value:function(e){var t=e.target.dataset.step;void 0!==t&&this.setState({step:t,imageLoaded:!1})}},{key:"renderLabel",value:function(e,t){var n=(0,d.default)("step-"+t);return u.default.createElement("li",{key:t,className:n,"data-step":t},e.label)}},{key:"renderImage",value:function(){var e=this,t=(0,d.default)({loading:!this.state.imageLoaded}),n="https://assets-cdn.shimo.im/assets/images/loading-b67e5a67dc.gif",o=p[this.state.step].img,i=p[this.state.step].desc,r=(0,d.default)({"image-desc":!0,"desc-icon-1":1==this.state.step,"desc-icon-2":2==this.state.step});if(!this.state.imageLoaded){var a=new Image;a.src=o,a.onload=function(){return e.setState({imageLoaded:!0})}}return[u.default.createElement("div",{key:0,className:r},i),u.default.createElement("img",{key:1,className:t,src:this.state.imageLoaded?o:n})]}},{key:"render",value:function(){var e=(0,d.default)("user-guide",{active:this.props.actived}),t=(0,d.default)("guide-list","step-wrapper-"+this.state.step),n=(0,d.default)("image-list","step-wrapper-"+this.state.step);return u.default.createElement("div",null,u.default.createElement("div",{className:"fixed-button",onClick:this.props.onBtnClick},"帮助"),u.default.createElement("div",{className:e},u.default.createElement("div",{className:"title"},"帮助 - 功能演示"),u.default.createElement("span",{className:"hicon icon-close",onClick:this.props.onClose}),u.default.createElement("div",{className:"guide-list-wrapper"},u.default.createElement("ul",{className:t,onClick:this.handleListClick},p.map(this.renderLabel))),u.default.createElement("div",{className:n},this.renderImage())))}}]),t}(l.Component);t.default=f,e.exports=t.default},,,,,,function(e,t,n){(function(e){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){f.default.getDocByGuid(e,t).then(function(e){E.default.inc(),window.cow.authorized=e.authorized;var t=void 0;window.cow.currentFile=t=e,window.cow.currentDocGuid=t.guid,O.dispatch(k.default.receivedDocData(e)),w.default.doc.show("doc"),window.cow.docApp||(window.cow.docApp=u.default.render(s.default.createElement(_,{store:O},s.default.createElement(T.DocContainer,null)),S.docViewWrap[0])),document.title=t.name,g.default.notify("file:updateTitle",t.name),g.default.notify("page:docChanged")}).fail(function(e){setTimeout(function(){location.href="/desktop",window.cow.loading=!1,E.default.done(),v.default.alert({title:e?e.message:"加载出错"})},0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.initDoc=r;var a=n(7),s=i(a),l=n(162),u=i(l),c=n(235),d=o(c),p=n(288),f=i(p),h=n(1089),m=n(175),v=i(m),y=n(166),g=i(y),b=n(1024),w=i(b),C=n(391),E=i(C),T=n(1264),P=n(1275),k=i(P);n(191);var _=d.Provider,O=(0,h.Store)(),S={headerWrap:e("#header-wrap"),docTitleInput:e("#doc-title-input"),docViewWrap:e("#pad-view")}}).call(t,n(1))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return v(m,e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(242),s=i(a),l=n(254),u=o(l),c=n(1090),d=o(c),p=s.createStore,f=s.applyMiddleware,h=null,m=s.combineReducers({msg:d.default}),v=f(u.default)(p),y=function(){return h||(h=r()),h};t.Store=y},function(e,t,n){(function(n){function o(e,t){switch(e=e||i,t.type){case"RECEIVED_DOC_DATA":return a(e,t.docData)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i={docData:{}},r=function(e,t){return n.assign({},e,t)},a=function(e,t){return r(e,{docData:t})};e.exports=t.default}).call(t,n(4))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(t){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e}function l(e){return{dispatch:e}}function u(e,n,o){return t.assign({},o,e,n)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},p=n(7),f=i(p),h=n(235),m=o(h),v=n(166),y=i(v),g=n(1024),b=i(g),w=n(290),C=i(w),E=n(184),T=i(E),P=n(664),k=i(P),_=n(222),O=i(_),S=n(1265),x=i(S),M=n(175),N=i(M),j=n(1269),I=i(j),L=n(1079),A=i(L),D=n(1080),U=i(D),R=n(1082),F=i(R),B=n(648),W=i(B),z=n(687),H=i(z);(0,O.default)();var K=m.connect,V=function(e){function t(){r(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this;y.default.attach("file:updateTitle",function(t){e.refs.docTitle.value=t}),this._initPad()}},{key:"shouldComponentUpdate",value:function(e){var t=e.msg.docData;return"doc"===window.cow.pageType&&t&&t.guid===window.cow.currentDocGuid}},{key:"componentDidUpdate",value:function(){this._initPad()}},{key:"_onTitleChange",value:function(){}},{key:"_initPad",value:function(){n.e(14,function(e){var t=n(312),o=n(1270),i=n(293);n(316),window.pad=t.pad,window.pad.initialized||t.init(),o.getInstance("#sidebar").reset(),i.getInstance(".sidebar-body").commentInit(),C.default.reset(),b.default.setDocInit(!0),y.default.notify("pad:render_content",b.default),T.default.getConnectSocket().then(function(){y.default.notify("pad:sendClientStatus","ready")})})}},{key:"render",value:function(){var e=window.cow.currentDocGuid,t=!N.default.isMobile(),n="";t&&(n="pad-view-pc");var o=void 0;return o=""===cow.welcomeFile?"欢迎使用石墨文档"===cow.currentFile.name:cow.currentFile.guid===cow.welcomeFile,f.default.createElement("div",{id:"pad-view-inner",className:"pad-view-inner "+n},f.default.createElement(W.default,{type:"doc"}),f.default.createElement("div",{id:"edit-heading",className:"edit-heading"},f.default.createElement("div",{className:"h-container edit-heading-container"},f.default.createElement("div",{id:"editbar",className:"toolbar visible editbar doc-editbar"},f.default.createElement("ul",{className:"menu_left editbar-list"},f.default.createElement("li",{id:"undo",className:"undo-redo editbar-list-item","data-type":"button","data-key":"undo"},f.default.createElement("a",{className:"toolbar-item grouped-left","data-content":"撤销 (Ctrl+Z)"},f.default.createElement("span",{className:"new-icon new-icon-go-ahead"}))),f.default.createElement("li",{className:"undo-redo editbar-list-item","data-type":"button","data-key":"redo"},f.default.createElement("a",{className:"toolbar-item grouped-left","data-content":"重做 (Ctrl+Y)"},f.default.createElement("span",{className:"new-icon new-icon-retreat"}))),f.default.createElement("li",{id:"paint-format",className:"editbar-list-item","data-type":"button","data-key":"paint-format"},f.default.createElement("a",{href:"javascript:void(0);",className:"toolbar-item grouped-left","data-content":"格式刷"},f.default.createElement("span",{className:"new-icon new-icon-paint-format"}))),f.default.createElement("li",{id:"clear-format",className:"editbar-list-item","data-type":"button","data-key":"clear-format"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item grouped-left","data-content":"清除格式"},f.default.createElement("span",{className:"new-icon new-icon-clear-format"}))),f.default.createElement("li",{className:"separator editbar-list-item"}),f.default.createElement("li",{id:"heading",className:"dropdown-item editbar-dropdown-item editbar-list-item"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item font-type-item","data-content":"标题 (Ctrl+Shift+K)"},f.default.createElement("span",{className:"toolbar-icon font-type-toolbar-icon"},f.default.createElement("span",{className:"type-txt"},"普通"),f.default.createElement("span",{className:"new-icon new-icon-down font-icon-down toolbar-icon-down"}))),f.default.createElement("div",{className:"toolbar-menu font-type-menu"},f.default.createElement("ul",{id:"heading-selection",className:"toolbar-menu-list heading-menu-list"},f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"font-type-item menu-item"},f.default.createElement("span",{"data-value":"-1"},"普通"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"font-type-item menu-item"},f.default.createElement("span",{"data-value":"1"},"小标题"))),f.default.createElement("li",null,f.default.createElement("a",{
href:"javascript:;",className:"font-type-item menu-item"},f.default.createElement("span",{"data-value":"2"},"中标题"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"font-type-item menu-item"},f.default.createElement("span",{"data-value":"3"},"大标题")))))),f.default.createElement("li",{id:"font-size",className:"dropdown-item editbar-dropdown-item editbar-list-item"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item font-size-toolbar","data-content":"字号 (Ctrl+Shift+↑/↓)"},f.default.createElement("span",{className:"toolbar-icon"},f.default.createElement("span",{className:"size-txt"},"14"),f.default.createElement("span",{className:"new-icon new-icon-down font-icon-down toolbar-icon-down"}))),f.default.createElement("div",{className:"toolbar-menu font-size-menu"},f.default.createElement("ul",{id:"size-list",className:"toolbar-menu-list"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"bold"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"粗体 (Ctrl+B)"},f.default.createElement("span",{className:"new-icon new-icon-bold","data-l10n-id":"pad.toolbar.bold.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"italic"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"斜体 (Ctrl+I)"},f.default.createElement("span",{className:"new-icon new-icon-italic","data-l10n-id":"pad.toolbar.italic.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"underline"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"下划线 (Ctrl+U)"},f.default.createElement("span",{className:"new-icon new-icon-underline","data-l10n-id":"pad.toolbar.underline.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"strikethrough"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"中划线"},f.default.createElement("span",{className:"new-icon new-icon-strikethrough","data-l10n-id":"pad.toolbar.strikethrough.title"}))),f.default.createElement("li",{className:"editbar-list-item editbar-dropdown-item dropdown-item font-color","data-type":"button","data-key":"fontcolor"},f.default.createElement("a",{className:"toolbar-item",href:"javascript:void(0);","data-content":"字体颜色"},f.default.createElement("span",{className:"new-icon new-icon-font-color"},f.default.createElement("span",{className:"new-icon new-icon-down font-color-icon-down"}),f.default.createElement("span",{className:"icon-font-color-bottom"}))),f.default.createElement("div",{className:"toolbar-menu font-color-menu"},f.default.createElement("ul",{id:"color-list",className:"toolbar-menu-list font-color-list"}))),f.default.createElement("li",{className:"separator editbar-list-item"}),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"insertorderedlist"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"有序列表 (Ctrl+Shift+U)"},f.default.createElement("span",{className:"new-icon new-icon-ul-list","data-l10n-id":"pad.toolbar.ol.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"insertunorderedlist"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"无序列表 (Ctrl+Shift+I)"},f.default.createElement("span",{className:" new-icon new-icon-ol-list","data-l10n-id":"pad.toolbar.ul.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"checklist"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"任务列表 (Ctrl+Shift+Y)"},f.default.createElement("span",{className:"new-icon new-icon-check-list"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"indent"},f.default.createElement("a",{className:"grouped-left toolbar-item",href:"javascript:void(0);","data-content":"增加缩进 (TAB)"},f.default.createElement("span",{className:" new-icon new-icon-indent","data-l10n-id":"pad.toolbar.indent.title"}))),f.default.createElement("li",{className:"editbar-list-item","data-type":"button","data-key":"outdent"},f.default.createElement("a",{className:"grouped-right toolbar-item",href:"javascript:void(0);","data-content":"减少缩进 (Shift+TAB)"},f.default.createElement("span",{className:" new-icon new-icon-outdent","data-l10n-id":"pad.toolbar.unindent.title"}))),f.default.createElement("li",{className:"editbar-list-item editbar-dropdown-item dropdown-item",id:"align-toolbar-btn"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item","data-content":"对齐"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-align-left icon-align-arrow"}),f.default.createElement("span",{className:"new-icon new-icon-down toolbar-icon-down align-icon-down"})),f.default.createElement("div",{className:"toolbar-menu align-toolbar-menu"},f.default.createElement("ul",{className:"toolbar-menu-list"},f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item align-toolbar-item","data-index":"0","data-content":"左对齐"},f.default.createElement("span",{className:"new-icon new-icon-align-left align-item-icon"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item align-toolbar-item","data-index":"1","data-content":"居中对齐"},f.default.createElement("span",{className:"new-icon new-icon-align-center align-item-icon"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item align-toolbar-item","data-index":"2","data-content":"右对齐"},f.default.createElement("span",{className:"new-icon new-icon-align-right align-item-icon"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item align-toolbar-item","data-index":"3","data-content":"两端对齐"},f.default.createElement("span",{className:"new-icon new-icon-align-justify align-item-icon"})))))),f.default.createElement("li",{className:"separator editbar-list-item"}),f.default.createElement("li",{id:"doc-insert",className:"dropdown-item editbar-dropdown-item editbar-list-item"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item"},f.default.createElement("span",{className:"toolbar-icon font-type-toolbar-icon"},f.default.createElement("span",{className:"doc-insert-txt"},"插入"),f.default.createElement("span",{className:"new-icon new-icon-down font-icon-down toolbar-icon-down"}))),f.default.createElement("div",{className:"toolbar-menu doc-insert-menu"},f.default.createElement("ul",{id:"doc-insert-selection",className:"toolbar-menu-list doc-insert-menu-list"},f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"image-upload-button"},f.default.createElement("span",{className:"new-icon new-icon-img"}),f.default.createElement("span",{className:"doc-insert-info"},"图片"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"insert-table-btn"},f.default.createElement("span",{className:"new-icon new-icon-table"}),f.default.createElement("span",{className:"doc-insert-info"},"表格"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"link-btn"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-link"}),f.default.createElement("span",{className:"doc-insert-info"},"超链接"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"horizontal-line"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-horizontal-line"}),f.default.createElement("span",{className:"doc-insert-info"},"分隔线"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"upload-attachment"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-attachment"}),f.default.createElement("span",{className:"doc-insert-info"},"附件"))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"menu-item",id:"code-area-btn","data-content":"```+空格"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-code-area"}),f.default.createElement("span",{className:"doc-insert-info"},"代码块")))))),f.default.createElement("li",{className:"separator editbar-list-item"}),f.default.createElement("li",{className:"editbar-list-item",id:"select-comment"},f.default.createElement("a",{href:"javascript:void(0);",className:"toolbar-item","data-content":"评论 (Ctrl+Shift+P)"},f.default.createElement("span",{className:"toolbar-icon new-icon new-icon-comment-add"}))),f.default.createElement("li",{id:"display-toolbar-btn",className:"dropdown-item editbar-dropdown-item editbar-list-item"},f.default.createElement("a",{href:"javascript:;",className:"toolbar-item font-type-item","data-content":"更多信息"},f.default.createElement("span",{className:"toolbar-icon"},f.default.createElement("span",{className:"display-txt"},"查看"),f.default.createElement("span",{className:"new-icon new-icon-down font-icon-down toolbar-icon-down"}))),f.default.createElement("div",{className:"toolbar-menu display-type-menu"},f.default.createElement("ul",{id:"display-selection",className:"toolbar-menu-list display-menu-list"},f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;",className:"display-item menu-item userline-btn","data-content":"编写者"},f.default.createElement("span",null,"编写者"),f.default.createElement("span",{className:"new-icon new-icon-checkone"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;","data-type":"directory",className:"display-item menu-item directory-btn","data-content":"目录 (Ctrl+Shift+O)"},f.default.createElement("span",null,"目录"),f.default.createElement("span",{className:"new-icon new-icon-checkone"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;","data-type":"history",className:"display-item menu-item history-btn","data-content":"历史 (Ctrl+Shift+L)"},f.default.createElement("span",null,"历史"),f.default.createElement("span",{className:"new-icon new-icon-checkone"}))),f.default.createElement("li",null,f.default.createElement("a",{href:"javascript:;","data-type":"comment",className:"change-comment-btn display-item menu-item","data-content":"评论"},f.default.createElement("span",null,"评论"),f.default.createElement("span",{className:"new-icon new-icon-checkone"})))))))),f.default.createElement("div",{className:"right-box edit-right-box"},f.default.createElement("div",{className:"operation-box"},f.default.createElement("span",{className:"edit-dropdown-btn dropdown-btn operation-btn"}," 操作 ",f.default.createElement("span",{className:"hicon icon-down edit-dropdown-btn-icon"})),f.default.createElement("div",{className:"edit-dropdown dropdown operation operation-dropdown"})),f.default.createElement("div",{className:"list-share-box hide"},f.default.createElement(k.default,null)),f.default.createElement("div",{className:"list-share-box hide"},cow.authorized&&f.default.createElement(H.default.Popover,null))))),f.default.createElement("div",{id:"doc-view",className:"doc-view"},f.default.createElement("div",{className:"outer-container"},f.default.createElement("div",{className:"content-container"},f.default.createElement("div",{className:"container commentable doc-container",id:"doc-container"},f.default.createElement("div",{id:"editorcontainerbox"},f.default.createElement("div",{id:"editorcontainer",className:"pc editorcontainer"},f.default.createElement("div",{className:"doc-title-box"},f.default.createElement("input",{id:"doc-title-input",className:"mousetrap",defaultValue:"无标题",placeholder:"无标题","data-value":"未命名",maxLength:"100",ref:"docTitle"})),f.default.createElement("div",{id:"outerdocbody"},f.default.createElement("div",{id:"innerdocbody",spellCheck:"false",className:"syntax needsclick innerdocbody mousetrap",autoCorrect:"off",autoComplete:"off"}),f.default.createElement("div",{id:"mention-pop",className:"doc-mention-pop"},f.default.createElement("div",{className:"trangle-box"},f.default.createElement("span",{className:"top doc-metion-trangle-item"}),f.default.createElement("span",{className:"down doc-metion-trangle-item"})),f.default.createElement("ul",{className:"doc-mention-list"},f.default.createElement("li",{className:"doc-mention-placeholder doc-mention-item"},"@朋友或者文档")),f.default.createElement("ul",{className:"result-list doc-mention-list doc-mention-result-list"})),f.default.createElement("span",{id:"mention-width"}),f.default.createElement("div",{id:"track-avatars"}),f.default.createElement("div",{id:"drag-li",tabIndex:"-1"})),f.default.createElement("div",{id:"buddle-box"}),f.default.createElement("div",{id:"buddle-comment-btn",className:"hicon icon-comment-add buddle-comment-btn"}),f.default.createElement("div",{id:"image-resize-frame"}),f.default.createElement("div",{className:"image-resize-bar"}),f.default.createElement("div",{className:"copy-container",contentEditable:"true"}))),f.default.createElement("div",{id:"overlaysdiv"})),f.default.createElement("div",{id:"sidebar",className:"sidebar"},f.default.createElement("div",{className:"sidebar-body"},f.default.createElement("div",{className:"list-mask"}),f.default.createElement("div",{id:"doc-history",className:"document-info-list hide"},f.default.createElement("div",{className:"doc-history-title"},f.default.createElement("span",{className:"icon-close hicon doc-sidebar-close"})),f.default.createElement("ul",{className:"history-list"})),f.default.createElement("ul",{className:"temp-list"},f.default.createElement("div",{className:"close-temp hicon icon-close"}),f.default.createElement("div",{className:"no-target"},"标注已被删除"),f.default.createElement("div",{className:"trangle-box temp-list-trangle"},f.default.createElement("span",{className:"left temp-list-trangle-item"}),f.default.createElement("span",{className:"right temp-list-trangle-item"}))),f.default.createElement("div",{id:"document-cover-box"},f.default.createElement("div",{className:"document-cover top"}),f.default.createElement("div",{className:"document-cover bottom"}),f.default.createElement("div",{className:"document-cover right"})),f.default.createElement("div",{id:"doc-directory",className:"doc-directory hide"},f.default.createElement("div",{className:"doc-directory-title"},f.default.createElement("span",{className:"icon-close hicon doc-sidebar-close"}),"目录"),f.default.createElement("ul",{className:"doc-directory-list"})))))),!N.default.isMobile()&&f.default.createElement(x.default,{guid:e}),f.default.createElement("div",{id:"text-count",className:"text-count hide"},f.default.createElement("span",{className:"text-count-number"}),"个字"),f.default.createElement("div",{id:"footer",className:"editable-footer"},f.default.createElement("span",{className:"copy footer-copy"},"文档编写于",f.default.createElement("a",{href:"/"},"石墨")))),f.default.createElement("input",{id:"focus-target"}),f.default.createElement("div",{className:"mention-pop",id:"comment-mention-pop"}),f.default.createElement(A.default,null,f.default.createElement(U.default,{name:"meiqia"}),f.default.createElement(F.default,{name:"userGuide"})),o&&f.default.createElement(I.default,{ref:"tutorial"}))}}]),t}(p.Component),G=K(s,l,u,{withRef:!0})(V);e.exports={Doc:V,DocContainer:G}}).call(t,n(4))},function(e,t,n){(function(o,i){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=r(c),p=n(162),f=r(p),h=n(1266),m=r(h),v=n(231),y=n(166),g=r(y),b=n(184),w=r(b),C=n(175),E=r(C),T=n(1268),P=r(T),k=function(e){function t(){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={comments:[],dirtyCheck:1,activeGuid:"",mainGuid:"",user:window.cow.currentUser,newSelectionGuid:[],curInput:"",fileGuid:window.cow.currentFile.guid}}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{guid:c.PropTypes.string}}}]),l(t,[{key:"componentDidMount",value:function(){var e=window.cow.currentFile.permissions||{};e.commentable&&this._queryComments(this.props.guid),this._bindPush(),this._bindEvent(),this.inputMap={},g.default.attach("dirtyCheck",this._dirtyCheck.bind(this)),g.default.attach("comment:start",this._startComment.bind(this)),g.default.attach("comment:show",this._showComment.bind(this))}},{key:"componentWillReceiveProps",value:function(e){this.setState({comments:[],fileGuid:window.cow.currentFile.guid});var t=window.cow.currentFile.permissions||{};t.commentable&&this._queryComments(e.guid)}},{key:"_bindEvent",value:function(){var e=this;o(document).on("click",function(t){e.state.activeGuid&&"buddle-comment-btn"!==t.target.id&&!e._isInComment(t.target)&&e._resetActive()}),o(window).on("resize",function(){e._dirtyCheck()})}},{key:"_bindPush",value:function(){var e=this;w.default.bind("Comment",function(t){if("create"===t.db_event){var n=t.data;e._handleCommentPush(n),"duang"===n.content&&e._duang()}else"update"===t.db_event?e._deleteCommentFromUi(t.data.comment_guid):"closeComments"===t.db_event&&e._deleteCommentsBySelectionGuid(t.data.selection_guid)})}},{key:"_deleteCommentsBySelectionGuid",value:function(e){var t=this.state.comments;i.remove(t,function(t){return t.selection_guid===e});this.state.activeGuid===e&&this._resetSelectionActive(),this.setState({comments:t})}},{key:"_handleCommentPush",value:function(e){var t=i.findIndex(this.state.comments,function(t){return t.comment_guid==e.comment_guid});if(t===-1){var n=this.state.comments;n.push(this._addUserAttrs(e)),this.setState({comments:n})}}},{key:"_duang",value:function(){var e=o("#pad-view");e.addClass("duang"),setTimeout(function(){e.removeClass("duang")},1e3)}},{key:"_isInComment",value:function(e){return o(e).parents(".doc-comment-box")[0]||o(e).hasClass("doc-comment-box")||o(e).parents(".doc-comment-number")[0]||o(e).hasClass("doc-comment-number")||o(e).hasClass("doc-comment-btn")||o(e).parents(".confirm-wrap")[0]}},{key:"_startComment",value:function(e){g.default.notify("comment:show");var t=this.state.newSelectionGuid;t.push(e),this._focusInput(e),this.setState({newSelectionGuid:t,activeGuid:e,mainGuid:e})}},{key:"_showComment",value:function(e){this.activeGuid!==e&&(this._focusInput(e),this.setState({activeGuid:e,mainGuid:e,curInput:this.inputMap[e]}),g.default.notify("active:change",[e]))}},{key:"_resetActive",value:function(e){var t=this.state,n=t.newSelectionGuid,o=t.activeGuid,r=e||o,a=this.inputMap[r];n.indexOf(r)>-1&&!P.default.hasContent(a)&&this._hasNoComments(r)&&(i.remove(n,function(e){return e===r}),g.default.notify("comment:cancel",r)),this.setState({activeGuid:"",mainGuid:""}),this._resetSelectionActive()}},{key:"_resetSelectionActive",value:function(){g.default.notify("active:change",[])}},{key:"_hasNoComments",value:function(e){var t=i.findIndex(this.state.comments,function(t){return t.selection_guid==e});return t===-1}},{key:"_dirtyCheck",value:function(){this.setState({dirtyCheck:this.state.dirtyCheck+1})}},{key:"_filterList",value:function(e){var t={};return i.forEach(e,function(e){var n=e.selection_guid;t[n]?t[n].push(e):t[n]=[e]}),this._filterGuid(t)}},{key:"_filterGuid",value:function(e){var t=this,n=document.getElementById("innerdocbody"),o=n&&n.getElementsByClassName("is-commented"),r=[],a={};return o&&o.length?(i.forEach(o,function(n){var o=n.className.match(/comment-\w{16}/)[0];a[o]||(o&&e[o]||t.state.newSelectionGuid.indexOf(o)>-1)&&(a[o]=!0,r.push({selection_guid:o,comments:e[o]||[],top:n.offsetTop}))}),r):[]}},{key:"_addUserAttrsByArray",value:function(e){var t=this;return i.forEach(e,function(e){t._addUserAttrs(e)}),e}},{key:"_addUserAttrs",value:function(e){return e.formattedTime=E.default.DateTime.format(e.created_at),e}},{key:"_queryComments",value:function(e){var t=this;(0,v.ajaxGet)("/api/comment/"+e).then(function(e){0===e.code&&t.setState({comments:t._addUserAttrsByArray(e.data)})}).catch(function(e){console.log("request comments error: "+e)})}},{key:"_getContainerStyle",value:function(){var e=document.getElementById("editorcontainerbox");return e?{left:e.offsetLeft+e.clientWidth-40}:{}}},{key:"_commentClick",value:function(e){this._showComment(e)}},{key:"_focusInput",value:function(e){var t=this;setTimeout(function(){var n=f.default.findDOMNode(t.refs[e]),o=n.getElementsByClassName("doc-comment-input")[0];o&&o.focus()},500)}},{key:"_changeContainerClass",value:function(){var e=o("#editorcontainerbox");this.state.activeGuid?e.addClass("comment-actived"):e.removeClass("comment-actived")}},{key:"_adjustPosition",value:function(e){if(e.length){var t=Math.max(i.findIndex(e,{selection_guid:this.state.mainGuid}),0),n=o(".doc-comment-box");n[t].style.top=e[t].top+"px";for(var r=t+1;r<e.length;r++)this._adjustComment(e,n,r,"bottom");for(var r=t-1;r>=0;r--)this._adjustComment(e,n,r,"top");o(".doc-comment-container").css("opacity","1")}}},{key:"_adjustComment",value:function(e,t,n,o){var i=t[n-1],r=t[n],a=t[n+1],s=+r.style.top.replace("px",""),l=e[n].top;if(this.state.mainGuid&&s&&(l=s),"bottom"===o){var u=+i.style.top.replace("px","")+i.clientHeight+10;l=Math.max(u,l)}else{var c=+a.style.top.replace("px","")-r.clientHeight-10;l=Math.min(c,l)}r.style.top=l+"px"}},{key:"changeInputValue",value:function(e,t){this.inputMap[e]=t,this.setState({curInput:t})}},{key:"pushComment",value:function(e,t){var n=this.state.comments;this.inputMap[t]="",n.push(this._addUserAttrs(e)),this.setState({comments:n})}},{key:"closeComments",value:function(e){var t=this,n=this.state.comments,o=i.remove(n,function(t){return t.selection_guid===e}),r=this.state.newSelectionGuid;i.remove(r,function(e){return e===t.state.activeGuid}),this.setState({comments:n,newSelectionGuid:r}),this._resetSelectionActive(),this._closeCommentsBySelectionGuid(e,o)}},{key:"deleteComment",value:function(e){this._deleteCommentFromUi(e),this._deleteCommentByCommentGuid(e)}},{key:"_deleteCommentFromUi",value:function(e){var t=this.state.newSelectionGuid,n=this.state.comments,o=i.remove(n,function(t){return t.comment_guid===e}),r=o[0],a=this.state.activeGuid;if(r&&r.selection_guid===a&&t.indexOf(a)===-1){var s=i.findIndex(n,function(e){return e.comment_guid===r.selection_guid});s===-1&&(a="",this._resetSelectionActive())}this.setState({comments:n,activeGuid:a})}},{key:"_deleteCommentByCommentGuid",value:function(e){o.ajax({type:"post",url:"/api/comment/delete/"+e,data:{},dataType:"json",success:function(){console.log("delete comment success")},error:function(){console.log("delete comment error")}})}},{key:"_closeCommentsBySelectionGuid",value:function(e,t){var n=this;o.ajax({type:"post",url:"/api/comment/closeComments",data:{select_guid:e,target_guid:this.state.fileGuid},success:function(){console.log("delete comments success")},error:function(){console.log("delete comments error");var e=n.state.comments.concat(t);n.setState({comments:e})}})}},{key:"_notifyCommentsChange",value:function(e){var t={};i.forEach(e,function(e){t[e.selection_guid]=e.comments}),g.default.notify("comment:change",t)}},{key:"changeState",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=this._filterList(this.state.comments),n=t.map(function(t,n){var o=t.selection_guid;return d.default.createElement(m.default,{activeGuid:e.state.activeGuid,ref:o,fileGuid:e.state.fileGuid,changeInputValue:e.changeInputValue.bind(e),user:e.state.user,defaultValue:e.inputMap[o],index:n,resetActive:e._resetActive.bind(e),onClick:e._commentClick.bind(e,o),pushComment:e.pushComment.bind(e),deleteComment:e.deleteComment.bind(e),closeComments:e.closeComments.bind(e),selectionObj:t,key:o})}),o=this._getContainerStyle();return clearTimeout(this.adjustTimeout),this.adjustTimeout=setTimeout(function(){e._adjustPosition(t)},0),this._notifyCommentsChange(t),this._changeContainerClass(),d.default.createElement("div",{className:"doc-comment-container",style:o},d.default.createElement("div",{className:"doc-comment-list"},n),d.default.createElement("div",{className:"doc-comment-render"}))}}]),t}(c.Component);t.default=k,e.exports=t.default}).call(t,n(1),n(4))},function(e,t,n){(function(o,i){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=r(c),p=n(1267),f=r(p),h=n(175),m=r(h),v=n(294),y=r(v),g=n(166),b=r(g),w=n(167),C=r(w),E=n(1268),T=r(E),P=function(e){function t(){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={afterAdjust:!1,isMac:m.default.isMac()}}return s(t,e),l(t,null,[{key:"propTypes",get:function(){return{activeGuid:c.PropTypes.string,selectionObj:c.PropTypes.object,onClick:c.PropTypes.func,user:c.PropTypes.object,changeInputValue:c.PropTypes.func,resetActive:c.PropTypes.func,closeComments:c.PropTypes.func,deleteComment:c.PropTypes.func,defaultValue:c.PropTypes.string,pushComment:c.PropTypes.func,fileGuid:c.PropTypes.string}}}]),l(t,[{key:"componentDidMount",value:function(){var e=this;this.lastShowFooter=!1,o(this.refs.box).on("mouseover",function(){e._changeActiveSelection("hover")}).on("mouseout",function(){e._changeActiveSelection()}),o(this.refs.body).on("mousewheel DOMMouseScroll",function(e){if(this.scrollHeight!==this.offsetHeight){var t=e.originalEvent,n=t.wheelDelta||-t.detail,o=n>0?"up":"down",i="up"===o&&0===this.scrollTop||"down"===o&&this.scrollTop===this.scrollHeight-this.offsetHeight;i&&t.preventDefault()}}),setTimeout(function(){e.setState({afterAdjust:!0})},0)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this._changeToActive(e);n&&setTimeout(function(){t._fillInput(),t._scrollToEnd()},0)}},{key:"_changeActiveSelection",value:function(e){var t=[],n=this.props.selectionObj.selection_guid,o=this.props.activeGuid;o||("hover"===e&&(t=[n]),b.default.notify("active:change",t))}},{key:"_changeToActive",value:function(e){var t=this.props,n=t.activeGuid,o=t.selectionObj,i=e.activeGuid===e.selectionObj.selection_guid,r=n===o.selection_guid;return!r&&i}},{key:"_scrollToEnd",value:function(e){e=e||this.refs.body,e.scrollTop=e.scrollHeight}},{key:"_fillInput",value:function(){this.refs.input.innerHTML=this.props.defaultValue||""}},{key:"_initMention",value:function(){var e=this;setTimeout(function(){e.mentionPop=new y.default("#comment-mention-pop"),e.mentionPop.mentionable(o(".doc-comment-input"))},0)}},{key:"_transformInput",value:function(e){return e.replace(/(\s|&nbsp;)+$/g,"").replace(/(\s|<br>)+$/g,"")}},{key:"_sendComment",value:function(e){var t=this,n=this._transformInput(this.refs.input.innerHTML),r=this.props.selectionObj.selection_guid,a=o("#innerdocbody").find("."+r).text(),s={comment_guid:m.default.genGuid(),content:n,selection_guid:r,selection_title:a,created_at:new Date,user_id:this.props.user.id};this.props.pushComment(i.extend(s,{User:this.props.user})),this.refs.input.innerHTML="",this.refs.input.focus(),this.props.changeInputValue(r,""),this._doSend(s),e.stopPropagation(),setTimeout(function(){t._scrollToEnd()},0)}},{key:"_doSend",value:function(e){var t=this.props.fileGuid;o.ajax({type:"post",url:"/api/comment/create?target_type=file&guid="+t,data:e,dataType:"json",success:function(){console.log("success")},error:function(){console.log("error")}})}},{key:"_cancelComment",value:function(e){var t=this.props.selectionObj.selection_guid;this.props.changeInputValue(t,""),this.props.resetActive(t),e.stopPropagation()}},{key:"_onInput",value:function(e){this.props.changeInputValue(this.props.selectionObj.selection_guid,e.target.innerHTML)}},{key:"_onKeyDown",value:function(e){var t=e.shiftKey;if(!t&&13===e.keyCode&&(!this.mentionPop||!this.mentionPop.inMention)&&T.default.hasContent(e.target.innerHTML))return this._sendComment(e),e.preventDefault(),!1}},{key:"_closeComments",value:function(){var e=this;(0,C.default)({title:"结束讨论",description:"结束讨论后该讨论将被彻底删除，确定结束吗？",confirmFun:function(){var t=e.props.selectionObj.selection_guid;e.props.closeComments(t)}})}},{key:"_getBodyDom",value:function(e){var t=this.props.user,n=this.props.selectionObj.comments,o=n.length,i=this.props.deleteComment,r=void 0;if(o>2&&!e){var a=n[0],s=n[o-1];r=[d.default.createElement(f.default,{user:t,deleteComment:i,comment:a,key:a.comment_guid}),d.default.createElement("div",{className:"doc-comment-number",key:"0"},"中间还有 ",o-2," 条评论"),d.default.createElement(f.default,{user:t,deleteComment:i,comment:s,key:s.comment_guid})]}else r=n.map(function(e){return d.default.createElement(f.default,{user:t,deleteComment:i,comment:e,key:e.comment_guid})});return r}},{key:"render",value:function(){var e=this.props,t=e.selectionObj,n=e.activeGuid,o=e.onClick,i=e.user,r=e.defaultValue,a=t.selection_guid,s=n===a,l=!t.comments.length,u=T.default.isEmpty(r),c=T.default.hasContent(r),p=s||l,f=s&&!l,h=this._getBodyDom(s),m=s?"active":"";return p&&!this.lastShowFooter&&this._initMention(),this.lastShowFooter=p,this.state.afterAdjust||(m+=" comment-init"),d.default.createElement("div",{ref:"box",className:"doc-comment-box "+m,onClick:o},f&&d.default.createElement("div",{className:"doc-comment-header"},d.default.createElement("a",{onClick:this._closeComments.bind(this),className:"doc-comment-close"},d.default.createElement("span",{className:"doc-comment-close-icon"}),"结束讨论")),d.default.createElement("div",{className:"doc-comment-body",ref:"body"},h),p&&!l&&d.default.createElement("div",{className:"doc-footer-divide"}),p&&d.default.createElement("div",{className:"doc-comment-footer"},d.default.createElement("img",{className:"doc-comment-avatar",src:i.avatar}),u&&d.default.createElement("div",{className:"doc-comment-input-placeholder"},"按enter发送，shift+enter换行"),d.default.createElement("div",{contentEditable:"true",
onKeyDown:this._onKeyDown.bind(this),onInput:this._onInput.bind(this),ref:"input",className:"doc-comment-input"}),c&&d.default.createElement("div",{className:"doc-comment-btn-box"},d.default.createElement("a",{onClick:this._cancelComment.bind(this),className:"doc-comment-btn doc-comment-cancel btn"},"取消"),d.default.createElement("a",{onClick:this._sendComment.bind(this),className:"doc-comment-btn doc-comment-send btn btn-ok"},"确定"))))}}]),t}(c.Component);t.default=P,e.exports=t.default}).call(t,n(1),n(4))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},l=n(7),u=o(l),c=n(167),d=o(c),p=function(e){function t(){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return r(t,e),a(t,[{key:"_deleteComment",value:function(){var e=this;(0,d.default)({title:"删除评论",description:"确认要永久删除该评论吗？",confirmFun:function(){e.props.deleteComment(e.props.comment.comment_guid)}})}},{key:"_getContentHeight",value:function(){var e=this.props.comment.content,t=document.getElementsByClassName("doc-comment-render")[0],n="<div>"+e+"</div>";return t.innerHTML=n,t.firstChild.scrollHeight}},{key:"render",value:function(){var e=this.props.comment,t=this.props.user,n=e.content,o=e.formattedTime,i=e.User||window.cow.defaultAnonymousUser,r=i.avatar,a=i.name,s=i.user_id,l="",c="";return this.contentHeight||(this.contentHeight=this._getContentHeight()),this.contentHeight>50&&(l="over-range"),t.id===s&&(c="current-user"),u.default.createElement("div",{className:"doc-comment-item "+c},u.default.createElement("img",{className:"doc-comment-avatar",src:r}),u.default.createElement("span",{className:"doc-comment-online"}),u.default.createElement("div",{className:"doc-comment-text"},u.default.createElement("span",{className:"doc-comment-time"},o),u.default.createElement("span",{className:"doc-comment-delete",onClick:this._deleteComment.bind(this)},"删除"),u.default.createElement("span",{className:"doc-comment-name"},a),u.default.createElement("br",null),u.default.createElement("span",{className:"doc-comment-content "+l,dangerouslySetInnerHTML:{__html:n}})))}}],[{key:"propTypes",get:function(){return{comment:l.PropTypes.object,deleteComment:l.PropTypes.func,user:l.PropTypes.object}}}]),t}(l.Component);t.default=p,e.exports=t.default},function(e,t){function n(e){return!(e&&e.replace("<br>",""))}function o(e){return e&&!!e.replace(/<\/?[^>]*>/gim,"").replace(/&nbsp;|\s/g,"").length}e.exports={isEmpty:n,hasContent:o}},function(e,t,n){(function(o,i){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=r,n=a,o=!0,s=u=void 0}},c=n(7),d=r(c),p=n(285),f=r(p),h=n(1220),m=r(h),v=n(185),y=n(166),g=r(y),b=n(266),w=r(b),C=function(e){function t(e){a(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={step:0,hide:!0,tipsVisible:[!1,!1,!1,!1,!1,!1],tipsElement:[{},{},{},{},{},{}]},this.reset=this.show,this.handleClick=this.handleClick.bind(this),this.handlePadInput=this.handlePadInput.bind(this),this.changeGuideTipVisible=this.changeGuideTipVisible.bind(this),this.handlePadReady=this.handlePadReady.bind(this),this.handleMentionShow=this.handleMentionShow.bind(this),this.handleCommentBtnClick=this.handleCommentBtnClick.bind(this)}return s(t,e),l(t,[{key:"componentDidMount",value:function(){g.default.attach("guideTip:visible",this.changeGuideTipVisible),g.default.attach("pad:showMention",this.handleMentionShow),o(window).on("pad_ready",this.handlePadReady)}},{key:"componentWillUnmount",value:function(){g.default.detach("guideTip:visible"),g.default.detach("pad:showMention",this.handleMentionShow),o(window).off("pad_ready",this.handlePadReady);var e=document.getElementById("innerdocbody"),t=document.getElementById("buddle-comment-btn");e.removeEventListener("input",this.handlePadInput),t.removeEventListener("click",this.handleCommentBtnClick)}},{key:"handleMentionShow",value:function(){this.changeGuideTipVisible({index:1,value:!1})}},{key:"handleCommentBtnClick",value:function(){this.changeGuideTipVisible({index:2,value:!1})}},{key:"handlePadReady",value:function(){if(w.default.checkIsWelcomeFile()){this.show();var e=document.getElementById("innerdocbody"),t=document.getElementById("buddle-comment-btn");e.removeEventListener("input",this.handlePadInput),e.addEventListener("input",this.handlePadInput),t.removeEventListener("click",this.handleCommentBtnClick),t.addEventListener("click",this.handleCommentBtnClick)}}},{key:"handlePadInput",value:function(){this.state.tipsVisible[0]&&this.changeGuideTipVisible({index:0,value:!1})}},{key:"changeGuideTipVisible",value:function(e,t){var n=this.state.tipsVisible.map(function(t,n){return!(!e.value||n!==e.index)});return t?n:void this.setState({tipsVisible:n})}},{key:"$",value:function(e){var t=(0,v.qsa)(e),n=t[0]||null;return n?"none"===n.style.display?null:"0"===n.style.opacity?null:"hidden"===n.style.visibility?null:n:null}},{key:"openDisplayDropMenu",value:function(){var e=document.getElementById("display-toolbar-btn");e instanceof Element&&e.click()}},{key:"handleClick",value:function(e){var t=this,n=e.target.dataset.action;switch(n){case"next":var r=this.state.step+1,a=0;[0,1,2].indexOf(r)>-1&&g.default.notify("pad:setCaretFixedPosition"),2===r&&(a=500),3===r&&this.openDisplayDropMenu(),6===r&&g.default.notify("guideTip:visible:desktop",!0);var s=this.changeGuideTipVisible({index:r,value:!0},!0);return void i.delay(function(){t.setState({step:r,tipsVisible:s,tipsElement:t.getTipsElement(r)})},a);case"prev":return r=this.state.step-1,s=this.changeGuideTipVisible({index:r,value:!0},!0),this.setState({step:r,tipsVisible:s});case"close":return s=this.changeGuideTipVisible({index:0,value:!1},!0),this.setState({hide:!0,step:0,tipsVisible:s});case"again":return g.default.notify("guideTip:visible:desktop",!1),void this.reset();case"help":return s=this.changeGuideTipVisible({index:0,value:!0},!0),o(".user-guide").prev(".fixed-button").click(),this.setState({hide:!0,tipsVisible:s});default:return}}},{key:"show",value:function(){var e=[].concat(this.state.tipsVisible).map(function(e,t){return 0===t});g.default.notify("pad:setCaretFixedPosition"),this.setState({step:0,hide:!1,tipsVisible:e,tipsElement:this.getTipsElement(0)})}},{key:"getSelectionLineElement",value:function(){var e=window.getSelection(),t=document.getElementById("innerdocbody");if(!t)return null;var n=e.anchorNode;if(3===n.nodeType&&(n=n.parentNode),!n)return null;var o=n.closest('div[id^="magicdom"]');return t.contains(o)?o:null}},{key:"getTipsElement",value:function(e){var t=this.state.tipsElement,n=i.isNumber(e)?e:this.state.step,o=this.$("#innerdocbody"),r=this.$("#doc-view"),a={positionNodeElement:o,triggerNodeElement:r};return 0===n?t[0]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.getSelectionLineElement()}):1===n?t[1]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.getSelectionLineElement()}):2===n?t[2]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.$("#buddle-comment-btn")}):3===n?t[3]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.$("#display-toolbar-btn .history-btn")}):4===n?t[4]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.$(".teamwork-popover-trigger")}):5===n?t[5]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.$(".share-btn-wrap")}):6===n&&(t[6]=(Object.assign||i.assign).call(null,a,{positionNodeElement:this.$(".header-back-up")})),[].concat(t)}},{key:"hideGuideTip",value:function(e){var t=[].concat(this.state.tipsVisible);t[e]=!1,this.setState({tipsVisible:t})}},{key:"render",value:function(){var e=(0,f.default)("tutorial","step-wrapper-"+this.state.step,{active:!this.state.hide}),t=window.innerHeight,n=this.state.tipsVisible,o=this.state.tipsElement;return d.default.createElement("div",{className:e,onClick:this.handleClick},d.default.createElement("span",{className:"hicon icon-close","data-action":"close"}),d.default.createElement("div",{className:"step step-0 center"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/real_time_save.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,"Hi，"+cow.currentUser.name+"！",d.default.createElement("span",{className:"image-font font-1"},"欢迎使用石墨文档")),d.default.createElement("p",null,"试试写几个字，你的编辑将实时保存到云端"))),d.default.createElement("div",{className:"step step-1"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/connect_people_and_document.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-2"},"@人，@文档")),d.default.createElement("ul",null,d.default.createElement("li",null,"输入 ",d.default.createElement("span",{className:"link"},"@"+cow.currentUser.name)," 来提及自己，可以用来分配任务。@他人后对方会收到消息提醒"),d.default.createElement("li",null,"输入 ",d.default.createElement("span",{className:"link"},"@欢迎使用石墨文档")," 来链接石墨文档，已有的文档或表格都可以被提及")))),d.default.createElement("div",{className:"step step-2"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/word_review_comment.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-3"},"划词评论")),d.default.createElement("ul",null,d.default.createElement("li",null,"点击某行文字右侧的",d.default.createElement("span",{className:"hicon icon-comment-add"}),"来对此进行评论"),d.default.createElement("li",null,"或者选中文字/图片，点击工具栏",d.default.createElement("span",{className:"new-icon new-icon-comment-add"}),"也可进行划词评论")))),d.default.createElement("div",{className:"step step-3"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/history_reduction.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-4"},"历史还原")),d.default.createElement("ul",null,d.default.createElement("li",null,"点击查看历史，你的所有编辑记录都在这里"),d.default.createElement("li",null,"还可随时还原历史编辑")))),d.default.createElement("div",{className:"step step-4"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/add_collaborator.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-6"},"邀请他人协作")),d.default.createElement("p",null,"添加成员邮箱，此文档会出现在他们的石墨文档桌面上，",d.default.createElement("br",null),"并可以随时与你协作编辑（即使分享链接关闭）"))),d.default.createElement("div",{className:"step step-5"},d.default.createElement("img",{className:"guide",src:"https://dn-shimo-image.qbox.me/share_link.gif"}),d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-5"},"分享链接")),d.default.createElement("ul",null,d.default.createElement("li",null,"开启分享链接，他人可以通过链接访问文档"),d.default.createElement("li",null,"设置分享链接，只读/可写/私有，多种文档权限一手掌握")))),d.default.createElement("div",{className:"step step-6 center"},d.default.createElement("div",null,d.default.createElement("p",null,d.default.createElement("span",{className:"image-font font-7"},"太棒了！")),d.default.createElement("p",null,"更多功能使用方法，请点击左下角 ",d.default.createElement("span",{className:"link","data-action":"help"},"帮助")),d.default.createElement("p",null,"你还可以返回 ",d.default.createElement("a",{className:"link",href:"/desktop"},"桌面"),"， 看看我们的示例文档"),d.default.createElement("p",null,d.default.createElement("span",{className:"btn","data-action":"again"},"再看一遍")))),d.default.createElement("div",{className:"guide-mask"}),d.default.createElement("div",{className:"guide-tips-wrap"},d.default.createElement(m.default,{text:"输入一些文字",placement:"left",offsetLeft:70,offsetTop:-5,visible:n[0],positionNodeElement:o[0].positionNodeElement,triggerNodeElement:o[0].triggerNodeElement,triggerEvents:["scroll"],viewRect:{minTop:100,maxTop:t-300},autoUpdate:!0}),d.default.createElement(m.default,{text:"输入“@"+cow.currentUser.name+"”提及自己",placement:"left",offsetLeft:70,offsetTop:-5,visible:n[1],positionNodeElement:o[1].positionNodeElement,triggerNodeElement:o[1].triggerNodeElement,triggerEvents:["scroll"],viewRect:{minTop:100,maxTop:t-300},autoUpdate:!0}),d.default.createElement(m.default,{text:"点这里，添加评论",placement:"left",offsetLeft:-20,offsetTop:-7,visible:n[2],positionNodeElement:o[2].positionNodeElement,triggerNodeElement:o[2].triggerNodeElement,triggerEvents:["scroll","click"],isDebounced:!0,debounceConfig:{click:100,scroll:0},maxWait:100,viewRect:{minTop:100,maxTop:t-300},autoUpdate:!0}),d.default.createElement(m.default,{text:"点这里，查看历史",placement:"left",autoHide:!0,onNeedHide:this.hideGuideTip.bind(this,3),offsetLeft:0,offsetTop:-4,visible:n[3],positionNodeElement:o[3].positionNodeElement}),d.default.createElement(m.default,{text:"点这里，添加协作者",placement:"left",offsetLeft:-10,offsetTop:0,visible:n[4],positionNodeElement:o[4].positionNodeElement}),d.default.createElement(m.default,{text:"点这里，开启公开分享链接",placement:"left",offsetLeft:-10,offsetTop:0,visible:n[5],positionNodeElement:o[5].positionNodeElement})),d.default.createElement("div",{className:"pagination"},d.default.createElement("span",{className:"btn next","data-action":"next"},"下一步")))}}]),t}(c.Component);t.default=C,e.exports=t.default}).call(t,n(1),n(4))},,,,,,function(e,t){function n(e){return{type:"RECEIVED_DOC_DATA",docData:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={receivedDocData:n},e.exports=t.default}]));